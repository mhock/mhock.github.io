<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="initial-scale=1.0">
<!--
Processo 0.0.7b
Copyright (C) 2020-2021 by Martin Hock
Contains copy of FlexiColorPicker 2017-03-17:
Copyright (c) 2011 - 2012 David Durman
Contains copy of Split.js 1.5.11:
Copyright (c) 2019 Nathan Cahill
Contains copy of FileSaver.js:
Copyright Â© 2016 Eli Grey.
Contains substantial portions of CodeMirror 5.52.2:
Copyright (C) 2020 by Marijn Haverbeke <marijnh@gmail.com> and others
Contains substantial portions of Processing.js 1.6.6:
Copyright (C) 2008 John Resig
Copyright (C) 2009-2011 John Resig, Alistair MacDonald, David Humphrey, Corban Brook, Anna Sobiepanek, Andor Salga, Daniel Hodgin, Scott Downe, Yuri Delendik, Mike Kamermans, Chris Lonnen, Mickael Medel, Matthew Lam, Jon Buckley, Dominic Baranski, Eli Grey, Thomas Saunders, Abel Allison, Andrew Grimo, Donghui Liu, Edward Sin, Alex Londono, Robert O'Rourke, Thanh Dao, Zhibin Huang, John Turner, Tom Brown, Minoo Ziaei, Ricard Marxer, Matt Postill, Tiago Moreira, Jonathan Brodsky, Roger Sodre, James Boelen, Michal Ejdys, Greg Krilov

This software is placed under the following license:

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

-->
<title>Processo</title>
<style>
/* BASICS */

.CodeMirror {
  /* Set height, width, borders, and global font properties here */
  font-family: monospace;
  height: 300px;
  color: black;
  direction: ltr;
}

/* PADDING */

.CodeMirror-lines {
  padding: 4px 0; /* Vertical padding around content */
}
.CodeMirror pre.CodeMirror-line,
.CodeMirror pre.CodeMirror-line-like {
  padding: 0 4px; /* Horizontal padding of content */
}

.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  background-color: white; /* The little square between H and V scrollbars */
}

/* GUTTER */

.CodeMirror-gutters {
  border-right: 1px solid #ddd;
  background-color: #f7f7f7;
  white-space: nowrap;
}
.CodeMirror-linenumbers {}
.CodeMirror-linenumber {
  padding: 0 3px 0 5px;
  min-width: 20px;
  text-align: right;
  color: #999;
  white-space: nowrap;
}

.CodeMirror-guttermarker { color: black; }
.CodeMirror-guttermarker-subtle { color: #999; }

/* CURSOR */

.CodeMirror-cursor {
  border-left: 1px solid black;
  border-right: none;
  width: 0;
}
/* Shown when moving in bi-directional text */
.CodeMirror div.CodeMirror-secondarycursor {
  border-left: 1px solid silver;
}
.cm-fat-cursor .CodeMirror-cursor {
  width: auto;
  border: 0 !important;
  background: #7e7;
}
.cm-fat-cursor div.CodeMirror-cursors {
  z-index: 1;
}
.cm-fat-cursor-mark {
  background-color: rgba(20, 255, 20, 0.5);
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
}
.cm-animate-fat-cursor {
  width: auto;
  border: 0;
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
  background-color: #7e7;
}
@-moz-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@-webkit-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}

/* Can style cursor different in overwrite (non-insert) mode */
.CodeMirror-overwrite .CodeMirror-cursor {}

.cm-tab { display: inline-block; text-decoration: inherit; }

.CodeMirror-rulers {
  position: absolute;
  left: 0; right: 0; top: -50px; bottom: 0;
  overflow: hidden;
}
.CodeMirror-ruler {
  border-left: 1px solid #ccc;
  top: 0; bottom: 0;
  position: absolute;
}

/* DEFAULT THEME */

.cm-s-default .cm-header {color: blue;}
.cm-s-default .cm-quote {color: #090;}
.cm-negative {color: #d44;}
.cm-positive {color: #292;}
.cm-header, .cm-strong {font-weight: bold;}
.cm-em {font-style: italic;}
.cm-link {text-decoration: underline;}
.cm-strikethrough {text-decoration: line-through;}

.cm-s-default .cm-keyword {color: #708;}
.cm-s-default .cm-atom {color: #219;}
.cm-s-default .cm-number {color: #164;}
.cm-s-default .cm-def {color: #00f;}
.cm-s-default .cm-variable,
.cm-s-default .cm-punctuation,
.cm-s-default .cm-property,
.cm-s-default .cm-operator {}
.cm-s-default .cm-variable-2 {color: #05a;}
.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}
.cm-s-default .cm-comment {color: #a50;}
.cm-s-default .cm-string {color: #a11;}
.cm-s-default .cm-string-2 {color: #f50;}
.cm-s-default .cm-meta {color: #555;}
.cm-s-default .cm-qualifier {color: #555;}
.cm-s-default .cm-builtin {color: #30a;}
.cm-s-default .cm-bracket {color: #997;}
.cm-s-default .cm-tag {color: #170;}
.cm-s-default .cm-attribute {color: #00c;}
.cm-s-default .cm-hr {color: #999;}
.cm-s-default .cm-link {color: #00c;}

.cm-s-default .cm-error {color: #f00;}
.cm-invalidchar {color: #f00;}

.CodeMirror-composing { border-bottom: 2px solid; }

/* Default styles for common addons */

div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}
div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}
.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }
.CodeMirror-activeline-background {background: #e8f2ff;}

/* STOP */

/* The rest of this file contains styles related to the mechanics of
   the editor. You probably shouldn't touch them. */

.CodeMirror {
  position: relative;
  overflow: hidden;
  background: white;
}

.CodeMirror-scroll {
  overflow: scroll !important; /* Things will break if this is overridden */
  /* 30px is the magic margin used to hide the element's real scrollbars */
  /* See overflow: hidden in .CodeMirror */
  margin-bottom: -30px; margin-right: -30px;
  padding-bottom: 30px;
  height: 100%;
  outline: none; /* Prevent dragging from highlighting the element */
  position: relative;
}
.CodeMirror-sizer {
  position: relative;
  border-right: 30px solid transparent;
}

/* The fake, visible scrollbars. Used to force redraw during scrolling
   before actual scrolling happens, thus preventing shaking and
   flickering artifacts. */
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  position: absolute;
  z-index: 6;
  display: none;
}
.CodeMirror-vscrollbar {
  right: 0; top: 0;
  overflow-x: hidden;
  overflow-y: scroll;
}
.CodeMirror-hscrollbar {
  bottom: 0; left: 0;
  overflow-y: hidden;
  overflow-x: scroll;
}
.CodeMirror-scrollbar-filler {
  right: 0; bottom: 0;
}
.CodeMirror-gutter-filler {
  left: 0; bottom: 0;
}

.CodeMirror-gutters {
  position: absolute; left: 0; top: 0;
  min-height: 100%;
  z-index: 3;
}
.CodeMirror-gutter {
  white-space: normal;
  height: 100%;
  display: inline-block;
  vertical-align: top;
  margin-bottom: -30px;
}
.CodeMirror-gutter-wrapper {
  position: absolute;
  z-index: 4;
  background: none !important;
  border: none !important;
}
.CodeMirror-gutter-background {
  position: absolute;
  top: 0; bottom: 0;
  z-index: 4;
}
.CodeMirror-gutter-elt {
  position: absolute;
  cursor: default;
  z-index: 4;
}
.CodeMirror-gutter-wrapper ::selection { background-color: transparent }
.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }

.CodeMirror-lines {
  cursor: text;
  min-height: 1px; /* prevents collapsing before first draw */
}
.CodeMirror pre.CodeMirror-line,
.CodeMirror pre.CodeMirror-line-like {
  /* Reset some styles that the rest of the page might have set */
  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;
  border-width: 0;
  background: transparent;
  font-family: inherit;
  font-size: inherit;
  margin: 0;
  white-space: pre;
  word-wrap: normal;
  line-height: inherit;
  color: inherit;
  z-index: 2;
  position: relative;
  overflow: visible;
  -webkit-tap-highlight-color: transparent;
  -webkit-font-variant-ligatures: contextual;
  font-variant-ligatures: contextual;
}
.CodeMirror-wrap pre.CodeMirror-line,
.CodeMirror-wrap pre.CodeMirror-line-like {
  word-wrap: break-word;
  white-space: pre-wrap;
  word-break: normal;
}

.CodeMirror-linebackground {
  position: absolute;
  left: 0; right: 0; top: 0; bottom: 0;
  z-index: 0;
}

.CodeMirror-linewidget {
  position: relative;
  z-index: 2;
  padding: 0.1px; /* Force widget margins to stay inside of the container */
}

.CodeMirror-widget {}

.CodeMirror-rtl pre { direction: rtl; }

.CodeMirror-code {
  outline: none;
}

/* Force content-box sizing for the elements where we expect it */
.CodeMirror-scroll,
.CodeMirror-sizer,
.CodeMirror-gutter,
.CodeMirror-gutters,
.CodeMirror-linenumber {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

.CodeMirror-measure {
  position: absolute;
  width: 100%;
  height: 0;
  overflow: hidden;
  visibility: hidden;
}

.CodeMirror-cursor {
  position: absolute;
  pointer-events: none;
}
.CodeMirror-measure pre { position: static; }

div.CodeMirror-cursors {
  visibility: hidden;
  position: relative;
  z-index: 3;
}
div.CodeMirror-dragcursors {
  visibility: visible;
}

.CodeMirror-focused div.CodeMirror-cursors {
  visibility: visible;
}

.CodeMirror-selected { background: #d9d9d9; }
.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }
.CodeMirror-crosshair { cursor: crosshair; }
.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }
.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }

.cm-searching {
  background-color: #ffa;
  background-color: rgba(255, 255, 0, .4);
}

/* Used to force a border model for a node */
.cm-force-border { padding-right: .1px; }

@media print {
  /* Hide the cursor when printing */
  .CodeMirror div.CodeMirror-cursors {
    visibility: hidden;
  }
}

/* See issue #2901 */
.cm-tab-wrap-hack:after { content: ''; }

/* Help users use markselection to safely style text background */
span.CodeMirror-selectedtext { background: none; }


.CodeMirror { /* Override font */
  font-family: "Source Code Pro", "SFMono-Regular", Consolas, Menlo, "Roboto Mono", "Liberation Mono", monospace, Courier;
  height: inherit;
  max-height: inherit;
}

.cm-s-processing span.cm-meta { color: #FF1717; }
.cm-s-processing span.cm-blockkeyword { color: #669900; }
.cm-s-processing span.cm-keyword { color: #33997E; }
.cm-s-processing span.cm-atom { color: #D94A7A; }
.cm-s-processing span.cm-number { color: #164; }
.cm-s-processing span.cm-def { color: #718a62; }
.cm-s-processing span.cm-defbuiltin { font-weight: bold; color: #006699; }
.cm-s-processing span.cm-variable { color: black; }
.cm-s-processing span.cm-variable-2 { color: #00f; }
.cm-s-processing span.cm-variable-3 { color: #6a3e3e; }
.cm-s-processing span.cm-property { color: black; }
.cm-s-processing span.cm-operator { color: black; }
.cm-s-processing span.cm-comment { color: #666666; }
.cm-s-processing span.cm-string { color: #7D4793; }
.cm-s-processing span.cm-string-2 { color: #f50; }
.cm-s-processing span.cm-qualifier { color: #555; }
.cm-s-processing span.cm-builtin { color: #006699; }
.cm-s-processing span.cm-bracket { color: #cc7; }
.cm-s-processing span.cm-type { color: #E2661A; }
.cm-s-processing span.cm-tag { color: #170; }
.cm-s-processing span.cm-attribute { color: #00c; }
.cm-s-processing span.cm-link { color: #219; }
.cm-s-processing span.cm-error { color: #a00; }

.cm-s-processing .CodeMirror-activeline-background { background: #e8f2ff; }
.cm-s-processing .CodeMirror-matchingbracket { outline:1px solid grey; color:black !important; }

/* The lint marker gutter */
.CodeMirror-lint-markers {
  width: 16px;
}

.CodeMirror-lint-tooltip {
  background-color: #ffd;
  border: 1px solid black;
  border-radius: 4px 4px 4px 4px;
  color: black;
  font-family: monospace;
  font-size: 10pt;
  overflow: hidden;
  padding: 2px 5px;
  position: fixed;
  white-space: pre;
  white-space: pre-wrap;
  z-index: 100;
  max-width: 600px;
  opacity: 0;
  transition: opacity .4s;
  -moz-transition: opacity .4s;
  -webkit-transition: opacity .4s;
  -o-transition: opacity .4s;
  -ms-transition: opacity .4s;
}

.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning {
  background-position: left bottom;
  background-repeat: repeat-x;
}

.CodeMirror-lint-mark-error {
  background-image:
  url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==")
  ;
}

.CodeMirror-lint-mark-warning {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=");
}

.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning {
  background-position: center center;
  background-repeat: no-repeat;
  cursor: pointer;
  display: inline-block;
  height: 16px;
  width: 16px;
  vertical-align: middle;
  position: relative;
}

.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning {
  padding-left: 18px;
  background-position: top left;
  background-repeat: no-repeat;
}

.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=");
}

.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=");
}

.CodeMirror-lint-marker-multiple {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC");
  background-repeat: no-repeat;
  background-position: right bottom;
  width: 100%; height: 100%;
}

html, body {
	height: 100%;
	margin: 0;
}

.surround {
	display: flex;
	flex-direction: column;
	height: 100%;
}

.surround .row {
	border: 1px;
}
	
.surround .row.buttons {
	flex: 0 1 auto;
}

.surround .row.middle {
	flex: 1 1 auto;
	overflow: auto;
}

.surround .row.console {
	flex: 0 1 12pt; /* 3 rows */
}

textarea {
	resize: none;
        outline: none;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
}

#canvas {
	display: none;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        outline: none;
        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
		caret-color: transparent;
		cursor: default;
}
.gutter {
    background-color: #eee;

    background-repeat: no-repeat;
    background-position: 50%;
}
.gutter.gutter-vertical {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=');
	cursor: row-resize;
}

.split {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

#saveform, #openform {
	display: inline-block;
}

#savebutton, #openbutton {
	display: inline-block;
}

/* Common stuff */
.picker-wrapper, 
.slide-wrapper {
    position: relative;
    float: left;
}
.picker-indicator,
.slide-indicator {
    position: absolute;
    left: 0;
    top: 0;
    pointer-events: none;
}
.picker,
.slide {
    cursor: crosshair;
    float: left;
}

/* Default skin */

.cp-small .picker-indicator {
    width: 1px;
    height: 1px;
    border: 1px solid black;
    background-color: white;
}
.cp-small .slide-indicator {
    width: 100%;
    height: 2px;
    left: 0px;
    background-color: black;
}

.cp-default {
    padding: 5px;
	height: 100%;
    background-color: white;
    float: left;
}
.cp-default .picker {
    width: 180px;
    height: 180px;
}
.cp-default .slide {
    width: 30px;
    height: 180px;
}
.cp-default .slide-wrapper {
    margin-left: 5px;
}
.cp-default .picker-indicator {
    width: 5px;
    height: 5px;
    border: 2px solid darkblue;
    border-radius: 4px;
    opacity: .5;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=50);
    filter: alpha(opacity=50);
    background-color: white;
}
.cp-default .slide-indicator {
    width: 100%;
    height: 4px;
    left: 0px;
    background-color: black;
}

#color-picker {
    position: sticky;
	top: 0;
	display: none;
}

.monofont {
	font-family: "Source Code Pro", "SFMono-Regular", Consolas, Menlo, "Roboto Mono", "Liberation Mono", monospace, Courier;
}

#runbutton {
	min-width: 10ch;
}

</style>
<script>
// Check for unavailable local storage
try {
	if (!localStorage) throw true;
} catch (e) {
	Object.defineProperty(window, 'localStorage', {value: {
		s: Object.create(null),	getItem: function(k){return this.s[k];}, setItem: function(k,v){this.s[k] = v;}
	}});
}
// IE11 polyfills courtesy MDN (public domain)
if (!Math.imul) Math.imul = function(opA, opB) {
  opB |= 0;
  var result = (opA & 0x003fffff) * opB;
  if (opA & 0xffc00000) result += (opA & 0xffc00000) * opB |0;
  return result |0;
};
if (typeof Object.assign !== 'function') {
  // Must be writable: true, enumerable: false, configurable: true
  Object.defineProperty(Object, "assign", {
    value: function assign(target, varArgs) { // .length of function is 2
      'use strict';
      if (target === null || target === undefined) {
        throw new TypeError('Cannot convert undefined or null to object');
      }

      var to = Object(target);

      for (var index = 1; index < arguments.length; index++) {
        var nextSource = arguments[index];

        if (nextSource !== null && nextSource !== undefined) { 
          for (var nextKey in nextSource) {
            // Avoid bugs when hasOwnProperty is shadowed
            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
              to[nextKey] = nextSource[nextKey];
            }
          }
        }
      }
      return to;
    },
    writable: true,
    configurable: true
  });
}
if (!String.prototype.startsWith) {
	String.prototype.startsWith = function(search, rawPos) {
		var pos = rawPos > 0 ? rawPos|0 : 0;
		return this.substring(pos, pos + search.length) === search;
    };
}
if (!String.prototype.endsWith) {
	String.prototype.endsWith = function(search, this_len) {
		if (this_len === undefined || this_len > this.length) {
			this_len = this.length;
		}
		return this.substring(this_len - search.length, this_len) === search;
	};
}
</script>
<script>
/*! Split.js - v1.5.11 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Split=t()}(this,function(){"use strict";var L=window,T=L.document,N="addEventListener",R="removeEventListener",q="getBoundingClientRect",H="horizontal",I=function(){return!1},W=L.attachEvent&&!L[N],i=["","-webkit-","-moz-","-o-"].filter(function(e){var t=T.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",s=function(e){return"string"==typeof e||e instanceof String},X=function(e){if(s(e)){var t=T.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},Y=function(e,t,n){var r=e[t];return void 0!==r?r:n},G=function(e,t,n,r){if(t){if("end"===r)return 0;if("center"===r)return e/2}else if(n){if("start"===r)return 0;if("center"===r)return e/2}return e},J=function(e,t){var n=T.createElement("div");return n.className="gutter gutter-"+t,n},K=function(e,t,n){var r={};return s(t)?r[e]=t:r[e]=W?t+"%":i+"("+t+"% - "+n+"px)",r},P=function(e,t){var n;return(n={})[e]=t+"px",n};return function(e,i){void 0===i&&(i={});var u,t,s,o,r,a,l=e;Array.from&&(l=Array.from(l));var c=X(l[0]).parentNode,n=getComputedStyle?getComputedStyle(c):null,f=n?n.flexDirection:null,m=Y(i,"sizes")||l.map(function(){return 100/l.length}),h=Y(i,"minSize",100),d=Array.isArray(h)?h:l.map(function(){return h}),g=Y(i,"expandToMin",!1),v=Y(i,"gutterSize",10),p=Y(i,"gutterAlign","center"),y=Y(i,"snapOffset",30),z=Y(i,"dragInterval",1),S=Y(i,"direction",H),b=Y(i,"cursor",S===H?"col-resize":"row-resize"),_=Y(i,"gutter",J),E=Y(i,"elementStyle",K),w=Y(i,"gutterStyle",P);function k(t,e,n,r){var i=E(u,e,n,r);Object.keys(i).forEach(function(e){t.style[e]=i[e]})}function x(){return a.map(function(e){return e.size})}function M(e){return"touches"in e?e.touches[0][t]:e[t]}function U(e){var t=a[this.a],n=a[this.b],r=t.size+n.size;t.size=e/this.size*r,n.size=r-e/this.size*r,k(t.element,t.size,this._b,t.i),k(n.element,n.size,this._c,n.i)}function O(){var e=a[this.a].element,t=a[this.b].element,n=e[q](),r=t[q]();this.size=n[u]+r[u]+this._b+this._c,this.start=n[s],this.end=n[o]}function C(s){var o=function(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var n=e[r];return 0===n?null:n-=S===H?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)}(c);if(null===o)return s;if(d.reduce(function(e,t){return e+t},0)>o)return s;var a=0,u=[],e=s.map(function(e,t){var n=o*e/100,r=G(v,0===t,t===s.length-1,p),i=d[t]+r;return n<i?(a+=i-n,u.push(0),i):(u.push(n-i),n)});return 0===a?s:e.map(function(e,t){var n=e;if(0<a&&0<u[t]-a){var r=Math.min(a,u[t]-a);a-=r,n=e-r}return n/o*100})}function D(e){if(!("button"in e&&0!==e.button)){var t=this,n=a[t.a].element,r=a[t.b].element;t.dragging||Y(i,"onDragStart",I)(x()),e.preventDefault(),t.dragging=!0,t.move=function(e){var t,n=a[this.a],r=a[this.b];this.dragging&&(t=M(e)-this.start+(this._b-this.dragOffset),1<z&&(t=Math.round(t/z)*z),t<=n.minSize+y+this._b?t=n.minSize+this._b:t>=this.size-(r.minSize+y+this._c)&&(t=this.size-(r.minSize+this._c)),U.call(this,t),Y(i,"onDrag",I)())}.bind(t),t.stop=function(){var e=this,t=a[e.a].element,n=a[e.b].element;e.dragging&&Y(i,"onDragEnd",I)(x()),e.dragging=!1,L[R]("mouseup",e.stop),L[R]("touchend",e.stop),L[R]("touchcancel",e.stop),L[R]("mousemove",e.move),L[R]("touchmove",e.move),e.stop=null,e.move=null,t[R]("selectstart",I),t[R]("dragstart",I),n[R]("selectstart",I),n[R]("dragstart",I),t.style.userSelect="",t.style.webkitUserSelect="",t.style.MozUserSelect="",t.style.pointerEvents="",n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",e.gutter.style.cursor="",e.parent.style.cursor="",T.body.style.cursor=""}.bind(t),L[N]("mouseup",t.stop),L[N]("touchend",t.stop),L[N]("touchcancel",t.stop),L[N]("mousemove",t.move),L[N]("touchmove",t.move),n[N]("selectstart",I),n[N]("dragstart",I),r[N]("selectstart",I),r[N]("dragstart",I),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",t.gutter.style.cursor=b,t.parent.style.cursor=b,T.body.style.cursor=b,O.call(t),t.dragOffset=M(e)-t.end}}S===H?(u="width",t="clientX",s="left",o="right",r="clientWidth"):"vertical"===S&&(u="height",t="clientY",s="top",o="bottom",r="clientHeight"),m=C(m);var A=[];function j(e){var t=e.i===A.length,n=t?A[e.i-1]:A[e.i];O.call(n);var r=t?n.size-e.minSize-n._c:e.minSize+n._b;U.call(n,r)}function F(e){var s=C(e);s.forEach(function(e,t){if(0<t){var n=A[t-1],r=a[n.a],i=a[n.b];r.size=s[t-1],i.size=e,k(r.element,r.size,n._b,r.i),k(i.element,i.size,n._c,i.i)}})}function B(n,r){A.forEach(function(t){if(!0!==r?t.parent.removeChild(t.gutter):(t.gutter[R]("mousedown",t._a),t.gutter[R]("touchstart",t._a)),!0!==n){var e=E(u,t.a.size,t._b);Object.keys(e).forEach(function(e){a[t.a].element.style[e]="",a[t.b].element.style[e]=""})}})}return(a=l.map(function(e,t){var n,r,i,s={element:X(e),size:m[t],minSize:d[t],i:t};if(0<t&&((n={a:t-1,b:t,dragging:!1,direction:S,parent:c})._b=G(v,t-1==0,!1,p),n._c=G(v,!1,t===l.length-1,p),"row-reverse"===f||"column-reverse"===f)){var o=n.a;n.a=n.b,n.b=o}if(!W&&0<t){var a=_(t,S,s.element);r=a,i=w(u,v,t),Object.keys(i).forEach(function(e){r.style[e]=i[e]}),n._a=D.bind(n),a[N]("mousedown",n._a),a[N]("touchstart",n._a),c.insertBefore(a,s.element),n.gutter=a}return k(s.element,s.size,G(v,0===t,t===l.length-1,p),t),0<t&&A.push(n),s})).forEach(function(e){var t=e.element[q]()[u];t<e.minSize&&(g?j(e):e.minSize=t)}),W?{setSizes:F,destroy:B}:{setSizes:F,getSizes:x,collapse:function(e){j(a[e])},destroy:B,parent:c,pairs:A}}});
</script>
<script>
/*! FlexiColorPicker 2017-03-19 */
(function(s,t,u){var v=(s.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML"),picker,slide,hueOffset=0,svgNS='http://www.w3.org/2000/svg';var w=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>','</div>','<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>','</div>'].join('');function mousePosition(a){if(s.event&&s.event.contentOverflow!==u){return{x:s.event.offsetX,y:s.event.offsetY}}if(a.offsetX!==u&&a.offsetY!==u){return{x:a.offsetX,y:a.offsetY}}var b=a.target.parentNode.parentNode;return{x:a.layerX-b.offsetLeft,y:a.layerY-b.offsetTop}}function $(a,b,c){a=t.createElementNS(svgNS,a);for(var d in b)a.setAttribute(d,b[d]);if(Object.prototype.toString.call(c)!='[object Array]')c=[c];var i=0,len=(c[0]&&c.length)||0;for(;i<len;i++)a.appendChild(c[i]);return a}if(v=='SVG'){slide=$('svg',{xmlns:'http://www.w3.org/2000/svg',version:'1.1',width:'100%',height:'100%'},[$('defs',{},$('linearGradient',{id:'gradient-hsv',x1:'0%',y1:'100%',x2:'0%',y2:'0%'},[$('stop',{offset:'0%','stop-color':'#FF0000','stop-opacity':'1'}),$('stop',{offset:'13%','stop-color':'#FF00FF','stop-opacity':'1'}),$('stop',{offset:'25%','stop-color':'#8000FF','stop-opacity':'1'}),$('stop',{offset:'38%','stop-color':'#0040FF','stop-opacity':'1'}),$('stop',{offset:'50%','stop-color':'#00FFFF','stop-opacity':'1'}),$('stop',{offset:'63%','stop-color':'#00FF40','stop-opacity':'1'}),$('stop',{offset:'75%','stop-color':'#0BED00','stop-opacity':'1'}),$('stop',{offset:'88%','stop-color':'#FFFF00','stop-opacity':'1'}),$('stop',{offset:'100%','stop-color':'#FF0000','stop-opacity':'1'})])),$('rect',{x:'0',y:'0',width:'100%',height:'100%',fill:'url(#gradient-hsv)'})]);picker=$('svg',{xmlns:'http://www.w3.org/2000/svg',version:'1.1',width:'100%',height:'100%'},[$('defs',{},[$('linearGradient',{id:'gradient-black',x1:'0%',y1:'100%',x2:'0%',y2:'0%'},[$('stop',{offset:'0%','stop-color':'#000000','stop-opacity':'1'}),$('stop',{offset:'100%','stop-color':'#CC9A81','stop-opacity':'0'})]),$('linearGradient',{id:'gradient-white',x1:'0%',y1:'100%',x2:'100%',y2:'100%'},[$('stop',{offset:'0%','stop-color':'#FFFFFF','stop-opacity':'1'}),$('stop',{offset:'100%','stop-color':'#CC9A81','stop-opacity':'0'})])]),$('rect',{x:'0',y:'0',width:'100%',height:'100%',fill:'url(#gradient-white)'}),$('rect',{x:'0',y:'0',width:'100%',height:'100%',fill:'url(#gradient-black)'})])}else if(v=='VML'){slide=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>','</v:rect>','</DIV>'].join('');picker=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>','</v:rect>','<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>','</v:rect>','</DIV>'].join('');if(!t.namespaces['v'])t.namespaces.add('v','urn:schemas-microsoft-com:vml','#default#VML')}function hsv2rgb(a){var R,G,B,X,C;var h=(a.h%360)/60;C=a.v*a.s;X=C*(1-Math.abs(h%2-1));R=G=B=a.v-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];var r=Math.floor(R*255);var g=Math.floor(G*255);var b=Math.floor(B*255);return{r:r,g:g,b:b,hex:"#"+(16777216|b|(g<<8)|(r<<16)).toString(16).slice(1)}}function rgb2hsv(a){var r=a.r;var g=a.g;var b=a.b;if(a.r>1||a.g>1||a.b>1){r/=255;g/=255;b/=255}var H,S,V,C;V=Math.max(r,g,b);C=V-Math.min(r,g,b);H=(C==0?null:V==r?(g-b)/C+(g<b?6:0):V==g?(b-r)/C+2:(r-g)/C+4);H=(H%6)*60;S=C==0?0:C/V;return{h:H,s:S,v:V}}function slideListener(d,e,f){return function(a){a=a||s.event;var b=mousePosition(a);d.h=b.y/e.offsetHeight*360+hueOffset;d.s=d.v=1;var c=hsv2rgb({h:d.h,s:1,v:1});f.style.backgroundColor=c.hex;d.callback&&d.callback(c.hex,{h:d.h-hueOffset,s:d.s,v:d.v},{r:c.r,g:c.g,b:c.b},u,b)}};function pickerListener(d,e){return function(a){a=a||s.event;var b=mousePosition(a),width=e.offsetWidth,height=e.offsetHeight;d.s=b.x/width;d.v=(height-b.y)/height;var c=hsv2rgb(d);d.callback&&d.callback(c.hex,{h:d.h-hueOffset,s:d.s,v:d.v},{r:c.r,g:c.g,b:c.b},b)}};var x=0;function ColorPicker(f,g,h){if(!(this instanceof ColorPicker))return new ColorPicker(f,g,h);this.h=0;this.s=1;this.v=1;if(!h){var i=f;i.innerHTML=w;this.slideElement=i.getElementsByClassName('slide')[0];this.pickerElement=i.getElementsByClassName('picker')[0];var j=i.getElementsByClassName('slide-indicator')[0];var k=i.getElementsByClassName('picker-indicator')[0];ColorPicker.fixIndicators(j,k);this.callback=function(a,b,c,d,e){ColorPicker.positionIndicators(j,k,e,d);g(a,b,c)}}else{this.callback=h;this.pickerElement=g;this.slideElement=f}if(v=='SVG'){var l=slide.cloneNode(true);var m=picker.cloneNode(true);var n=l.getElementsByTagName('linearGradient')[0];var o=l.getElementsByTagName('rect')[0];n.id='gradient-hsv-'+x;o.setAttribute('fill','url(#'+n.id+')');var p=[m.getElementsByTagName('linearGradient')[0],m.getElementsByTagName('linearGradient')[1]];var q=m.getElementsByTagName('rect');p[0].id='gradient-black-'+x;p[1].id='gradient-white-'+x;q[0].setAttribute('fill','url(#'+p[1].id+')');q[1].setAttribute('fill','url(#'+p[0].id+')');this.slideElement.appendChild(l);this.pickerElement.appendChild(m);x++}else{this.slideElement.innerHTML=slide;this.pickerElement.innerHTML=picker}addEventListener(this.slideElement,'click',slideListener(this,this.slideElement,this.pickerElement));addEventListener(this.pickerElement,'click',pickerListener(this,this.pickerElement));enableDragging(this,this.slideElement,slideListener(this,this.slideElement,this.pickerElement));enableDragging(this,this.pickerElement,pickerListener(this,this.pickerElement))};function addEventListener(a,b,c){if(a.attachEvent){a.attachEvent('on'+b,c)}else if(a.addEventListener){a.addEventListener(b,c,false)}}function enableDragging(b,c,d){var e=false;addEventListener(c,'mousedown',function(a){e=true});addEventListener(c,'mouseup',function(a){e=false});addEventListener(c,'mouseout',function(a){e=false});addEventListener(c,'mousemove',function(a){if(e){d(a)}})}ColorPicker.hsv2rgb=function(a){var b=hsv2rgb(a);delete b.hex;return b};ColorPicker.hsv2hex=function(a){return hsv2rgb(a).hex};ColorPicker.rgb2hsv=rgb2hsv;ColorPicker.rgb2hex=function(a){return hsv2rgb(rgb2hsv(a)).hex};ColorPicker.hex2hsv=function(a){return rgb2hsv(ColorPicker.hex2rgb(a))};ColorPicker.hex2rgb=function(a){return{r:parseInt(a.substr(1,2),16),g:parseInt(a.substr(3,2),16),b:parseInt(a.substr(5,2),16)}};function setColor(a,b,d,e){a.h=b.h%360;a.s=b.s;a.v=b.v;var c=hsv2rgb(a);var f={y:(a.h*a.slideElement.offsetHeight)/360,x:0};var g=a.pickerElement.offsetHeight;var h={x:a.s*a.pickerElement.offsetWidth,y:g-a.v*g};a.pickerElement.style.backgroundColor=hsv2rgb({h:a.h,s:1,v:1}).hex;a.callback&&a.callback(e||c.hex,{h:a.h,s:a.s,v:a.v},d||{r:c.r,g:c.g,b:c.b},h,f);return a};ColorPicker.prototype.setHsv=function(a){return setColor(this,a)};ColorPicker.prototype.setRgb=function(a){return setColor(this,rgb2hsv(a),a)};ColorPicker.prototype.setHex=function(a){return setColor(this,ColorPicker.hex2hsv(a),u,a)};ColorPicker.positionIndicators=function(a,b,c,d){if(c){b.style.left='auto';b.style.right='0px';b.style.top='0px';a.style.top=(c.y-a.offsetHeight/2)+'px'}if(d){b.style.top=(d.y-b.offsetHeight/2)+'px';b.style.left=(d.x-b.offsetWidth/2)+'px'}};ColorPicker.fixIndicators=function(a,b){b.style.pointerEvents='none';a.style.pointerEvents='none'};s.ColorPicker=ColorPicker})(window,window.document);
</script>
<script> /*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",d=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);
</script>
<script>
"use strict";
	var $$printlns = 0;
	var $$prints = 0;
	var $$lc = 0, $$mx = 1E8;
	var $$doprint = true;
	var $$forceprint = function(b) {
		document.getElementById("textconsole").value+=b;
		$$prints+=b.length;
		document.getElementById("textconsole").scrollTop = document.getElementById("textconsole").scrollHeight;
	}	
	var $$print = function(b){
		if((200<=$$printlns||200<=$$prints)&&$$doprint){
			document.getElementById("textconsole").value+="\nYour program prints too much output! No more printed output will be shown.";
			document.getElementById("textconsole").scrollTop = document.getElementById("textconsole").scrollHeight;
			$$doprint=false;
		} else if ($$doprint) {
			$$forceprint(b);
		}
	};
	var $$println=function(b){$$print(b+"\n");$$prints=0;$$printlns++;};

	var $$key = (window.name?"processo-"+window.name:0)||document.referrer||document.location.href;
	var $$d = "ArithmeticException: / by zero";
	var $$n = "NullPointerException";
	var $$a = "ArrayIndexOutOfBoundsException: ";
	var $$prog = null;
	function $$na(t, n) { if (arguments.length == 2) {switch(t) {case "int": case "color": return new Int32Array(n); case "char": return new Uint16Array(n); case "boolean": return new Uint8Array(n); case "double": return new Float64Array(n); default: return new Array(n);}} var a = new Array(n), args = Array.prototype.slice.call(arguments, 1); args[0] = t; for (var i = 0; i < n; i++) a[i] = $$na.apply(null, args); return a;}
    function $$db(x) { if (x == 0 && 1/x === -Infinity) return ("-0.0"); var st = x.toString(); if (st.match(/^-?[0-9]*$/) != null) st += ".0"; return st;  }
	function $$rd(f) { return function(a, b, i) {return i==0?f(b):a + "," + f(b);}} 
	function $$ba(x) { return x.toString().replace(/0/g, "false").replace(/1/g, "true") }
	function $$printd(x) {$$print($$db(x));}
	function $$printlnd(x) {$$println($$db(x));}
    function $$dz(x,y) { if (y == 0) throw new Error($$d); return ~~(x/y); }
    function $$rz(x,y) { if (y == 0) throw new Error($$d); return ~~(x%y); }
    function $$av(a,x) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); return a[x]; }
    function $$ae(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] = v; }
    function $$aa(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] += v; }
    function $$as(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] -= v; }
    function $$am(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] *= v; }
    function $$ad(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] /= v; }
    function $$ar(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] %= v; }
    function $$aia(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] = ~~(a[x] + v); }
    function $$ais(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] = ~~(a[x] - v); }
    function $$aim(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); a[x] = ~~(a[x] * v); }
    function $$aid(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); if (v == 0) throw new Error($$d); a[x] = ~~(a[x]/v); }
    function $$air(a,x,v) { if(a==null)throw new Error($$n);if(x<0||x>=a.length)throw new Error($$a+x); if (v == 0) throw new Error($$d); a[x] = ~~(a[x]%v); }
    function $$charat(a,x) { if (a == null) throw new Error($$n); if (x >= 0 && a.length > x) return a.charCodeAt(x); else throw new Error('IndexOutOfBoundsException: '+x);}
    function $$substring(a,x,y) { if (a == null) throw new Error($$n); if (x >= 0 && a.length >= y && y >= x) return a.substring(x,y); else throw new Error('IndexOutOfBoundsException: '+x+', '+y);}
    function $$substr(a,x) { if (a == null) throw new Error($$n); if (x >= 0 && a.length >= x) return a.substring(x); else throw new Error('IndexOutOfBoundsException: '+x);}
	function $$length(x) { return x.length; }
	function $$equals(x,y) { return x === y; }
	function $$rgbs(c) { return "rgb("+(c>>16)+","+((c>>8)&255)+","+(c&255)+")"; }
	function $$rand(a,b) { if(a >= b) throw new Error('random() second argument must be greater than first'); return Math.random()*(b-a)+a;}
    function $$isD(word) { var x = parseFloat(word); return !isNaN(x) && (/^\s*[-+]?[0-9]*\.?[0-9]*([eE][0-9]+)?\s*$/.test(word));}
	function $$toD(word) { if (!$$isD(word)) throw new Error('Not a double: '+word); return parseFloat(word);}
    function $$isI(word) { var x = parseInt(word); return !isNaN(x) && (/^\s*[-+]?[0-9]+\s*$/.test(word)) && ~~x === x;}
	function $$toI(word) { if (!$$isI(word)) throw new Error('Not a 32 bit integer: '+word); return parseInt(word);}
	function $$getStack(s,x) {var i = s.indexOf(x); return (i > 0)?parseInt(s.substring(i+x.length,s.indexOf(":", i+x.length)))-2:0;}
	
	var $$current = null;
	var $$errormsg = null;
	function $$runprog() {
		if ($$prog != null) {
			$$stopprog();
			document.getElementsByClassName("CodeMirror")[0].style.display = "none";
			document.getElementById("canvas").style.display = "block";
			document.getElementById("textconsole").value = "";
			$$printlns = 0; $$prints = 0;
			document.getElementById('color-picker').style.display = "none";
			var prt = prtf();
			$$lc = 0; $$mx = 1E8;
			$$doprint = true;
			var l=/(:\d+:\d+.?\n)[^\n]*(:(\d)+:\d+.?\n)[^\n]*(:\d+:\d+.?\n)[^\n]*/; // l.exec(b.stack)[3]
			var sketch = new Function("$prt", $$prog); 
			document.getElementById("runbutton").disabled=true;
			document.getElementById("stopbutton").disabled=false;
			document.getElementById("pickbutton").disabled=true;
			document.getElementById("indentbutton").disabled=true;
			try {
				$$current = new prt(document.getElementById("canvas"), sketch);
				if ($$lc >= $$mx) {
					$$forceprint("\nYour setup code was stopped for looping too much!");
					$$stopprog();
				}
			} catch(b) {
				//$$println(b.stack);
				if (b.message && b.stack) {
					var line = $$getStack(b.stack, "<anonymous>:") || $$getStack(b.stack, "Function:") || "unknown";
					$$println("ERROR in startup code: "+b.message+" at line "+line);
				}
				//throw b;
			}
		} else if ($$errormsg) {
			alert($$errormsg);
		} else alert("Please fix the errors in your program before running!");
	}
	function $$stopprog() {
		if ($$current) {
			$$current.exit();
			$$current = null;
		}
		document.getElementById("canvas").style.display = "none";
		document.getElementsByClassName("CodeMirror")[0].style.display = "block";
		document.getElementById("stopbutton").disabled=true;
		document.getElementById("runbutton").disabled=false;
		document.getElementById("pickbutton").disabled=false;
		document.getElementById("indentbutton").disabled=false;
		document.getElementById("textconsole").scrollTop = document.getElementById("textconsole").scrollHeight;
	}
	function $$pickcolor() {
		var p = document.getElementById('color-picker');
		if (!p.style.display || p.style.display == "none") {
			p.style.display = "block";
		} else {
			p.style.display = "none";
		}
	}
	function $$indent() {
		var cm = document.getElementsByClassName("CodeMirror")[0].CodeMirror;
		var cc = cm.doc.getCursor();
		cm.setSelection({'line':cm.firstLine(), 'ch':0, 'sticky':null},
		{'line':cm.lastLine(), 'ch':0, 'sticky':null},
		{scroll: false});
		cm.indentSelection("smart");
		cm.doc.setCursor(cc);
	}
</script>
<script>
var parseprocesso=function(){function f(d,l,n){this.name="ParseError";this.message=d;this.location=1==arguments.length?J(k,k+1):2==arguments.length?J(l,l+1):J(l,n)}function J(d,l){for(var G=1,k=1,f={start:{line:0,column:0},end:{line:0,column:0}},h=0;h<=l;h++)h==d&&(f.start.line=G,f.start.column=k),h==l&&(f.end.line=G,f.end.column=k),10==n.charCodeAt(h)&&(G++,k=0),k++;return f}function E(d,l){if(!n.startsWith(d,k))throw new f("Expected "+(l?l:"'"+d+"'")+" here",k,K());k+=d.length;return d}function z(){var d=
k,l=n.charCodeAt(d);if((65>l||90<l)&&(97>l||122<l))return"";for(;d<n.length&&(l=n.charCodeAt(d),64<l&&91>l||96<l&&123>l||47<l&&58>l||95==l);d++);return n.substring(k,d)}function D(d,l){var G=z();if(G in d)return k+=G.length,G;throw new f("Expected "+l+" here: one of "+Object.getOwnPropertyNames(d).toString(),k,K());}function P(){var d="",l=k;for(v(!0);91==n.charCodeAt(k);){d+="[]";k++;v(!0);if(93!=n.charCodeAt(k))throw new f("Missing end bracket in array declaration");k++;l=k}k=l;return d}function K(){for(var d=
k;d<n.length;){var l=n.charCodeAt(d);if(32!=l&&9!=l&&10!=l&&13!=l)d++;else break}return d+1}function v(d){for(var G=k,h=!1;G<n.length;){var p=n.charCodeAt(G);if(47==p)if(h){h=!1;if(d)throw new f("Line comment not allowed here");for(;G<n.length&&10!=p;)G++,p=n.charCodeAt(G)}else h=!0;else if(h&&42==p){h=!1;do if(G++,p=n.charCodeAt(G),10==p&&d)throw new f("New line not allowed here");while(G<n.length&&(42!=p||47!=n.charCodeAt(G+1)));G++;if(G>=n.length)throw new f("Comment must end with */",k,n.length-
1);}else if(32!=p&&9!=p&&10!=p&&13!=p||h)break;if(10==p&&d)throw new f("New line not allowed here");G++}h&&G--;d=n.substring(k,G);k=G;return d}function y(d){d=v(d);if(0==d.length)throw new f("Whitespace is required here");return d}function q(d){return 32==d||9==d||10==d||13==d||41==d}function Z(d){if(d in p||d in ea)return!0;for(var G=S.length-1;0<=G;G--)if(d in S[G])return!0;return!1}function w(d){var G=k,n=h();if(d&&n in T)throw new f(n+" not allowed here - did you mean to refer to an existing variable, or start a new statement to declare a variable?",
G,k);if(n in H||n in ra)throw new f(n+" not allowed as identifier",G,k);return n}function d(d,k){return k==d||"any"==d||"null"==k&&(d in ha||d.lastIndexOf("[]")==d.length-2)||"int"==k&&"double"==d||"any[]"==d&&k.lastIndexOf("[]")==k.length-2}function h(){var d=k,l=n.charCodeAt(d);if(isNaN(l)||(65>l||90<l)&&(97>l||122<l))throw new f("Name must begin with a letter");for(;d<n.length&&(l=n.charCodeAt(d),64<l&&91>l||96<l&&123>l||47<l&&58>l||95==l);d++);l=n.substring(k,d);k=d;return l}function F(){var G=
k,l=k,h=w(!0),F=h,t=v(),x=[],y=[],q=null;a:if(h in p)var A=p[h];else{for(A=S.length-1;0<=A;A--)if(h in S[A]){A=S[A][h];break a}A=null}if(91==n.charCodeAt(k)){F=h+t;if(!A)throw new f(h+" is not declared",l,l+h.length);for(;91==n.charCodeAt(k);){k++;if(!A.endsWith("]"))throw new f(h+" is not an array type");F="$$av("+F+","+v()+N("int")+v()+")";E("]");A=A.substring(0,A.length-2)}}for(;46==n.charCodeAt(k);){if(!q)if(A){q=A.endsWith("[]")?ha["[]"]:ha[A];if(!q)throw new f(A+" is not a class type; . not allowed",
l,k);q=q["this"];if(!q)throw new f(A+" is not an object type; . not allowed",l,k);var T="n instance"}else{A=h;q=ha[h];if(!q)throw new f(h+" is neither a variable nor a class");T=" static"}k++;v(!0);h=w();if("this"==h||!(h in q))throw new f(h+" is not a"+T+" member of "+A+": did you mean "+Object.getOwnPropertyNames(q).toString().replace("this","").replace(",,",","),l,k);A=h;q=q[h];l=k;v(!0)}if(40==n.charCodeAt(k)){if(null==q&&!(h in ea))throw new f("No function named "+h+(U&&null==q?" (must be defined before this function)":
""),l,l+h.length);k++;G=[];y.push(v());A=q||ea[h];if("pending"==A)throw new f(h+" may not be called before the definition is complete",l,k);if(!Array.isArray(A))throw new f("no function named "+h);if(!Array.isArray(A[0])&&2==A[0].length)throw new f(h+" is not a function");for(;k<n.length&&41!=n.charCodeAt(k);){G.push(k);x.push(N(null));G.push(k);y.push(v());if(k==n.length)break;l=n.charCodeAt(k);if(41!=l&&44!=l)throw new f("Expected comma or end parenthesis in argument list for call to "+h);if(44==
l&&(l=k,k++,y.push(v()),41==n.charCodeAt(k)))throw new f("Extra comma in argument list",l);}if(k==n.length)throw new f("No end parenthesis for argument list for call to "+h);k++;var ja=h;h=null;l=!1;if(!Array.isArray(A))throw new f("Function not found");if(Array.isArray(A[0])){for(var na=!0,X=A[0][1].length,ka=A[0][1].length,Da=0,ra=null,C=null,z=0;z<A.length;z++)if(A[z][1].length>ka?ka=A[z][1].length:A[z][1].length<X&&(X=A[z][1].length),A[z][1].length==x.length){var H=0;for(na=!1;H<A[z][1].length;H++)if(!d(A[z][1][H],
x[H][1])){Da=H;ra=x[H][1];C=A[z][1][H];break}if(!(H<A[z][1].length)){ja=A[z][2];h=A[z][0];l=A[z][3];break}}if(null==h){if(na)throw new f("Expected "+(X==ka?X:X+"-"+ka)+" argument"+(1==ka?"":"s")+" but got "+x.length,k-1);throw new f("The "+va[Da]+" parameter should have type "+C+" but has type "+ra,G[2*H],G[2*H+1]);}}else{if(A[1].length!=x.length)throw new f("Expected "+A[1].length+" argument"+(1==A[1].length?"":"s")+" but got "+x.length,x.length>A[1].length?G[2*A[1].length]:k-1,x.length>A[1].length?
G[G.length-1]:k);for(H=0;H<A[1].length;H++)if(!d(A[1][H],x[H][1]))throw new f("The "+va[H]+" parameter should have type "+A[1][H]+" but has type "+x[H][1],G[2*H],G[2*H+1]);ja=A[2];h=A[0];l=A[3]}t=ja+t+"(";q&&"n instance"==T&&(t+=F+(0<x.length?", ":""));for(H=0;H<x.length;H++)l&&Ya(x[H])&&(x[H][0]+='+""'),t+=y[2*H]+x[H][0]+y[2*H+1]+(H<x.length-1?",":"");return[t+")",h]}if(q){if(!Array.isArray(q))throw new f("Expected . after "+h);if(!Array.isArray(q[0])&&2==q.length)return null==q[0]?[n.substring(G,
k),q[1]]:q;throw new f("Missing arguments for "+h);}if("void"==A)throw new f(h+" can't be used before you finish initializing it",l,l+h.length);if(!A)throw Z(h)&&E("("),new f(h+" is not declared/defined - is it misspelled or did you mean to declare/define it?",l,l+h.length);return[h in p?"$prt."+h:F,A]}function t(){var d=k;if(d==n.length)throw new f("Expected a value here"+(0<arguments.length?" of type "+w:"")+" but your program ends instead");var l=n.charCodeAt(d);if(45==l){if(n.length==d+1)throw new f("Negative sign with nothing after it");
if(n.length>d&&45==n.charCodeAt(d+1))throw new f("-- is not allowed here (to decrement, use after a variable in a separate statement)");k++;w=v();d=k;l=t();if("int"!=l[1]&&"double"!=l[1])throw new f("Cannot negate a value of type "+l[1],d,k);return["-"+w+l[0],l[1]]}if(33==l){if(n.length==d+1)throw new f("Not sign with nothing after it");k++;w=v();d=k;l=t();if("boolean"!=l[1])throw new f("! (Not) only applies to boolean but this value is "+l[1],d,k);return["!"+w+l[0],l[1]]}if(43==l)throw new f("Positive sign or preincrement not allowed, please remove");
if(47<l&&58>l||46==l){w=46==l;var p=!1;do if(l=n.charCodeAt(++k),46==l){if(w)throw new f("Numbers can only have one decimal point");w=!0}else p=!0;while(47<l&&58>l||46==l);if(!p)throw new f("Numbers should only contain digits");if(!w&&(10<k-d||2147483647<parseInt(n.substring(d,k),10)))throw new f("Number is too large to be an int; add a decimal point to make it a double",d,k);return[n.substring(d,k),w?"double":"int"]}if(40==l){k++;l="("+v();if(n.startsWith("int",k)&&q(n.charCodeAt(k+3))){k+=3;v();
if(41!=n.charCodeAt(k))throw new f("int must be used as a cast but ) missing");k++;v(!0);l=t();if("double"!=l[1])throw new f("Cast to int applied to incompatible type "+l[1]);return["~~("+l[0]+")","int"]}if(n.startsWith("double",k)&&q(n.charCodeAt(k+6))){k+=6;v();if(41!=n.charCodeAt(k))throw new f("double must be used as a cast but ) missing");k++;v(!0);l=t();if("int"!=l[1])throw new f("Cast to double applied to incompatible type "+l[1]);return[l[0],"double"]}p=ja(t(),0);w=v();if(")"==n.charAt(k))return k++,
[l+p[0]+w+")",p[1]];throw new f("Expected )",d,k);}if(34==l){for(k++;k<n.length&&34!=n.charCodeAt(k);){if(10==n.charCodeAt(k))throw new f("String must end before line ends");k++}if(k==n.length)throw new f("String should end before end of line",d,k);k++;return[n.substring(d,k),"String"]}if(39==l){k++;l=n.charCodeAt(k);if(10==l)throw new f("Character literal must end before line ends");if(55296<=l&&56319>=l)throw new f("Character must be a basic multilingual symbol (not Emoji)");k++;if(39!=n.charCodeAt(k))throw new f("Character literal must end with ' character after one symbol");
k++;return[n.substring(d+1,d+2).charCodeAt(0).toString(10),"char"]}if(64<l&&91>l||96<l&&123>l){if(116==l||102==l||110==l){l=z();if("true"==l||"false"==l)return[h(),"boolean"];if("null"==l)return[h(),"null"];if("new"==l){h();d=y();l=d+'$$na("';var w=h();if(!(w in T))throw new f("Unrecognized type "+w);l+=w+'"';p=v();l+=p;var H=!0;do{E("[");l+=",";var x=v();l+=x;if(H&&93==n.charCodeAt(k)){H=k;k++;x+=v();if(123==n.charCodeAt(k))return w+="[]",[d+p+x+Ta(w),w];k=H}H=!1;l+=N("int");E("]");w+="[]";l+=v()}while(91==
n.charCodeAt(k));return[l+")",w]}}return F()}if(126==l)throw new f("Bitwise negation not supported");throw new f("Unrecognized character "+n.charAt(k));}function N(h){if("void"==h)return"";var n=k,G=ja(t(),0);if(!h)return G;if(!d(h,G[1]))throw new f("Incompatible types: expected "+h+" got "+G[1],n,k);return G[0]}function Da(){var d=n.charCodeAt(k);if(42==d||47==d||37==d){O=k+1;if(61==n.charCodeAt(k))throw new f("Assignment only allowed as standalone statement");return 12}if(43==d||45==d){O=k+1;var h=
n.charCodeAt(O);if(h==d)throw new f((43==d?"In":"De")+"crement operator only allowed as standalone statement");if(61==h)throw new f("Assignment only allowed as standalone statement");return 11}if(60==d||62==d){O=k+1;h=n.charCodeAt(O);if(h==d)throw new f("Shift operator not supported");61==h&&O++;return 9}if(61==d||33==d){O=k+1;if(61!=n.charCodeAt(O))throw new f("Did you mean "+n.charAt(O-1)+"= ? "+(61==d?"Assignment only allowed as standalone statement":"This is not allowed as an infix operator"));
O++;return 8}if(38==d||124==d){O=k+1;if(n.charCodeAt(O)!=d)throw new f("Did you mean "+n.charAt(O-1)+"= ? Bitwise operator not supported");O++;return 38==d?4:3}if(63==d)throw new f("Ternary operator not supported");if(94==d)throw new f("Did you mean pow(..., ...)? XOR operator not supported");return-1}function Ya(d){if("String"==d[1])return!1;"double"==d[1]?d[0]="$$db("+d[0]+")":"boolean"==d[1]?d[0]="!!("+d[0]+")":"char"==d[1]?d[0]="String.fromCharCode("+d[0]+")":"color"==d[1]?d[0]="$$rgbs("+d[0]+
")":"double[]"==d[1]?d[0]="("+d[0]+").reduce($$rd($$db),'')":"boolean[]"==d[1]?d[0]="$$ba("+d[0]+")":"char[]"==d[1]?d[0]="("+d[0]+").reduce($$rd(String.fromCharCode),'')":"color[]"==d[1]&&(d[0]="("+d[0]+").reduce($$rd($$rgbs),'')");return!0}function ja(d,h,p){if(k==n.length)throw new f("Expected expression here");p=k;for(var l=v(),w=Da(),x=n.substring(k,O);w>=h;){var F=x,q=l,A=w;k=O;var G=v(),y=t();p=k;l=v();w=Da();for(x=n.substring(k,O);w>A;)y=ja(y,w),p=k,l=v(),w=Da(),x=n.substring(k,O);var na=d[0]+
q+F+G+y[0];if("String"==d[1]||"String"==y[1]){if("+"!=F)throw new f("Only a concatenation + operator is allowed here"+("=="==F?"; did you mean .equals()?":""),O-F.length,O);Ya(d)||Ya(y);d=[d[0]+q+F+G+y[0],"String"]}else if("int"!=d[1]&&"double"!=d[1]||"int"!=y[1]&&"double"!=y[1])if("boolean"==d[1]&&"boolean"==y[1])if(8==A||4==A||3==A)d=[na,"boolean"];else throw k=O,new f("Unrecognized operation "+d[1]+" "+F+" "+y[1]+": only equality, and (&&), or (||) belongs here",O-F.length,O);else if("char"==d[1]&&
"char"==y[1])if(9==A||8==A)d=[na,"boolean"];else throw k=O,new f("Unrecognized operation "+d[1]+" "+F+" "+y[1]+": only equality == or comparison belongs here",O-F.length,O);else if("color"==d[1]&&"color"==y[1])if(8==A)d=[na,"boolean"];else throw k=O,new f("Unrecognized operation "+d[1]+" "+F+" "+y[1]+": only equality belongs here",O-F.length,O);else throw k=O,new f("Unrecognized operation "+d[1]+" "+F+" "+y[1]+": left and right types can't be operated upon",O-F.length,O);else if(12==A||11==A)d="int"==
d[1]&&"int"==y[1]?"/"==F?[q+"$$dz("+d[0]+", "+y[0]+")"+G,"int"]:"%"==F?[q+"$$rz("+d[0]+", "+y[0]+")"+G,"int"]:"*"==F?[q+"Math.imul("+d[0]+", "+y[0]+")"+G,"int"]:["~~("+na+")","int"]:[na,"double"];else if(9==A||8==A)d=[na,"boolean"];else throw new f("Unrecognized operation "+d[1]+" "+F+" "+y[1]+": only arithmetic or comparison belongs here",O-F.length,O);}k=p;return d}function Ta(d){if(d.endsWith("[]")&&123==n.charCodeAt(k)){var h=k,p="[";k++;d=d.substring(0,d.length-2);for(p+=v();k<n.length&&125!=
n.charCodeAt(k);){p+=Ta(d);p+=v();if(k>=n.length)break;var F=n.charCodeAt(k);if(125!=F&&44!=F)throw new f("Expected comma or end brace in array literal");if(44==F&&(F=k,k++,p+=","+v(),125==n.charCodeAt(k)))throw new f("Extra comma in array literal",F);}if(k>=n.length)throw new f("No end brace for array literal",h,k);k++;return p+"]"}return N(d)}function oa(d,p,q){var l=k;if(59==n.charCodeAt(k))throw new f("Empty statement not allowed");var t=h(),x="";if(2!=q&&3!=q){if("return"==t)return[t+v()+N(d)+
E(";"),!0];if("if"==t){x=t+v()+E("(")+v()+N("boolean")+v()+E(")")+v();q=R(d,p);x+=q[0];x+=v();if("else"==z()){k+=4;x=x+"else"+v();if(123==n.charCodeAt(k))l=R(d,p);else if("if"==z())l=oa(d,p,1);else throw new f("Expected { or if here");return[x+l[0],q[1]&&l[1]]}return[x,!1]}if("while"==t){x=x+t+v();x+=E("(");x=x+"++$$lc<$$mx&&("+v();x+=N("boolean");x+=v();x+=E(")");x=x+")"+v();l=k;q=R(d,!0);if(q[1])throw new f("while loop never loops (always returns)! (If this is what you want, use if)",l,k);return[x+
q[0],!1]}if("break"==t||"continue"==t){if(!p)throw new f(t+" not allowed (not inside a loop)");x=x+t+E(";");return[x,!1]}if("for"==t){x=x+t+v();x+=E("(");x+=v();S.push(Object.create(null));59!=n.charCodeAt(k)&&(x+=oa(null,!1,2)[0],x+=v());x+=E(";","declaration or ;");x+=v();x+="++$$lc<$$mx";59!=n.charCodeAt(k)&&(x=x+"&&("+N("boolean"),x=x+")"+v());x+=E(";","condition or ;");x+=v();41!=n.charCodeAt(k)&&(x+=oa(null,!1,3)[0],x+=v());x+=E(")","increment or )");x+=v();l=k;q=R(d,!0);if(q[1])throw new f("for loop never loops (always returns)! (If this is what you want, use if)",
l,k);S.pop();return[x+q[0],!1]}}if(t in H){if(1==q||3==q)throw new f("Declaration should be in a block",l,k);x+="var";for(91!=n.charCodeAt(k)&&(x+=y());91==n.charCodeAt(k);){t+="[]";k++;x+=v();if(93!=n.charCodeAt(k))throw new f("Missing end bracket ] in array declaration");k++;x+=v();x.endsWith(" ")||(x+=" ")}for(;;){d=k;p=w();if(Z(p))throw k-=p.length,new f(p+" already declared. Don't include '"+t+"' if you meant to use it.",k,k+p.length);x+=p;x+=v();if(123==n.charCodeAt(k))throw new f("To define a function, use parentheses before the curly brace");
if(40==n.charCodeAt(k)){if(4!=q)throw new f("function definition not allowed here. Don't include parentheses to declare a variable.");k=l;S.push(Object.create(null));x="function "+v();q=D(H,"return type");l=k;t=P();if("void"==q&&"[]"==P)throw new f("Void array not allowed",l,k);q+=t;var G=k;q.endsWith("[]")?v(!0):y(!0);l=h();d=void 0;if(l in aa){if(q!=aa[l][0])throw new f("Expected return type '"+aa[l][0]+"' but got "+q,G-q.length,G);d=aa[l][1]}if(l in ea)throw new f("This function already exists, please choose a different name",
k-l.length,k);V&&l==V[1]&&(W=!0);x+=l+v()+E("(")+v();ea[l]="pending";p=0;t=[];for(var ja=!1;k<n.length&&41!=n.charCodeAt(k);){if(ja)throw new f("Expected , (extra parameter) or ) (end of parameters) here");G=k;var A=D(T,"type")+P();if(d&&d.length<=p)throw new f("Expected "+d.length+" parameters");if(d&&d[p]!=A)throw new f("The "+va[p]+" parameter should have type "+d[p]+" but has type "+A,G,k);A.endsWith("[]")?v(!0):y(!0);G=w();if(Z(G))throw k-=G.length,new f(G+" already declared above. Choose a different name.",
k,k+G.length);if(k==n.length)throw new f("No end parenthesis for argument list for call to "+w);t.push(A);S[S.length-1][G]=A;x+=G;x+=v();d?p<d.length-1&&(x+=E(",")+v()):44==n.charCodeAt(k)?(k++,x+=","+v()):ja=!0;p++}if(k==n.length)throw new f("Unexpected end of input in parameter list");if(d&&p!=d.length)throw new f("Expected "+d.length+" parameter"+(1==d.length?"":"s")+" but saw "+p);x+=E(")");x+=v();d=R(q,!1);if("void"!=q&&!d[1])throw k--,new f("This function must return a value of type "+q);ea[l]=
[q,t,l];x+=d[0];S.pop();return[x,!1]}if(p in aa)throw 4==q&&E("("),new f(p+" not allowed as variable name, and function declaration is not allowed here",d,d+p.length);if("void"==t)throw new f("void type not allowed for variable"+(4==q?" - to define a function use parentheses after the function name":""),l,l+4);S[S.length-1][p]="void";x+=E("=");x+=v();x+=Ta(t);S[S.length-1][p]=t;if(59==n.charCodeAt(k))break;if(44!=n.charCodeAt(k))throw new f("Expected ; or ,");k++;x+=",";x+=v()}2!=q&&3!=q&&(x+=E(";"))}else if(k=
l,l=F(),l[0].startsWith("$$av(")||-1==l[0].indexOf("(")){x+=l[0];l[0].startsWith("$$av(")?v(!0):x+=v();if(k==n.length)throw new f("Unexpected end of input: this should be an assignment statement");t=n.charCodeAt(k);d=n.charCodeAt(k+1);if(43!=t&&45!=t||d!=t){if(!l[0].startsWith("$$av")&&-1!=l[0].indexOf("."))throw new f(l[0].substring(l[0].indexOf(".")+1)+" cannot be modified");if(61==t){if(61==d)throw new f("Assignment is one = only",k+2);k++;l[0].startsWith("$$av(")?(x="$$ae"+x.substring(4,x.length-
1),x=x+","+v(),x+=N(l[1]),x+=")"):(x=x+"="+v(),x+=N(l[1]))}else if(42==t||43==t||45==t||47==t||37==t){if((43!=t||"String"!=l[1])&&"int"!=l[1]&&"double"!=l[1])throw new f(l[1]+" cannot be combined with "+n.substring(k,k+1));if(61!=d)throw new f("Expression must be part of an assignment if it is a statement");l[0].startsWith("$$av(")?(x="int"==l[1]?43==t?"$$aia("+x.substring(5,x.length-1):45==t?"$$ais("+x.substring(5,x.length-1):42==t?"$$aim("+x.substring(5,x.length-1):37==t?"$$air("+x.substring(5,
x.length-1):"$$aid("+x.substring(5,x.length-1):43==t?"$$aa("+x.substring(5,x.length):45==t?"$$as("+x.substring(5,x.length):42==t?"$$am("+x.substring(5,x.length):37==t?"$$ar("+x.substring(5,x.length):"$$ad("+x.substring(5,x.length),x+=","):x="int"==l[1]?43==t?x+("= ~~("+l[0]+"+ ("):45==t?x+("= ~~("+l[0]+" - ("):42==t?x+("= ~~("+l[0]+" * ("):37==t?x+("= ($$rz("+l[0]+","):x+("= ($$dz("+l[0]+","):x+n.substring(k,k+2);k+=2;x+=v();x+=N(43==t&&"String"==l[1]?"any":l[1]);"int"==l[1]&&(x+=")",l[0].startsWith("$$av(")||
(x+=")"))}else throw new f("Unexpected assignment operator");}else x+=n.substring(k,k+2),k+=2;2!=q&&3!=q&&(x+=E(";"))}else x+=l[0],x+=E(";");return[x,!1]}function R(d,h){var l=E("{");S.push(Object.create(null));l+=v();for(var p=!1,t=!1;k<n.length&&125!=n.charCodeAt(k);){var q=k,F=oa(d,h);if(p||t)throw new f("Unreachable statement",q,k);l+=F[0];p=F[1];t="break;"==F[0]||"continue;"==F[0];l+=v()}l+=E("}");S.pop();return[l,p]}var Y=Object.assign(Object.create(null),{String:{"this":{charAt:["char",["int"],
"$$charat"],substring:["String",["int","int"],"$$substring"],length:["int",[],"$$length"],equals:["boolean",["String"],"$$equals"]}},"[]":{"this":{length:[null,"int"]}}}),Q=Object.assign(Object.create(null),{sqrt:["double",["double"],"Math.sqrt"],pow:["double",["double","double"],"Math.pow"],sin:["double",["double"],"Math.sin"],cos:["double",["double"],"Math.cos"],tan:["double",["double"],"Math.tan"],log:["double",["double"],"Math.log"],asin:["double",["double"],"Math.asin"],acos:["double",["double"],
"Math.acos"],atan:["double",["double"],"Math.atan"],atan2:["double",["double","double"],"Math.atan2"],floor:["double",["double"],"Math.floor"],ceil:["double",["double"],"Math.ceil"],random:["double",["double","double"],"$$rand"],round:["double",["double"],"Math.round"],abs:[["int",["int"],"Math.abs"],["double",["double"],"Math.abs"]],max:[["int",["int","int"],"Math.max"],["double",["double","double"],"Math.max"]],min:[["int",["int","int"],"Math.min"],["double",["double","double"],"Math.min"]],sort:["void",
["any[]"],"$prt.sort"],print:["void",["any"],"$$print",!0],println:["void",["any"],"$$println",!0],toString:["String",["any"],"String",!0],isInt:["boolean",["String"],"$$isI"],isDouble:["boolean",["String"],"$$isD"],toInt:["int",["String"],"$$toI"],toDouble:["double",["String"],"$$toD"],rgb:["color",["int","int","int"],"$prt.rgb"],hsv:["color",["double","double","double"],"$prt.hsv"],fill:["void",["color"],"$prt.fill"],noFill:["void",[],"$prt.noFill"],stroke:["void",["color"],"$prt.stroke"],strokeWeight:["void",
["double"],"$prt.strokeWeight"],noStroke:["void",[],"$prt.noStroke"],background:["void",["color"],"$prt.background"],line:["void",["double","double","double","double"],"$prt.line"],rect:["void",["double","double","double","double"],"$prt.rect"],ellipse:["void",["double","double","double","double"],"$prt.ellipse"],triangle:["void","double double double double double double".split(" "),"$prt.triangle"],quad:["void","double double double double double double double double".split(" "),"$prt.quad"],arc:["void",
"double;double;double;double;double;double;OPEN, CHORD, or PIE".split(";"),"$prt.arc"],size:["void",["int","int"],"$prt.size"],text:["void",["String","double","double"],"$prt.text"],textSize:["void",["double"],"$prt.textSize"],frameRate:["void",["int"],"$prt.frameRate"],loadStrings:["String[]",["String"],"$prt.loadStrings"],saveStrings:["void",["String","String[]"],"$prt.saveStrings"],split:["String[]",["String","String"],"$prt.split"]}),aa=Object.assign(Object.create(null),{draw:["void",[]],keyPressed:["void",
[]],keyReleased:["void",[]],keyTyped:["void",[]],mouseMoved:["void",[]],mousePressed:["void",[]],mouseReleased:["void",[]]}),p=Object.assign(Object.create(null),{PI:"double",OPEN:"OPEN, CHORD, or PIE",CHORD:"OPEN, CHORD, or PIE",PIE:"OPEN, CHORD, or PIE",mouseX:"double",mouseY:"double",pmouseX:"double",pmouseY:"double",isMousePressed:"boolean",isKeyPressed:"boolean",frameCount:"int",key:"char",width:"int",height:"int"}),n="",ha=null,k=0,V=null,W=!1,O=-1,S=[Object.create(null)],ea=Object.create(null),
U=!1,va="first second third fourth fifth sixth seventh eighth ninth tenth".split(" "),T=Object.assign(Object.create(null),{"int":!0,"double":!0,"boolean":!0,"char":!0,color:!0,String:!0}),H=Object.assign(Object.assign(Object.create(null),{"void":!0}),T),ra=Object.assign(Object.create(null),{"in":!0,"class":!0,"if":!0,"else":!0,"for":!0,"do":!0,"while":!0,"static":!0,"final":!0,"null":!0,"true":!0,"false":!0,"abstract":!0,"interface":!0,"goto":!0,_:!0,"package":!0,"enum":!0,"function":!0,"new":!0,
"try":!0,"catch":!0,"finally":!0,"instanceof":!0,"debugger":!0});return{parseProgram:function(d){var h="draw";ea=Object.assign(Object.create(null),Q);ha=Y;U=!0;n=d;V=["void",h,[]];W=!1;k=0;S=[Object.create(null)];for(d=v();k<n.length;){if(W)throw new f("The "+h+" function should be last");d+=oa(null,!1,4)[0]+v()}if(!W&&Object.keys(ea).length>Object.keys(Q).length)throw new f("No function named "+h+" found");d+="\n";for(h in ea)h in aa&&(d+="$prt."+h+" = "+h+"\n");return d}}}();var prtf=function(){function f(d,h,f,t,q,w){function F(h,f){var t=h,F=0;var w=0;d.pmouseX=d.mouseX;d.pmouseY=d.mouseY;if(t.offsetParent){do F+=t.offsetLeft,w+=t.offsetTop;while(t=t.offsetParent)}t=h;do F-=t.scrollLeft||0,w-=t.scrollTop||0;while(t=t.parentNode);if(q.defaultView&&q.defaultView.getComputedStyle){var y=parseInt(q.defaultView.getComputedStyle(h,null).paddingLeft,10)||0;var v=parseInt(q.defaultView.getComputedStyle(h,null).paddingTop,10)||0;var p=parseInt(q.defaultView.getComputedStyle(h,
null).borderLeftWidth,10)||0;var n=parseInt(q.defaultView.getComputedStyle(h,null).borderTopWidth,10)||0}F=F+y+p+window.pageXOffset;w=w+v+n+window.pageYOffset;h=F;d.mouseX=f.pageX-h;d.mouseY=f.pageY-w}f(h,"touchstart",function(f){F(h,f.touches[0]);d.isMousePressed=!0;d.mouseDragging=!1;d.mouseButton=w.LEFT;"function"===typeof d.mousePressed&&d.mousePressed()});f(h,"touchmove",function(f){f.preventDefault();F(h,f.touches[0]);"function"!==typeof d.mouseMoved||d.isMousePressed||d.mouseMoved();"function"===
typeof d.mouseDragged&&d.isMousePressed&&(d.mouseDragged(),d.mouseDragging=!0)});f(h,"touchend",function(h){d.isMousePressed=!1;"function"!==typeof d.mouseClicked||d.mouseDragging||d.mouseClicked();"function"===typeof d.mouseReleased&&d.mouseReleased()});(function(){var t=!0,q=function(d){d.preventDefault();d.stopPropagation()};d.disableContextMenu=function(){t&&(f(h,"contextmenu",q),t=!1)};d.enableContextMenu=function(){t||(detachEventHandler({elem:h,type:"contextmenu",fn:q}),t=!0)}})();f(h,"mousemove",
function(f){F(h,f);"function"!==typeof d.mouseMoved||d.isMousePressed||d.mouseMoved();"function"===typeof d.mouseDragged&&d.isMousePressed&&(d.mouseDragged(),d.mouseDragging=!0)});f(h,"mouseout",function(h){"function"===typeof d.mouseOut&&d.mouseOut()});f(h,"mouseover",function(f){F(h,f);"function"===typeof d.mouseOver&&d.mouseOver()});h.onmousedown=function(){h.focus();return!1};f(h,"mousedown",function(h){d.isMousePressed=!0;d.mouseDragging=!1;switch(h.which){case 1:d.mouseButton=w.LEFT;break;case 2:d.mouseButton=
w.CENTER;break;case 3:d.mouseButton=w.RIGHT}"function"===typeof d.mousePressed&&d.mousePressed()});f(h,"mouseup",function(h){d.isMousePressed=!1;"function"!==typeof d.mouseClicked||d.mouseDragging||d.mouseClicked();"function"===typeof d.mouseReleased&&d.mouseReleased()});t=function(f){if(f.target===h){var t=0;f.wheelDelta?(t=f.wheelDelta/120,window.opera&&(t=-t)):f.detail&&(t=-f.detail/3);(d.mouseScroll=t)&&"function"===typeof d.mouseScrolled&&(f.stopPropagation(),f.preventDefault(),d.mouseScrolled())}};
f(q,"DOMMouseScroll",t);f(q,"mousewheel",t)}function J(){}function E(d,h,f){if(d.hasOwnProperty(h)&&"function"===typeof d[h]){var t=d[h];if("$overloads"in t)t.$defaultOverload=f;else if("$overloads"in f||t.length!==f.length){if("$overloads"in f){var q=f.$overloads.slice(0);q[t.length]=t;t=f.$defaultOverload}else q=[],q[f.length]=f,q[t.length]=t;var w=function(){return(w.$overloads[arguments.length]||("$methodArgsIndex"in w&&arguments.length>w.$methodArgsIndex?w.$overloads[w.$methodArgsIndex]:null)||
w.$defaultOverload).apply(this,arguments)};w.$overloads=q;"$methodArgsIndex"in f&&(w.$methodArgsIndex=f.$methodArgsIndex);w.$defaultOverload=t;w.name=h;d[h]=w}}else d[h]=f}function z(d,h){function f(f){P.defineProperty(d,f,{get:function(){return h[f]},set:function(d){h[f]=d},enumerable:!0})}var t=[],q;for(q in h)"function"===typeof h[q]?E(d,q,h[q]):"$"===q.charAt(0)||q in d||t.push(q);for(;0<t.length;)f(t.shift());d.$super=h}var D={PI:Math.PI,TWO_PI:2*Math.PI,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/
Math.PI,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,OPEN:1,CHORD:2,PIE:3,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",
MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto"};J.prototype=D;var P=new J;P.defineProperty=function(d,h,f){"defineProperty"in Object?Object.defineProperty(d,h,f):(f.hasOwnProperty("get")&&d.__defineGetter__(h,f.get),f.hasOwnProperty("set")&&d.__defineSetter__(h,f.set))};P.extendClassChain=function(d){for(var h=[d],f=d.$upcast;f;f=f.$upcast)z(f,d),h.push(f),d=f;for(;0<h.length;)h.pop().$self=d};P.extendStaticMembers=
function(d,h){z(d,h)};P.extendInterfaceMembers=function(d,h){z(d,h)};P.addMethod=function(d,h,f,t){var q=d[h];if(q||t){var w=f.length;if("$overloads"in q)q.$overloads[w]=f;else{var y=function(){return(y.$overloads[arguments.length]||("$methodArgsIndex"in y&&arguments.length>y.$methodArgsIndex?y.$overloads[y.$methodArgsIndex]:null)||y.$defaultOverload).apply(this,arguments)},F=[];q&&(F[q.length]=q);F[w]=f;y.$overloads=F;y.$defaultOverload=q||f;t&&(y.$methodArgsIndex=w);y.name=h;d[h]=y}}else d[h]=f};
var K=window.XMLHttpRequest,v=function(){};document.head||(document.head=document.getElementsByTagName("head")[0]);if(9<=document.documentMode&&!document.doctype)throw"The doctype directive is missing. The recommended doctype in Internet Explorer is the HTML5 doctype: <!DOCTYPE html>";var y=[],q={},Z=function(d){this.attachFunction=d;this.options={pauseOnBlur:!1,globalKeyEvents:!1};this.onExit=this.onFrameEnd=this.onFrameStart=this.onLoop=this.onPause=this.onSetup=this.onLoad=v;this.params={};this.sourceCode=
void 0;this.attach=function(d){if("function"===typeof this.attachFunction)this.attachFunction(d);else if(this.sourceCode){var f=(new Function("return ("+this.sourceCode+");"))();f(d);this.attachFunction=f}else throw"Unable to attach sketch to the processing instance";}},w=this.Processing=function(d,h,F){function t(d,f,h){var k=function(){try{h.apply(null,arguments)}catch(C){if(C.message&&C.stack){var d=$$getStack(C.stack,"<anonymous>:")||$$getStack(C.stack,"Function:")||"unknown";$$forceprint("\nERROR in "+
f+": "+C.message+" at line "+d)}else $$forceprint("\nERROR in "+f+": "+C);p.exit();throw C;}};d.addEventListener?d.addEventListener(f,k,!1):d.attachEvent("on"+f,k);aa.push({elem:d,type:f,fn:k})}function z(d){var f=d.elem,h=d.type;d=d.fn;f.removeEventListener?f.removeEventListener(h,d,!1):f.detachEvent&&f.detachEvent("on"+h,d)}function Da(d){if("number"===typeof d)return 0!==d;if("boolean"===typeof d)return d;if("string"===typeof d)return"true"===d.toLowerCase()}function E(){ha&&(V&&(n.fillStyle="#"+
(k+16777216).toString(16).substring(1),V=!1),n.fill())}function ja(){W&&(S&&(n.strokeStyle="#"+(O+16777216).toString(16).substring(1),S=!1),n.stroke())}function J(d){d=d.which||d.keyCode;switch(d){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return d}function oa(d){"function"===typeof d.preventDefault?d.preventDefault():"function"===typeof d.stopPropagation&&d.stopPropagation();return!1}function R(){for(var d in Ia)if(Ia.hasOwnProperty(d)){p.isKeyPressed=
!0;return}p.isKeyPressed=!1}function Y(d,f){Ia[d]=f;A=null;p.key=f;p.keyCode=d;p.keyPressed();p.keyCode=0;p.keyTyped();R()}if(!(this instanceof w))throw"called Processing constructor as if it were a function: missing 'new'.";var Q="string"===typeof d?document.getElementById(d):d;if(!("getContext"in Q))throw"called Processing constructor without passing canvas element reference or id.";var aa=[],p=this;aa=[];f(p,Q,t,function(d,f){Object.keys(aa).forEach(function(h){-1<f.indexOf(h.type)&&h.elem==d&&
z(h.type)})},document,D);F&&Object.keys(F).forEach(function(d){p[d]=F[d]});p.externals={canvas:Q,context:void 0,sketch:void 0,window:window};p.name="Processing.js Instance";p.use3DContext=!1;p.focused=!1;p.breakShape=!1;p.glyphTable={};p.pmouseX=0;p.pmouseY=0;p.mouseX=0;p.mouseY=0;p.mouseButton=0;p.mouseScroll=0;p.mouseClicked=void 0;p.mouseDragged=void 0;p.mouseMoved=void 0;p.mousePressed=void 0;p.mouseReleased=void 0;p.mouseScrolled=void 0;p.mouseOver=void 0;p.mouseOut=void 0;p.touchStart=void 0;
p.touchEnd=void 0;p.touchMove=void 0;p.touchCancel=void 0;p.key=void 0;p.keyCode=void 0;p.keyPressed=v;p.keyReleased=v;p.keyTyped=v;p.draw=void 0;p.setup=void 0;p.isMousePressed=!1;p.isKeyPressed=!1;p.__frameRate=60;p.frameCount=0;p.width=100;p.height=100;var n,ha=!0,k=16777215,V=!0,W=!0,O=0,S=!0,ea=1,U=!1,va=!1,T=!0,H=0,ra=60,G=1E3/ra,l=13421772,gb=0,sb=0;Date.now();var Mb=window.performance.now(),x=0,tb=12,Ia=[],A=null,Sa=[D.SHIFT,D.CONTROL,D.ALT,D.CAPSLK,D.PGUP,D.PGDN,D.END,D.HOME,D.LEFT,D.UP,
D.RIGHT,D.DOWN,D.NUMLK,D.INSERT,D.F1,D.F2,D.F3,D.F4,D.F5,D.F6,D.F7,D.F8,D.F9,D.F10,D.F11,D.F12,D.META];p.split=function(d,f){return d.split(f)};p.sort=function(d){0<d.length&&("string"===typeof d[0]?d.sort():d.sort(function(d,f){return d-f}))};p.rgb=function(d,f,h){d=0>d?0:d;f=0>f?0:f;h=0>h?0:h;return(255<d?255:d)<<16&D.RED_MASK|(255<f?255:f)<<8&D.GREEN_MASK|(255<h?255:h)&D.BLUE_MASK};p.hsv=function(d,f,h){var k,n;d=d%360/60;var l=h*f;f=l*(1-Math.abs(d%2-1));h=k=n=h-l;d=~~d;h+=[l,f,0,0,f,l][d];k+=
[f,l,l,f,0,0][d];n+=[0,0,f,l,l,f][d];return p.rgb(Math.floor(255*h),Math.floor(255*k),Math.floor(255*n))};p.hsb=function(d,f,h){d=1<d?1:d;d=360*(0>d?0:d);f=100*(1<f?1:f);h=100*(1<h?1:h);var k=Math.round(h/100*255);if(0===f)return n.rgb(k,k,k);d%=360;var l=d%60,n=Math.round(h*(100-f)/1E4*255),p=Math.round(h*(6E3-f*l)/6E5*255);f=Math.round(h*(6E3-f*(60-l))/6E5*255);switch(Math.floor(d/60)){case 0:return n.rgb(k,f,n);case 1:return n.rgb(p,k,n);case 2:return n.rgb(n,k,f);case 3:return n.rgb(n,p,k);case 4:return n.rgb(f,
n,k);case 5:return n.rgb(k,n,p);default:w.debug("Unexpectedly hit default case in hsb function.")}};p.brightness=function(d){return p.hsb(d)[2]};p.saturation=function(d){return p.hsb(d)[1]};p.hue=function(d){return p.hsb(d)[0]};p.red=function(d){return(d&D.RED_MASK)>>>16};p.green=function(d){return(d&D.GREEN_MASK)>>>8};p.blue=function(d){return d&D.BLUE_MASK};p.redraw=function(){var d=(window.performance.now()-Mb)/1E3;x++;var f=x/d;.5<d&&(Mb=window.performance.now(),x=0,p.__frameRate=f);p.frameCount++;
n.lineWidth=ea;d=p.pmouseX;f=p.pmouseY;p.pmouseX=gb;p.pmouseY=sb;n.save();try{p.draw()}catch(ka){throw ka.message&&ka.stack?(d=$$getStack(ka.stack,"<anonymous>:")||$$getStack(ka.stack,"Function:")||"unknown",$$forceprint("\nERROR in draw(): "+ka.message+" at line "+d)):$$forceprint("\nERROR in draw(): "+ka),p.exit(),ka;}n.restore();V=S=!0;gb=p.mouseX;sb=p.mouseY;p.pmouseX=d;p.pmouseY=f};p.noLoop=function(){U=T=!1;window.cancelAnimationFrame(H);ua.onPause()};p.loop=function(){function d(n){H=window.requestAnimationFrame(d);
if(!(0<f&&n-f+k<G&&(0==h||n-h+k<2*G))){0<f&&(k=Math.min(k,n-f));h=f;f=n;try{ua.onFrameStart(),$$lc=0,$$mx=1E4,p.redraw(),ua.onFrameEnd(),$$lc>=$$mx&&($$forceprint("\nYour code was stopped for looping too much!"),p.exit())}catch(C){throw window.cancelAnimationFrame(H),C;}}}if(!U){Mb=window.performance.now();var f=x=0,h=0,k=1E9;H=window.requestAnimationFrame(d);U=T=!0;ua.onLoop()}};p.frameRate=function(d){ra=d;G=1E3/ra;T&&(p.noLoop(),p.loop())};p.exit=function(){window.cancelAnimationFrame(H);var d=
p.externals.canvas.id;y.splice(q[d],1);delete q[d];delete Q.onmousedown;for(d=aa.length;d--;)z(aa[d]);ua.onExit()};p.loadStrings=function(d){if(localStorage.getItem(d))return localStorage.getItem(d).split("\n");var f=new K;f.open("GET",d,!1);f.overrideMimeType&&f.overrideMimeType("text/plain");f.send(null);if(200!==f.status&&0!==f.status)throw Error(d+" could not be accessed (status code "+f.status+") - is there a typo?");f=f.responseText;if("string"!==typeof f||""===f)return[];f=f.replace(/(\r\n?)/g,
"\n").replace(/\n$/,"");localStorage.setItem(d,f);return f.split("\n")};p.saveStrings=function(d,f){localStorage.setItem(d,f.join("\n"))};p.str=function(d){if(d instanceof Array){for(var f=[],h=0;h<d.length;h++)f.push(d[h].toString()+"");return f}return d.toString()+""};p.parseBoolean=function(d){if(d instanceof Array){for(var f=[],h=0;h<d.length;h++)f.push(Da(d[h]));return f}return Da(d)};p.size=function(d,f){W&&p.stroke(0);ha&&p.fill(16777215);var h={fillStyle:n.fillStyle,strokeStyle:n.strokeStyle,
lineCap:n.lineCap,lineJoin:n.lineJoin};0<Q.style.length&&(Q.style.removeProperty("width"),Q.style.removeProperty("height"));Q.width=p.width=d||100;Q.height=p.height=f||100;for(var k in h)h.hasOwnProperty(k)&&(n[k]=h[k]);p.textFont(curTextFont);p.background(l);p.externals.context=n};p.size=function(d,f){W&&p.stroke(0);ha&&p.fill(16777215);Q.width=p.width=d;Q.height=p.height=f;n=Q.getContext("2d");p.background(l)};p.fill=function(d){d===k&&ha||(ha=!0,k=d,V=!0)};p.noFill=function(){ha=!1};p.stroke=function(d){d===
O&&W||(W=!0,O=d,S=!0)};p.noStroke=function(){W=!1};p.strokeWeight=function(d){ea=d;n.lineWidth=d};p.strokeCap=function(d){n.lineCap=d};p.strokeJoin=function(d){n.lineJoin=d};p.smooth=function(){va=!0;var d=Q.style;d.setProperty("image-rendering","optimizeQuality","important");d.setProperty("-ms-interpolation-mode","bicubic","important");n.hasOwnProperty("mozImageSmoothingEnabled")&&(n.mozImageSmoothingEnabled=!0)};p.noSmooth=function(){va=!1;var d=Q.style;d.setProperty("image-rendering","optimizeSpeed",
"important");d.setProperty("image-rendering","-moz-crisp-edges","important");d.setProperty("image-rendering","-webkit-optimize-contrast","important");d.setProperty("image-rendering","optimize-contrast","important");d.setProperty("-ms-interpolation-mode","nearest-neighbor","important");n.hasOwnProperty("mozImageSmoothingEnabled")&&(n.mozImageSmoothingEnabled=!1)};p.point=function(d,f){W&&(va||(d=Math.round(d),f=Math.round(f)),n.fillStyle="#"+(O+16777216).toString(16).substring(1),V=!0,1<ea?(n.beginPath(),
n.arc(d,f,ea/2,0,D.TWO_PI,!1),n.fill()):n.fillRect(d,f,1,1))};p.arc=function(d,f,h,k,l,p,q){0>=h||0>=k||p<l||(n.save(),n.beginPath(),q==D.PIE&&n.moveTo(d,f),h===k?n.arc(d,f,h/2,l,p,!1):(n.translate(d-h/2,f-k/2),n.scale(h/2,k/2),n.arc(1,1,1,l,p,!1)),n.restore(),q!=D.CHORD&&q!=D.PIE||n.closePath(),E(),ja())};p.line=function(d,f,h,k){W&&(va||(d=Math.round(d),h=Math.round(h),f=Math.round(f),k=Math.round(k)),d===h&&f===k?p.point(d,f):(n.beginPath(),n.moveTo(d||0,f||0),n.lineTo(h||0,k||0),ja()))};p.triangle=
function(d,f,h,k,l,p){n.beginPath();n.moveTo(d,f);n.lineTo(h,k);n.lineTo(l,p);n.closePath();E();ja();W&&1===ea%2&&n.translate(-.5,-.5)};p.quad=function(d,f,h,k,l,p,q,t){n.beginPath();n.moveTo(d,f);n.lineTo(h,k);n.lineTo(l,p);n.lineTo(q,t);n.closePath();E();ja();W&&1===ea%2&&n.translate(-.5,-.5)};p.rect=function(d,f,h,k,l,p,q,t){if(h==""+h||k==""+k){va||(d=Math.round(d),f=Math.round(f),h=Math.round(h),k=Math.round(k));if(void 0!==l){void 0===t&&(t=q=p=l);var w=h/2,y=k/2;if(l>w||l>y)l=Math.min(w,y);
if(p>w||p>y)p=Math.min(w,y);if(q>w||q>y)q=Math.min(w,y);if(t>w||t>y)t=Math.min(w,y);n.beginPath();n.moveTo(d+l,f);n.lineTo(d+h-p,f);n.quadraticCurveTo(d+h,f,d+h,f+p);n.lineTo(d+h,f+k-q);n.quadraticCurveTo(d+h,f+k,d+h-q,f+k);n.lineTo(d+t,f+k);n.quadraticCurveTo(d,f+k,d,f+k-t);n.lineTo(d,f+l);n.quadraticCurveTo(d,f,d+l,f)}else n.beginPath(),n.rect(d,f,h,k);E();ja()}};p.ellipse=function(d,f,h,k){d=d||0;f=f||0;0>=h&&0>=k||(h===k?(n.beginPath(),n.arc(d,f,h/2,0,D.TWO_PI,!1)):(n.save(),n.beginPath(),n.translate(d-
h/2,f-k/2),n.scale(h/2,k/2),n.arc(1,1,1,0,D.TWO_PI,!1),n.restore()),E(),ja())};p.background=function(d){n.save();n.setTransform(1,0,0,1,0,0);l=d;n.fillStyle="#"+(l+16777216).toString(16).substring(1);n.fillRect(0,0,p.width,p.height);V=!0;n.restore();V=S=!0};p.textSize=function(d){tb=d};p.text=function(d,f,h){n.font=tb+"px sans-serif";V&&(n.fillStyle="#"+(k+16777216).toString(16).substring(1),V=!1);n.fillText(d,f,h)};p.$init=function(){p.size(p.width,p.height);n.lineCap="round";p.smooth();p.disableContextMenu()};
Q.getAttribute("tabindex")||Q.setAttribute("tabindex",0);if(h instanceof Z)var ua=h;else if("function"===typeof h)ua=new Z(h);else throw"Unsupported "+typeof h+" aCode parameter";p.externals.sketch=ua;p.$init();Q.onfocus=function(){p.focused=!0};Q.onblur=function(){p.focused=!1;ua.options.globalKeyEvents||(p.isKeyPressed=!1,Ia=[],A=null)};ua.options.pauseOnBlur&&(t(window,"focus",function(){T&&p.loop()}),t(window,"blur",function(){T&&U&&(p.noLoop(),T=!0);p.isKeyPressed=!1;Ia=[];A=null}));d=ua.options.globalKeyEvents?
window:Q;t(d,"keydown",function(d){var f=J(d);if(f===D.DELETE)Y(f,127);else if(0>Sa.indexOf(f))A=f;else{var h=D.CODED;p.key=h;p.keyCode=f;Ia[f]=h;p.keyPressed();A=null;R();return oa(d)}});t(d,"keypress",function(d){if(null!==A){var f=A,h=d.which||d.keyCode,k=d.shiftKey||d.ctrlKey||d.altKey||d.metaKey;switch(h){case 13:h=k?13:10;break;case 8:h=k?127:8}Y(f,h);return oa(d)}});t(d,"keyup",function(d){d=J(d);var f=Ia[d];void 0!==f&&(p.key=f,p.keyCode=d,p.keyReleased(),delete Ia[d],R())});void 0!==this.externals.canvas.id&&
this.externals.canvas.id.length||(this.externals.canvas.id="__processing"+y.length);q[this.externals.canvas.id]=y.length;y.push(this);(function(d){ua.attach(d,P);ua.onLoad(d);d.setup&&(d.setup(),ua.onSetup());d.draw&&(T?d.loop():d.redraw())})(p)};w.debug=function(){return"console"in window?function(d){window.console.log("Processing.js: "+d)}:v}();w.prototype=P;w.instances=y;w.getInstanceById=function(d){return y[q[d]]};return w};(function(f,J){"object"===typeof exports&&"undefined"!==typeof module?module.exports=J():"function"===typeof define&&define.amd?define(J):f.CodeMirror=J()})(this,function(){function f(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function J(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function E(a,b){return J(a).appendChild(b)}function z(a,b,c,e){a=document.createElement(a);c&&(a.className=c);e&&(a.style.cssText=e);if("string"==typeof b)a.appendChild(document.createTextNode(b));
else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function D(a,b,c,e){a=z(a,b,c,e);a.setAttribute("role","presentation");return a}function P(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)}function K(){try{var a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function v(a,b){var c=a.className;f(b).test(c)||
(a.className+=(c?" ":"")+b)}function y(a,b){a=a.split(" ");for(var c=0;c<a.length;c++)a[c]&&!f(a[c]).test(b)&&(b+=" "+a[c]);return b}function q(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Z(a,b,c){b||(b={});for(var e in a)!a.hasOwnProperty(e)||!1===c&&b.hasOwnProperty(e)||(b[e]=a[e]);return b}function w(a,b,c,e,g){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));e=e||0;for(g=g||0;;){var u=a.indexOf("\t",e);if(0>u||u>=b)return g+(b-e);
g+=u-e;g+=c-g%c;e=u+1}}function d(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function h(a,b,c){for(var e=0,g=0;;){var u=a.indexOf("\t",e);-1==u&&(u=a.length);var d=u-e;if(u==a.length||g+d>=b)return e+Math.min(d,b-g);g+=u-e;g+=c-g%c;e=u+1;if(g>=b)return e}}function F(a){for(;zc.length<=a;)zc.push(t(zc)+" ");return zc[a]}function t(a){return a[a.length-1]}function N(a,b){for(var c=[],e=0;e<a.length;e++)c[e]=b(a[e],e);return c}function Da(a,b,c){for(var e=0,g=c(b);e<a.length&&c(a[e])<=
g;)e++;a.splice(e,0,b)}function Ya(){}function ja(a,b){Object.create?a=Object.create(a):(Ya.prototype=a,a=new Ya);b&&Z(b,a);return a}function Ta(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||eg.test(a))}function oa(a,b){return b?-1<b.source.indexOf("\\w")&&Ta(a)?!0:b.test(a):Ta(a)}function R(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Y(a){return 768<=a.charCodeAt(0)&&fg.test(a)}function Q(a,b,c){for(;(0>c?0<b:b<a.length)&&Y(a.charAt(b));)b+=c;
return b}function aa(a,b,c){for(var e=b>c?-1:1;;){if(b==c)return b;var g=(b+c)/2;g=0>e?Math.ceil(g):Math.floor(g);if(g==b)return a(g)?b:c;a(g)?c=g:b=g+e}}function p(a,b,c,e){if(!a)return e(b,c,"ltr",0);for(var g=!1,u=0;u<a.length;++u){var d=a[u];if(d.from<c&&d.to>b||b==c&&d.to==b)e(Math.max(d.from,b),Math.min(d.to,c),1==d.level?"rtl":"ltr",u),g=!0}g||e(b,c,"ltr")}function n(a,b,c){var e;Ob=null;for(var g=0;g<a.length;++g){var u=a[g];if(u.from<b&&u.to>b)return g;u.to==b&&(u.from!=u.to&&"before"==c?
e=g:Ob=g);u.from==b&&(u.from!=u.to&&"before"!=c?e=g:Ob=g)}return null!=e?e:Ob}function ha(a,b){var c=a.order;null==c&&(c=a.order=gg(a.text,b));return c}function k(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var e=(a=a._handlers)&&a[b];e&&(c=d(e,c),-1<c&&(a[b]=e.slice(0,c).concat(e.slice(c+1))))}}function V(a,b){var c=a._handlers&&a._handlers[b]||Ac;if(c.length)for(var e=Array.prototype.slice.call(arguments,2),g=0;g<c.length;++g)c[g].apply(null,
e)}function W(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});V(a,c||b.type,a,b);return T(b)||b.codemirrorIgnore}function O(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==d(a,b[c])&&a.push(b[c])}}function S(a,b){return 0<(a._handlers&&a._handlers[b]||Ac).length}function ea(a){a.prototype.on=function(a,c){I(this,a,c)};a.prototype.off=function(a,c){k(this,
a,c)}}function U(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function va(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function T(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function H(a){U(a);va(a)}function ra(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Ha&&a.ctrlKey&&1==b&&(b=3);return b}function G(a){if(null==gd){var b=z("span","\u200b");E(a,z("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&
(gd=1>=b.offsetWidth&&2<b.offsetHeight&&!(ba&&8>fa))}a=gd?z("span","\u200b"):z("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function l(a,b){2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));hd[a]=b}function gb(a){if("string"==typeof a&&ub.hasOwnProperty(a))a=ub[a];else if(a&&"string"==typeof a.name&&ub.hasOwnProperty(a.name)){var b=ub[a.name];"string"==typeof b&&(b={name:b});a=ja(b,a);a.name=b.name}else{if("string"==
typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return gb("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return gb("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function sb(a,b){b=gb(b);var c=hd[b.name];if(!c)return sb(a,"text/plain");a=c(a,b);if(vb.hasOwnProperty(b.name)){c=vb[b.name];for(var e in c)c.hasOwnProperty(e)&&(a.hasOwnProperty(e)&&(a["_"+e]=a[e]),a[e]=c[e])}a.name=b.name;b.helperType&&(a.helperType=b.helperType);if(b.modeProps)for(var g in b.modeProps)a[g]=
b.modeProps[g];return a}function Mb(a,b){a=vb.hasOwnProperty(a)?vb[a]:vb[a]={};Z(b,a)}function x(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);a={};for(var c in b){var e=b[c];e instanceof Array&&(e=e.concat([]));a[c]=e}return a}function tb(a,b){for(var c;a.innerMode;){c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}}function Ia(a,b,c){return a.startState?a.startState(b,c):!0}function A(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+
(b+a.first)+" in the document.");for(;!a.lines;)for(var c=0;;++c){var e=a.children[c],g=e.chunkSize();if(b<g){a=e;break}b-=g}return a.lines[b]}function Sa(a,b,c){var e=[],g=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;g==c.line&&(a=a.slice(0,c.ch));g==b.line&&(a=a.slice(b.ch));e.push(a);++g});return e}function ua(a,b,c){var e=[];a.iter(b,c,function(a){e.push(a.text)});return e}function na(a,b){if(b-=a.height)for(;a;a=a.parent)a.height+=b}function X(a){if(null==a.parent)return null;var b=a.parent;
a=d(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var e=0;c.children[e]!=b;++e)a+=c.children[e].chunkSize();return a+b.first}function ka(a,b){var c=a.first;a:do{for(var e=0;e<a.children.length;++e){var g=a.children[e],u=g.height;if(b<u){a=g;continue a}b-=u;c+=g.chunkSize()}return c}while(!a.lines);for(e=0;e<a.lines.length;++e){g=a.lines[e].height;if(b<g)break;b-=g}return c+e}function Nb(a,b){return b>=a.first&&b<a.first+a.size}function dd(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}
function C(a,b,c){void 0===c&&(c=null);if(!(this instanceof C))return new C(a,b,c);this.line=a;this.ch=b;this.sticky=c}function L(a,b){return a.line-b.line||a.ch-b.ch}function ed(a,b){return a.sticky==b.sticky&&0==L(a,b)}function fd(a){return C(a.line,a.ch)}function yc(a,b){return 0>L(a,b)?b:a}function Bc(a,b){return 0>L(a,b)?a:b}function M(a,b){if(b.line<a.first)return C(a.first,0);var c=a.first+a.size-1;if(b.line>c)return C(c,A(a,c).text.length);a=A(a,b.line).text.length;c=b.ch;b=null==c||c>a?C(b.line,
a):0>c?C(b.line,0):b;return b}function be(a,b){for(var c=[],e=0;e<b.length;e++)c[e]=M(a,b[e]);return c}function ce(a,b,c,e){var g=[a.state.modeGen],u={};de(a,b.text,a.doc.mode,c,function(a,b){return g.push(a,b)},u,e);var d=c.state;e=function(e){c.baseTokens=g;var r=a.state.overlays[e],m=1,B=0;c.state=!0;de(a,b.text,r.mode,c,function(a,b){for(var e=m;B<a;){var c=g[m];c>a&&g.splice(m,1,a,g[m+1],c);m+=2;B=Math.min(a,c)}if(b)if(r.opaque)g.splice(e,m-e,a,"overlay "+b),m=e+2;else for(;e<m;e+=2)a=g[e+1],
g[e+1]=(a?a+" ":"")+"overlay "+b},u);c.state=d;c.baseTokens=null;c.baseTokenPos=1};for(var m=0;m<a.state.overlays.length;++m)e(m);return{styles:g,classes:u.bgClass||u.textClass?u:null}}function ee(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var e=Pb(a,X(b)),g=b.text.length>a.options.maxHighlightLength&&x(a.doc.mode,e.state),u=ce(a,b,e);g&&(e.state=g);b.stateAfter=e.save(!g);b.styles=u.styles;u.classes?b.styleClasses=u.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.highlightFrontier&&
(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function Pb(a,b,c){var e=a.doc,g=a.display;if(!e.mode.startState)return new Na(e,!0,b);var u=hg(a,b,c),d=u>e.first&&A(e,u-1).stateAfter,m=d?Na.fromSaved(e,d,u):new Na(e,Ia(e.mode),u);e.iter(u,b,function(e){id(a,e.text,m);var c=m.line;e.stateAfter=c==b-1||0==c%5||c>=g.viewFrom&&c<g.viewTo?m.save():null;m.nextLine()});c&&(e.modeFrontier=m.line);return m}function id(a,b,c,e){var g=a.doc.mode;a=new la(b,a.options.tabSize,
c);a.start=a.pos=e||0;for(""==b&&fe(g,c.state);!a.eol();)jd(g,a,c.state),a.start=a.pos}function fe(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode&&(a=tb(a,b),a.mode.blankLine))return a.mode.blankLine(a.state)}function jd(a,b,c,e){for(var g=0;10>g;g++){e&&(e[0]=tb(a,c).mode);var u=a.token(b,c);if(b.pos>b.start)return u}throw Error("Mode "+a.name+" failed to advance stream.");}function ge(a,b,c,e){var g=a.doc,u=g.mode;b=M(g,b);var d=A(g,b.line);c=Pb(a,b.line,c);a=new la(d.text,a.options.tabSize,
c);var m;for(e&&(m=[]);(e||a.pos<b.ch)&&!a.eol();){a.start=a.pos;var B=jd(u,a,c.state);e&&m.push(new he(a,B,x(g.mode,c.state)))}return e?m:new he(a,B,c.state)}function ie(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var e=c[1]?"bgClass":"textClass";null==b[e]?b[e]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[e])||(b[e]+=" "+c[2])}return a}function de(a,b,c,e,g,u,d){var r=c.flattenSpans;null==r&&(r=a.options.flattenSpans);
var B=0,f=null,h=new la(b,a.options.tabSize,e),k=a.options.addModeClass&&[null];for(""==b&&ie(fe(c,e.state),u);!h.eol();){if(h.pos>a.options.maxHighlightLength){r=!1;d&&id(a,b,e,h.pos);h.pos=b.length;var l=null}else l=ie(jd(c,h,e.state,k),u);if(k){var n=k[0].name;n&&(l="m-"+(l?n+" "+l:n))}if(!r||f!=l){for(;B<h.start;)B=Math.min(h.start,B+5E3),g(B,f);f=l}h.start=h.pos}for(;B<h.pos;)a=Math.min(h.pos,B+5E3),g(a,f),B=a}function hg(a,b,c){for(var e,g,u=a.doc,d=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>d;--b){if(b<=
u.first)return u.first;var m=A(u,b-1),B=m.stateAfter;if(B&&(!c||b+(B instanceof Cc?B.lookAhead:0)<=u.modeFrontier))return b;m=w(m.text,null,a.options.tabSize);if(null==g||e>m)g=b-1,e=m}return g}function ig(a,b){a.modeFrontier=Math.min(a.modeFrontier,b);if(!(a.highlightFrontier<b-10)){for(var c=a.first,e=b-1;e>c;e--){var g=A(a,e).stateAfter;if(g&&(!(g instanceof Cc)||e+g.lookAhead<b)){c=e+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}function Dc(a,b,c){this.marker=a;this.from=b;this.to=
c}function Qb(a,b){if(a)for(var c=0;c<a.length;++c){var e=a[c];if(e.marker==b)return e}}function kd(a,b){if(b.full)return null;var c=Nb(a,b.from.line)&&A(a,b.from.line).markedSpans,e=Nb(a,b.to.line)&&A(a,b.to.line).markedSpans;if(!c&&!e)return null;a=b.from.ch;var g=b.to.ch,u=0==L(b.from,b.to),d;if(c)for(var m=0;m<c.length;++m){var B=c[m],f=B.marker;if(null==B.from||(f.inclusiveLeft?B.from<=a:B.from<a)||!(B.from!=a||"bookmark"!=f.type||u&&B.marker.insertLeft)){var h=null==B.to||(f.inclusiveRight?
B.to>=a:B.to>a);(d||(d=[])).push(new Dc(f,B.from,h?null:B.to))}}c=d;var k;if(e)for(d=0;d<e.length;++d)if(m=e[d],B=m.marker,null==m.to||(B.inclusiveRight?m.to>=g:m.to>g)||m.from==g&&"bookmark"==B.type&&(!u||m.marker.insertLeft))f=null==m.from||(B.inclusiveLeft?m.from<=g:m.from<g),(k||(k=[])).push(new Dc(B,f?null:m.from-g,null==m.to?null:m.to-g));e=1==b.text.length;g=t(b.text).length+(e?a:0);if(c)for(u=0;u<c.length;++u)if(d=c[u],null==d.to)(m=Qb(k,d.marker),m)?e&&(d.to=null==m.to?null:m.to+g):d.to=
a;if(k)for(a=0;a<k.length;++a)u=k[a],null!=u.to&&(u.to+=g),null==u.from?Qb(c,u.marker)||(u.from=g,e&&(c||(c=[])).push(u)):(u.from+=g,e&&(c||(c=[])).push(u));c&&(c=je(c));k&&k!=c&&(k=je(k));a=[c];if(!e){b=b.text.length-2;var l;if(0<b&&c)for(e=0;e<c.length;++e)null==c[e].to&&(l||(l=[])).push(new Dc(c[e].marker,null,null));for(c=0;c<b;++c)a.push(l);a.push(k)}return a}function je(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?
a:null}function jg(a,b,c){var e=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||e&&-1!=d(e,c)||(e||(e=[])).push(c)}});if(!e)return null;a=[{from:b,to:c}];for(b=0;b<e.length;++b){c=e[b];for(var g=c.find(0),u=0;u<a.length;++u){var r=a[u];if(!(0>L(r.to,g.from)||0<L(r.from,g.to))){var m=[u,1],B=L(r.from,g.from),f=L(r.to,g.to);(0>B||!c.inclusiveLeft&&!B)&&m.push({from:r.from,to:g.from});(0<f||!c.inclusiveRight&&
!f)&&m.push({from:g.to,to:r.to});a.splice.apply(a,m);u+=m.length-3}}}return a}function ke(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function le(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function ld(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;c=a.find();var e=b.find(),g=L(c.from,e.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return g?-g:(c=L(c.to,e.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?
1:0))?c:b.id-a.id}function wb(a,b){a=Ua&&a.markedSpans;if(a)for(var c,e=0;e<a.length;++e)if(c=a[e],c.marker.collapsed&&null==(b?c.from:c.to)&&(!g||0>ld(g,c.marker)))var g=c.marker;return g}function me(a,b,c,e,g){a=A(a,b);if(a=Ua&&a.markedSpans)for(b=0;b<a.length;++b){var u=a[b];if(u.marker.collapsed){var d=u.marker.find(0),m=L(d.from,c)||(u.marker.inclusiveLeft?-1:0)-(g.inclusiveLeft?-1:0),B=L(d.to,e)||(u.marker.inclusiveRight?1:0)-(g.inclusiveRight?1:0);if(!(0<=m&&0>=B||0>=m&&0<=B)&&(0>=m&&(u.marker.inclusiveRight&&
g.inclusiveLeft?0<=L(d.to,c):0<L(d.to,c))||0<=m&&(u.marker.inclusiveRight&&g.inclusiveLeft?0>=L(d.from,e):0>L(d.from,e))))return!0}}}function Oa(a){for(var b;b=wb(a,!0);)a=b.find(-1,!0).line;return a}function md(a,b){a=A(a,b);var c=Oa(a);return a==c?b:X(c)}function ne(a,b){if(b>a.lastLine())return b;var c=A(a,b);if(!Za(a,c))return b;for(;a=wb(c,!1);)c=a.find(1,!0).line;return X(c)+1}function Za(a,b){var c=Ua&&b.markedSpans;if(c)for(var e,g=0;g<c.length;++g)if(e=c[g],e.marker.collapsed&&(null==e.from||
!e.marker.widgetNode&&0==e.from&&e.marker.inclusiveLeft&&nd(a,b,e)))return!0}function nd(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),nd(a,b.line,Qb(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e,g=0;g<b.markedSpans.length;++g)if(e=b.markedSpans[g],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&nd(a,b,e))return!0}function Pa(a){a=Oa(a);for(var b=0,c=a.parent,
e=0;e<c.lines.length;++e){var g=c.lines[e];if(g==a)break;else b+=g.height}for(a=c.parent;a;c=a,a=c.parent)for(e=0;e<a.children.length&&(g=a.children[e],g!=c);++e)b+=g.height;return b}function Ec(a){if(0==a.height)return 0;for(var b=a.text.length,c,e=a;c=wb(e,!0);)c=c.find(0,!0),e=c.from.line,b+=c.from.ch-c.to.ch;for(e=a;c=wb(e,!1);)a=c.find(0,!0),b-=e.text.length-a.from.ch,e=a.to.line,b+=e.text.length-a.to.ch;return b}function od(a){var b=a.display;a=a.doc;b.maxLine=A(a,a.first);b.maxLineLength=Ec(b.maxLine);
b.maxLineChanged=!0;a.iter(function(a){var e=Ec(a);e>b.maxLineLength&&(b.maxLineLength=e,b.maxLine=a)})}function oe(a,b){if(!a||/^\s*$/.test(a))return null;b=b.addModeClass?kg:lg;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$&"))}function pe(a,b){var c=D("span",null,null,wa?"padding-right: .1px":null);c={pre:D("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};b.measure={};for(var e=0;e<=(b.rest?b.rest.length:0);e++){var g=e?b.rest[e-1]:b.line,
u=void 0;c.pos=0;c.addToken=mg;var d=a.display.measure;if(null!=pd)d=pd;else{var m=E(d,document.createTextNode("A\u062eA")),B=Rb(m,0,1).getBoundingClientRect();m=Rb(m,1,2).getBoundingClientRect();J(d);d=B&&B.left!=B.right?pd=3>m.right-B.right:!1}d&&(u=ha(g,a.doc.direction))&&(c.addToken=ng(c.addToken,u));c.map=[];var f=b!=a.display.externalMeasured&&X(g);a:{var h=m=B=d=void 0,k=void 0,l=void 0,n=void 0;u=c;f=ee(a,g,f);var p=g.markedSpans,q=g.text,t=0;if(p)for(var w=q.length,x=0,A=1,F="",v=0;;){if(v==
x){k=h=m=l="";B=d=null;v=Infinity;for(var H=[],C=void 0,z=0;z<p.length;++z){var T=p[z],N=T.marker;if("bookmark"==N.type&&T.from==x&&N.widgetNode)H.push(N);else if(T.from<=x&&(null==T.to||T.to>x||N.collapsed&&T.to==x&&T.from==x)){null!=T.to&&T.to!=x&&v>T.to&&(v=T.to,h="");N.className&&(k+=" "+N.className);N.css&&(l=(l?l+";":"")+N.css);N.startStyle&&T.from==x&&(m+=" "+N.startStyle);N.endStyle&&T.to==v&&(C||(C=[])).push(N.endStyle,T.to);N.title&&((d||(d={})).title=N.title);if(N.attributes)for(var ra in N.attributes)(d||
(d={}))[ra]=N.attributes[ra];N.collapsed&&(!B||0>ld(B.marker,N))&&(B=T)}else T.from>x&&v>T.from&&(v=T.from)}if(C)for(z=0;z<C.length;z+=2)C[z+1]==v&&(h+=" "+C[z]);if(!B||B.from==x)for(C=0;C<H.length;++C)qe(u,0,H[C]);if(B&&(B.from||0)==x){qe(u,(null==B.to?w+1:B.to)-x,B.marker,null==B.from);if(null==B.to)break a;B.to==x&&(B=!1)}}if(x>=w)break;for(H=Math.min(w,v);;){if(F){C=x+F.length;B||(z=C>H?F.slice(0,H-x):F,u.addToken(u,z,n?n+k:k,m,x+z.length==v?h:"",l,d));if(C>=H){F=F.slice(H-x);x=H;break}x=C;m=
""}F=q.slice(t,t=f[A++]);n=oe(f[A++],u.cm.options)}}else for(d=1;d<f.length;d+=2)u.addToken(u,q.slice(t,t=f[d]),oe(f[d+1],u.cm.options))}g.styleClasses&&(g.styleClasses.bgClass&&(c.bgClass=y(g.styleClasses.bgClass,c.bgClass||"")),g.styleClasses.textClass&&(c.textClass=y(g.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(G(a.display.measure)));0==e?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||
(b.measure.caches=[])).push({}))}wa&&(ra=c.content.lastChild,/\bcm-tab\b/.test(ra.className)||ra.querySelector&&ra.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack");V(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=y(c.pre.className,c.textClass||""));return c}function og(a){var b=z("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b}function mg(a,b,c,e,g,u,d){if(b){if(a.splitSpaces){var r=a.trailingSpace;
if(1<b.length&&!/  /.test(b))r=b;else{for(var B="",f=0;f<b.length;f++){var h=b.charAt(f);" "!=h||!r||f!=b.length-1&&32!=b.charCodeAt(f+1)||(h="\u00a0");B+=h;r=" "==h}r=B}}else r=b;B=r;f=a.cm.state.specialChars;h=!1;if(f.test(b)){r=document.createDocumentFragment();for(var k=0;;){f.lastIndex=k;var l=f.exec(b),n=l?l.index-k:b.length-k;if(n){var p=document.createTextNode(B.slice(k,k+n));ba&&9>fa?r.appendChild(z("span",[p])):r.appendChild(p);a.map.push(a.pos,a.pos+n,p);a.col+=n;a.pos+=n}if(!l)break;k+=
n+1;"\t"==l[0]?(l=a.cm.options.tabSize,l-=a.col%l,n=r.appendChild(z("span",F(l),"cm-tab")),n.setAttribute("role","presentation"),n.setAttribute("cm-text","\t"),a.col+=l):("\r"==l[0]||"\n"==l[0]?(n=r.appendChild(z("span","\r"==l[0]?"\u240d":"\u2424","cm-invalidchar")),n.setAttribute("cm-text",l[0])):(n=a.cm.options.specialCharPlaceholder(l[0]),n.setAttribute("cm-text",l[0]),ba&&9>fa?r.appendChild(z("span",[n])):r.appendChild(n)),a.col+=1);a.map.push(a.pos,a.pos+1,n);a.pos++}}else a.col+=b.length,r=
document.createTextNode(B),a.map.push(a.pos,a.pos+b.length,r),ba&&9>fa&&(h=!0),a.pos+=b.length;a.trailingSpace=32==B.charCodeAt(b.length-1);if(c||e||g||h||u){b=c||"";e&&(b+=e);g&&(b+=g);e=z("span",[r],b,u);if(d)for(var q in d)d.hasOwnProperty(q)&&"style"!=q&&"class"!=q&&e.setAttribute(q,d[q]);return a.content.appendChild(e)}a.content.appendChild(r)}}function ng(a,b){return function(c,e,g,u,d,m,B){g=g?g+" cm-force-border":"cm-force-border";for(var r=c.pos,f=r+e.length;;){for(var h=void 0,k=0;k<b.length&&
!(h=b[k],h.to>r&&h.from<=r);k++);if(h.to>=f)return a(c,e,g,u,d,m,B);a(c,e.slice(0,h.to-r),g,u,null,m,B);u=null;e=e.slice(h.to-r);r=h.to}}}function qe(a,b,c,e){var g=!e&&c.widgetNode;g&&a.map.push(a.pos,a.pos+b,g);!e&&a.cm.display.input.needsContentAttribute&&(g||(g=a.content.appendChild(document.createElement("span"))),g.setAttribute("cm-marker",c.id));g&&(a.cm.display.input.setUneditable(g),a.content.appendChild(g));a.pos+=b;a.trailingSpace=!1}function re(a,b,c){for(var e=this.line=b,g;e=wb(e,!1);)e=
e.find(1,!0).line,(g||(g=[])).push(e);this.size=(this.rest=g)?X(t(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Za(a,b)}function Fc(a,b,c){var e=[],g;for(g=b;g<c;)b=new re(a.doc,A(a.doc,g),g),g+=b.size,e.push(b);return e}function pg(a,b){if(a=a.ownsGroup)try{var c=a.delayedCallbacks,e=0;do{for(;e<c.length;e++)c[e].call(null);for(var g=0;g<a.ops.length;g++){var u=a.ops[g];if(u.cursorActivityHandlers)for(;u.cursorActivityCalled<u.cursorActivityHandlers.length;)u.cursorActivityHandlers[u.cursorActivityCalled++].call(null,
u.cm)}}while(e<c.length)}finally{xb=null,b(a)}}function sa(a,b){var c=a._handlers&&a._handlers[b]||Ac;if(c.length){var e=Array.prototype.slice.call(arguments,2);if(xb)var g=xb.delayedCallbacks;else Sb?g=Sb:(g=Sb=[],setTimeout(qg,0));for(var u=function(a){g.push(function(){return c[a].apply(null,e)})},d=0;d<c.length;++d)u(d)}}function qg(){var a=Sb;Sb=null;for(var b=0;b<a.length;++b)a[b]()}function se(a,b,c,e){for(var g=0;g<b.changes.length;g++){var u=b.changes[g];if("text"==u){u=a;var d=b,m=d.text.className,
B=te(u,d);d.text==d.node&&(d.node=B.pre);d.text.parentNode.replaceChild(B.pre,d.text);d.text=B.pre;B.bgClass!=d.bgClass||B.textClass!=d.textClass?(d.bgClass=B.bgClass,d.textClass=B.textClass,qd(u,d)):m&&(d.text.className=m)}else if("gutter"==u)ue(a,b,c,e);else if("class"==u)qd(a,b);else if("widget"==u){u=a;d=b;m=e;d.alignable&&(d.alignable=null);B=f("CodeMirror-linewidget");for(var h=d.node.firstChild,k;h;h=k)k=h.nextSibling,B.test(h.className)&&d.node.removeChild(h);ve(u,d,m)}}b.changes=null}function Tb(a){a.node==
a.text&&(a.node=z("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),ba&&8>fa&&(a.node.style.zIndex=2));return a.node}function te(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):pe(a,b)}function qd(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;c&&(c+=" CodeMirror-linebackground");if(b.background)c?b.background.className=
c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var e=Tb(b);b.background=e.insertBefore(z("div",null,c),e.firstChild);a.display.input.setUneditable(b.background)}b.line.wrapClass?Tb(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");b.text.className=(b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass)||""}function ue(a,b,c,e){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),
b.gutterBackground=null);if(b.line.gutterClass){var g=Tb(b);b.gutterBackground=z("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px; width: "+e.gutterTotalWidth+"px");a.display.input.setUneditable(b.gutterBackground);g.insertBefore(b.gutterBackground,b.text)}g=b.line.gutterMarkers;if(a.options.lineNumbers||g){var u=Tb(b),d=b.gutter=z("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+
"px");a.display.input.setUneditable(d);u.insertBefore(d,b.text);b.line.gutterClass&&(d.className+=" "+b.line.gutterClass);!a.options.lineNumbers||g&&g["CodeMirror-linenumbers"]||(b.lineNumber=d.appendChild(z("div",dd(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(g)for(b=0;b<a.display.gutterSpecs.length;++b)c=a.display.gutterSpecs[b].className,(u=g.hasOwnProperty(c)&&g[c])&&d.appendChild(z("div",
[u],"CodeMirror-gutter-elt","left: "+e.gutterLeft[c]+"px; width: "+e.gutterWidth[c]+"px"))}}function rg(a,b,c,e){var g=te(a,b);b.text=b.node=g.pre;g.bgClass&&(b.bgClass=g.bgClass);g.textClass&&(b.textClass=g.textClass);qd(a,b);ue(a,b,c,e);ve(a,b,e);return b.node}function ve(a,b,c){we(a,b.line,b,c,!0);if(b.rest)for(var e=0;e<b.rest.length;e++)we(a,b.rest[e],b,c,!1)}function we(a,b,c,e,g){if(b.widgets){var u=Tb(c),d=0;for(b=b.widgets;d<b.length;++d){var m=b[d],B=z("div",[m.node],"CodeMirror-linewidget"+
(m.className?" "+m.className:""));m.handleMouseEvents||B.setAttribute("cm-ignore-events","true");var f=m,h=B,k=e;if(f.noHScroll){(c.alignable||(c.alignable=[])).push(h);var l=k.wrapperWidth;h.style.left=k.fixedPos+"px";f.coverGutter||(l-=k.gutterTotalWidth,h.style.paddingLeft=k.gutterTotalWidth+"px");h.style.width=l+"px"}f.coverGutter&&(h.style.zIndex=5,h.style.position="relative",f.noHScroll||(h.style.marginLeft=-k.gutterTotalWidth+"px"));a.display.input.setUneditable(B);g&&m.above?u.insertBefore(B,
c.gutter||c.text):u.appendChild(B);sa(m,"redraw")}}}function Ub(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!P(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");E(b.display.measure,z("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function Va(a,b){for(b=b.target||b.srcElement;b!=a.wrapper;b=b.parentNode)if(!b||1==
b.nodeType&&"true"==b.getAttribute("cm-ignore-events")||b.parentNode==a.sizer&&b!=a.mover)return!0}function rd(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function xe(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=E(a.measure,z("pre","x","CodeMirror-line-like"));b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle;b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function Qa(a){return 30-a.display.nativeBarWidth}
function hb(a){return a.display.scroller.clientWidth-Qa(a)-a.display.barWidth}function sd(a){return a.display.scroller.clientHeight-Qa(a)-a.display.barHeight}function ye(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var e=0;e<a.rest.length;e++)if(a.rest[e]==b)return{map:a.measure.maps[e],cache:a.measure.caches[e]};for(b=0;b<a.rest.length;b++)if(X(a.rest[b])>c)return{map:a.measure.maps[b],cache:a.measure.caches[b],before:!0}}function td(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[ib(a,
b)];if((a=a.display.externalMeasured)&&b>=a.lineN&&b<a.lineN+a.size)return a}function jb(a,b){var c=X(b),e=td(a,c);e&&!e.text?e=null:e&&e.changes&&(se(a,e,c,ud(a)),a.curOp.forceUpdate=!0);if(!e){var g=Oa(b);e=X(g);g=a.display.externalMeasured=new re(a.doc,g,e);g.lineN=e;e=g.built=pe(a,g);g.text=e.pre;E(a.display.lineMeasure,e.pre);e=g}a=ye(e,b,c);return{line:b,view:e,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function Ja(a,b,c,e,g){b.before&&(c=-1);var u=c+(e||"");if(b.cache.hasOwnProperty(u))a=
b.cache[u];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var d=b.view,m=b.rect,B=a.options.lineWrapping,f=B&&hb(a);if(!d.measure.heights||B&&d.measure.width!=f){var h=d.measure.heights=[];if(B)for(d.measure.width=f,d=d.text.firstChild.getClientRects(),B=0;B<d.length-1;B++){f=d[B];var k=d[B+1];2<Math.abs(f.bottom-k.bottom)&&h.push((f.bottom+k.top)/2-m.top)}h.push(m.bottom-m.top)}b.hasHeights=!0}h=e;d=ze(b.map,c,h);e=d.node;m=d.start;B=d.end;c=d.collapse;if(3==e.nodeType){for(var l=
0;4>l;l++){for(;m&&Y(b.line.text.charAt(d.coverStart+m));)--m;for(;d.coverStart+B<d.coverEnd&&Y(b.line.text.charAt(d.coverStart+B));)++B;if(ba&&9>fa&&0==m&&B==d.coverEnd-d.coverStart)var n=e.parentNode.getBoundingClientRect();else{n=Rb(e,m,B).getClientRects();B=Ae;if("left"==h)for(f=0;f<n.length&&(B=n[f]).left==B.right;f++);else for(f=n.length-1;0<=f&&(B=n[f]).left==B.right;f--);n=B}if(n.left||n.right||0==m)break;B=m;--m;c="right"}ba&&11>fa&&((l=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==
screen.deviceXDPI)||(null!=vd?l=vd:(h=E(a.display.measure,z("span","x")),l=h.getBoundingClientRect(),h=Rb(h,0,1).getBoundingClientRect(),l=vd=1<Math.abs(l.left-h.left)),l=!l),l||(l=screen.logicalXDPI/screen.deviceXDPI,h=screen.logicalYDPI/screen.deviceYDPI,n={left:n.left*l,right:n.right*l,top:n.top*h,bottom:n.bottom*h}))}else 0<m&&(c=h="right"),n=a.options.lineWrapping&&1<(l=e.getClientRects()).length?l["right"==h?l.length-1:0]:e.getBoundingClientRect();!(ba&&9>fa)||m||n&&(n.left||n.right)||(n=(n=
e.parentNode.getClientRects()[0])?{left:n.left,right:n.left+yb(a.display),top:n.top,bottom:n.bottom}:Ae);e=n.top-b.rect.top;m=n.bottom-b.rect.top;l=(e+m)/2;h=b.view.measure.heights;for(d=0;d<h.length-1&&!(l<h[d]);d++);c={left:("right"==c?n.right:n.left)-b.rect.left,right:("left"==c?n.left:n.right)-b.rect.left,top:d?h[d-1]:0,bottom:h[d]};n.left||n.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=e,c.rbottom=m);a=c;a.bogus||(b.cache[u]=a)}return{left:a.left,right:a.right,top:g?a.rtop:
a.top,bottom:g?a.rbottom:a.bottom}}function ze(a,b,c){for(var e,g,u,d,m,B,f=0;f<a.length;f+=3){m=a[f];B=a[f+1];if(b<m)g=0,u=1,d="left";else if(b<B)g=b-m,u=g+1;else if(f==a.length-3||b==B&&a[f+3]>b)u=B-m,g=u-1,b>=B&&(d="right");if(null!=g){e=a[f+2];m==B&&c==(e.insertLeft?"left":"right")&&(d=c);if("left"==c&&0==g)for(;f&&a[f-2]==a[f-3]&&a[f-1].insertLeft;)e=a[(f-=3)+2],d="left";if("right"==c&&g==B-m)for(;f<a.length-3&&a[f+3]==a[f+4]&&!a[f+5].insertLeft;)e=a[(f+=3)+2],d="right";break}}return{node:e,
start:g,end:u,collapse:d,coverStart:m,coverEnd:B}}function Be(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Ce(a){a.display.externalMeasure=null;J(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Be(a.display.view[b])}function Vb(a){Ce(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}
function De(){return Gc&&Hc?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ee(){return Gc&&Hc?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function wd(a){var b=0;if(a.widgets)for(var c=0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=Ub(a.widgets[c]));
return b}function Ic(a,b,c,e,g){g||(g=wd(b),c.top+=g,c.bottom+=g);if("line"==e)return c;e||(e="local");b=Pa(b);b="local"==e?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==e||"window"==e)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==e?0:Ee()),e=a.left+("window"==e?0:De()),c.left+=e,c.right+=e;c.top+=b;c.bottom+=b;return c}function Fe(a,b,c){if("div"==c)return b;var e=b.left;b=b.top;"page"==c?(e-=De(),b-=Ee()):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),
e+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:e-a.left,top:b-a.top}}function xd(a,b,c,e,g){e||(e=A(a.doc,b.line));var u=e;b=b.ch;e=Ja(a,jb(a,e),b,g);return Ic(a,u,e,c)}function Ka(a,b,c,e,g,u){function d(b,d){b=Ja(a,g,b,d?"right":"left",u);d?b.left=b.right:b.right=b.left;return Ic(a,e,b,c)}function m(a,b,e){return d(e?a-1:a,1==f[b].level!=e)}e=e||A(a.doc,b.line);g||(g=jb(a,e));var f=ha(e,a.doc.direction),h=b.ch;b=b.sticky;h>=e.text.length?(h=e.text.length,b="before"):
0>=h&&(h=0,b="after");if(!f)return d("before"==b?h-1:h,"before"==b);var k=n(f,h,b),l=Ob;k=m(h,k,"before"==b);null!=l&&(k.other=m(h,l,"before"!=b));return k}function Ge(a,b){var c=0;b=M(a.doc,b);a.options.lineWrapping||(c=yb(a.display)*b.ch);b=A(a.doc,b.line);a=Pa(b)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:a,bottom:a+b.height}}function yd(a,b,c,e,g){a=C(a,b,c);a.xRel=g;e&&(a.outside=e);return a}function zd(a,b,c){var e=a.doc;c+=a.display.viewOffset;if(0>c)return yd(e.first,0,null,-1,
-1);var g=ka(e,c),u=e.first+e.size-1;if(g>u)return yd(e.first+e.size-1,A(e,u).text.length,null,1,1);0>b&&(b=0);for(var d=A(e,g);;){u=sg(a,d,g,b,c);var m=void 0;var f=u.ch+(0<u.xRel||0<u.outside?1:0);if(d=Ua&&d.markedSpans)for(var h=0;h<d.length;++h){var k=d[h];k.marker.collapsed&&(null==k.from||k.from<f)&&(null==k.to||k.to>f)&&(!m||0>ld(m,k.marker))&&(m=k.marker)}if(!m)return u;u=m.find(1);if(u.line==g)return u;d=A(e,g=u.line)}}function He(a,b,c,e){e-=wd(b);b=b.text.length;var g=aa(function(b){return Ja(a,
c,b-1).bottom<=e},b,0);b=aa(function(b){return Ja(a,c,b).top>e},g,b);return{begin:g,end:b}}function Ie(a,b,c,e){c||(c=jb(a,b));e=Ic(a,b,Ja(a,c,e),"line").top;return He(a,b,c,e)}function Ad(a,b,c,e){return a.bottom<=c?!1:a.top>c?!0:(e?a.left:a.right)>b}function sg(a,b,c,e,g){g-=Pa(b);var d=jb(a,b),r=wd(b),m=0,f=b.text.length,h=!0,k=ha(b,a.doc.direction);k&&(k=(a.options.lineWrapping?tg:ug)(a,b,c,d,k,e,g),m=(h=1!=k.level)?k.from:k.to-1,f=h?k.to:k.from-1);var l=null,n=null;k=aa(function(b){var c=Ja(a,
d,b);c.top+=r;c.bottom+=r;if(!Ad(c,e,g,!1))return!1;c.top<=g&&c.left<=e&&(l=b,n=c);return!0},m,f);var p=!1;n?(m=e-n.left<n.right-e,h=m==h,k=l+(h?0:1),h=h?"after":"before",m=m?n.left:n.right):(h||k!=f&&k!=m||k++,h=0==k?"after":k==b.text.length?"before":Ja(a,d,k-(h?1:0)).bottom+r<=g==h?"after":"before",p=Ka(a,C(c,k,h),"line",b,d),m=p.left,p=g<p.top?-1:g>=p.bottom?1:0);k=Q(b.text,k,1);return yd(c,k,h,p,e-m)}function ug(a,b,c,e,g,d,r){var u=aa(function(u){u=g[u];var m=1!=u.level;return Ad(Ka(a,C(c,m?
u.to:u.from,m?"before":"after"),"line",b,e),d,r,!0)},0,g.length-1),f=g[u];if(0<u){var h=1!=f.level;h=Ka(a,C(c,h?f.from:f.to,h?"after":"before"),"line",b,e);Ad(h,d,r,!0)&&h.top>r&&(f=g[u-1])}return f}function tg(a,b,c,e,g,d,r){r=He(a,b,e,r);c=r.begin;r=r.end;/\s/.test(b.text.charAt(r-1))&&r--;for(var u=b=null,f=0;f<g.length;f++){var h=g[f];if(!(h.from>=r||h.to<=c)){var k=Ja(a,e,1!=h.level?Math.min(r,h.to)-1:Math.max(c,h.from)).right;k=k<d?d-k+1E9:k-d;if(!b||u>k)b=h,u=k}}b||(b=g[g.length-1]);b.from<
c&&(b={from:c,to:b.to,level:b.level});b.to>r&&(b={from:b.from,to:r,level:b.level});return b}function zb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==kb){kb=z("pre",null,"CodeMirror-line-like");for(var b=0;49>b;++b)kb.appendChild(document.createTextNode("x")),kb.appendChild(z("br"));kb.appendChild(document.createTextNode("x"))}E(a.measure,kb);b=kb.offsetHeight/50;3<b&&(a.cachedTextHeight=b);J(a.measure);return b||1}function yb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;
var b=z("span","xxxxxxxxxx"),c=z("pre",[b],"CodeMirror-line-like");E(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function ud(a){for(var b=a.display,c={},e={},g=b.gutters.clientLeft,d=b.gutters.firstChild,r=0;d;d=d.nextSibling,++r){var m=a.display.gutterSpecs[r].className;c[m]=d.offsetLeft+d.clientLeft+g;e[m]=d.clientWidth}return{fixedPos:Bd(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:e,wrapperWidth:b.wrapper.clientWidth}}
function Bd(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Je(a){var b=zb(a.display),c=a.options.lineWrapping,e=c&&Math.max(5,a.display.scroller.clientWidth/yb(a.display)-3);return function(g){if(Za(a.doc,g))return 0;var d=0;if(g.widgets)for(var r=0;r<g.widgets.length;r++)g.widgets[r].height&&(d+=g.widgets[r].height);return c?d+(Math.ceil(g.text.length/e)||1)*b:d+b}}function Cd(a){var b=a.doc,c=Je(a);b.iter(function(a){var b=c(a);b!=a.height&&na(a,
b)})}function lb(a,b,c,e){var g=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;c=g.lineSpace.getBoundingClientRect();try{var d=b.clientX-c.left;var r=b.clientY-c.top}catch(B){return null}b=zd(a,d,r);var m;e&&0<b.xRel&&(m=A(a.doc,b.line).text).length==b.ch&&(e=w(m,m.length,a.options.tabSize)-m.length,b=C(b.line,Math.max(0,Math.round((d-xe(a.display).left)/yb(a.display))-e)));return b}function ib(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;
if(0>b)return null;a=a.display.view;for(var c=0;c<a.length;c++)if(b-=a[c].size,0>b)return c}function za(a,b,c,e){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);e||(e=0);var g=a.display;e&&c<g.viewTo&&(null==g.updateLineNumbers||g.updateLineNumbers>b)&&(g.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=g.viewTo)Ua&&md(a.doc,b)<g.viewTo&&$a(a);else if(c<=g.viewFrom)Ua&&ne(a.doc,c+e)>g.viewFrom?$a(a):(g.viewFrom+=e,g.viewTo+=e);else if(b<=g.viewFrom&&c>=g.viewTo)$a(a);else if(b<=g.viewFrom){var d=
Jc(a,c,c+e,1);d?(g.view=g.view.slice(d.index),g.viewFrom=d.lineN,g.viewTo+=e):$a(a)}else if(c>=g.viewTo)(d=Jc(a,b,b,-1))?(g.view=g.view.slice(0,d.index),g.viewTo=d.lineN):$a(a);else{d=Jc(a,b,b,-1);var r=Jc(a,c,c+e,1);d&&r?(g.view=g.view.slice(0,d.index).concat(Fc(a,d.lineN,r.lineN)).concat(g.view.slice(r.index)),g.viewTo+=e):$a(a)}if(a=g.externalMeasured)c<a.lineN?a.lineN+=e:b<a.lineN+a.size&&(g.externalMeasured=null)}function ab(a,b,c){a.curOp.viewChanged=!0;var e=a.display,g=a.display.externalMeasured;
g&&b>=g.lineN&&b<g.lineN+g.size&&(e.externalMeasured=null);b<e.viewFrom||b>=e.viewTo||(a=e.view[ib(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==d(a,c)&&a.push(c)))}function $a(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Jc(a,b,c,e){var g=ib(a,b),d=a.display.view;if(!Ua||c==a.doc.first+a.doc.size)return{index:g,lineN:c};for(var r=a.display.viewFrom,m=0;m<g;m++)r+=d[m].size;if(r!=b){if(0<e){if(g==d.length-1)return null;b=r+d[g].size-b;
g++}else b=r-b;c+=b}for(;md(a.doc,c)!=c;){if(g==(0>e?0:d.length-1))return null;c+=e*d[g-(0>e?1:0)].size;g+=e}return{index:g,lineN:c}}function Ke(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var e=a[c];e.hidden||e.node&&!e.changes||++b}return b}function Wb(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Le(a,b){void 0===b&&(b=!0);for(var c=a.doc,e={},g=e.cursors=document.createDocumentFragment(),d=e.selection=document.createDocumentFragment(),r=0;r<c.sel.ranges.length;r++)if(b||
r!=c.sel.primIndex){var m=c.sel.ranges[r];if(!(m.from().line>=a.display.viewTo||m.to().line<a.display.viewFrom)){var f=m.empty();(f||a.options.showCursorWhenSelecting)&&Me(a,m.head,g);f||vg(a,m,d)}}return e}function Me(a,b,c){b=Ka(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var e=c.appendChild(z("div","\u00a0","CodeMirror-cursor"));e.style.left=b.left+"px";e.style.top=b.top+"px";e.style.height=Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px";b.other&&(a=c.appendChild(z("div","\u00a0",
"CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.other.left+"px",a.style.top=b.other.top+"px",a.style.height=.85*(b.other.bottom-b.other.top)+"px")}function Kc(a,b){return a.top-b.top||a.left-b.left}function vg(a,b,c){function e(a,b,e,c){0>b&&(b=0);b=Math.round(b);c=Math.round(c);m.appendChild(z("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+b+"px; width: "+(null==e?k-a:e)+"px;\n                             height: "+
(c-b)+"px"))}function g(b,c,g){function d(e,c){return xd(a,C(b,e),"div",m,c)}function u(b,e,c){b=Ie(a,m,null,b);e="ltr"==e==("after"==c)?"left":"right";c="after"==c?b.begin:b.end-(/\s/.test(m.text.charAt(b.end-1))?2:1);return d(c,e)[e]}var m=A(r,b),f=m.text.length,B,l,q=ha(m,r.direction);p(q,c||0,null==g?f:g,function(a,b,m,r){var p="ltr"==m,t=d(a,p?"left":"right"),Ea=d(b-1,p?"right":"left"),w=null==c&&0==a,y=null==g&&b==f,x=0==r;r=!q||r==q.length-1;3>=Ea.top-t.top?(b=(n?w:y)&&x?h:(p?t:Ea).left,e(b,
t.top,((n?y:w)&&r?k:(p?Ea:t).right)-b,t.bottom)):(p?(p=n&&w&&x?h:t.left,w=n?k:u(a,m,"before"),a=n?h:u(b,m,"after"),y=n&&y&&r?k:Ea.right):(p=n?u(a,m,"before"):h,w=!n&&w&&x?k:t.right,a=!n&&y&&r?h:Ea.left,y=n?u(b,m,"after"):k),e(p,t.top,w-p,t.bottom),t.bottom<Ea.top&&e(h,t.bottom,null,Ea.top),e(a,Ea.top,y-a,Ea.bottom));if(!B||0>Kc(t,B))B=t;0>Kc(Ea,B)&&(B=Ea);if(!l||0>Kc(t,l))l=t;0>Kc(Ea,l)&&(l=Ea)});return{start:B,end:l}}var d=a.display,r=a.doc,m=document.createDocumentFragment(),f=xe(a.display),h=f.left,
k=Math.max(d.sizerWidth,hb(a)-d.sizer.offsetLeft)-f.right,n="ltr"==r.direction;d=b.from();b=b.to();if(d.line==b.line)g(d.line,d.ch,b.ch);else{var l=A(r,d.line);f=A(r,b.line);f=Oa(l)==Oa(f);d=g(d.line,d.ch,f?l.text.length+1:null).end;b=g(b.line,f?0:null,b.ch).start;f&&(d.top<b.top-2?(e(d.right,d.top,null,d.bottom),e(h,b.top,b.left,b.bottom)):e(d.right,d.top,b.left-d.right,d.bottom));d.bottom<b.top&&e(h,d.bottom,null,b.top)}c.appendChild(m)}function Dd(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);
var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function Ne(a){a.state.focused||(a.display.input.focus(),Ed(a))}function Oe(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Xb(a))},100)}function Ed(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=
!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(V(a,"focus",a,b),a.state.focused=!0,v(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),wa&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Dd(a))}function Xb(a,b){a.state.delayingBlurEvent||(a.state.focused&&(V(a,"blur",a,b),a.state.focused=!1,mb(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||
(a.display.shift=!1)},150))}function Lc(a){for(var b=a.display,c=b.lineDiv.offsetTop,e=0;e<b.view.length;e++){var g=b.view[e],d=a.options.lineWrapping,r=0;if(!g.hidden){if(ba&&8>fa){d=g.node.offsetTop+g.node.offsetHeight;var m=d-c;c=d}else{var f=g.node.getBoundingClientRect();m=f.bottom-f.top;!d&&g.text.firstChild&&(r=g.text.firstChild.getBoundingClientRect().right-f.left-1)}d=g.line.height-m;if(.005<d||-.005>d)if(na(g.line,m),Pe(g.line),g.rest)for(m=0;m<g.rest.length;m++)Pe(g.rest[m]);r>a.display.sizerWidth&&
(r=Math.ceil(r/yb(a.display)),r>a.display.maxLineLength&&(a.display.maxLineLength=r,a.display.maxLine=g.line,a.display.maxLineChanged=!0))}}}function Pe(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],e=c.node.parentNode;e&&(c.height=e.offsetHeight)}}function Mc(a,b,c){var e=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;e=Math.floor(e-a.lineSpace.offsetTop);var g=c&&null!=c.bottom?c.bottom:e+a.wrapper.clientHeight;e=ka(b,e);g=ka(b,g);if(c&&c.ensure){var d=c.ensure.from.line;
c=c.ensure.to.line;d<e?(e=d,g=ka(b,Pa(A(b,d))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=g&&(e=ka(b,Pa(A(b,c))-a.wrapper.clientHeight),g=c)}return{from:e,to:Math.max(g,e+1)}}function Fd(a,b){var c=a.display,e=zb(a.display);0>b.top&&(b.top=0);var g=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,d=sd(a),r={};b.bottom-b.top>d&&(b.bottom=b.top+d);var m=a.doc.height+rd(c),f=b.top<e;e=b.bottom>m-e;b.top<g?r.scrollTop=f?0:b.top:b.bottom>g+d&&(d=Math.min(b.top,(e?m:b.bottom)-
d),d!=g&&(r.scrollTop=d));g=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft;a=hb(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0);if(c=b.right-b.left>a)b.right=b.left+a;10>b.left?r.scrollLeft=0:b.left<g?r.scrollLeft=Math.max(0,b.left-(c?0:10)):b.right>a+g-3&&(r.scrollLeft=b.right+(c?0:10)-a);return r}function Nc(a,b){null!=b&&(Oc(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function Ab(a){Oc(a);var b=a.getCursor();a.curOp.scrollToPos=
{from:b,to:b,margin:a.options.cursorScrollMargin}}function Yb(a,b,c){null==b&&null==c||Oc(a);null!=b&&(a.curOp.scrollLeft=b);null!=c&&(a.curOp.scrollTop=c)}function Oc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Ge(a,b.from),e=Ge(a,b.to);Qe(a,c,e,b.margin)}}function Qe(a,b,c,e){b=Fd(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-e,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+e});Yb(a,b.scrollLeft,b.scrollTop)}function Zb(a,b){2>Math.abs(a.doc.scrollTop-
b)||(Wa||Gd(a,{top:b}),Re(a,b,!0),Wa&&Gd(a),$b(a,100))}function Re(a,b,c){b=Math.max(0,Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b));if(a.display.scroller.scrollTop!=b||c)a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b)}function nb(a,b,c,e){b=Math.max(0,Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth));(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))&&!e||(a.doc.scrollLeft=
b,Se(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function ac(a){var b=a.display,c=b.gutters.offsetWidth,e=Math.round(a.doc.height+rd(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:e,scrollHeight:e+Qa(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,
gutterWidth:c}}function Bb(a,b){b||(b=ac(a));var c=a.display.barWidth,e=a.display.barHeight;Te(a,b);for(b=0;4>b&&c!=a.display.barWidth||e!=a.display.barHeight;b++)c!=a.display.barWidth&&a.options.lineWrapping&&Lc(a),Te(a,ac(a)),c=a.display.barWidth,e=a.display.barHeight}function Te(a,b){var c=a.display,e=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=e.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=e.bottom)+"px";c.heightForcer.style.borderBottom=e.bottom+"px solid transparent";
e.right&&e.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=e.bottom+"px",c.scrollbarFiller.style.width=e.right+"px"):c.scrollbarFiller.style.display="";e.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=e.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function Ue(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&
mb(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new Ve[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);I(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?nb(a,b):Zb(a,b)},a);a.display.scrollbars.addClass&&v(a.display.wrapper,a.display.scrollbars.addClass)}function ob(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,
forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++wg};a=a.curOp;xb?xb.ops.push(a):a.ownsGroup=xb={ops:[a],delayedCallbacks:[]}}function pb(a){(a=a.curOp)&&pg(a,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var e=a[b],g=e.cm,d=g.display,r=g.display;!r.scrollbarsClipped&&r.scroller.offsetWidth&&
(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=Qa(g)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=Qa(g)+"px",r.scrollbarsClipped=!0);e.updateMaxLine&&od(g);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&g.options.lineWrapping;e.update=e.mustUpdate&&new Pc(g,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},
e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&Hd(e.cm,e.update);for(b=0;b<a.length;b++)if(e=a[b],g=e.cm,d=g.display,e.updatedDisplay&&Lc(g),e.barMeasure=ac(g),d.maxLineChanged&&!g.options.lineWrapping&&(r=d.maxLine.text.length,r=Ja(g,jb(g,d.maxLine),r,void 0),e.adjustWidthTo=r.left+3,g.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+Qa(g)+g.display.barWidth),e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+
e.adjustWidthTo-hb(g))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection();for(b=0;b<a.length;b++)e=a[b],g=e.cm,null!=e.adjustWidthTo&&(g.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<g.doc.scrollLeft&&nb(g,Math.min(g.display.scroller.scrollLeft,e.maxScrollLeft),!0),g.display.maxLineChanged=!1),d=e.focus&&e.focus==K(),e.preparedSelection&&g.display.input.showSelection(e.preparedSelection,d),(e.updatedDisplay||e.startHeight!=g.doc.height)&&Bb(g,
e.barMeasure),e.updatedDisplay&&Id(g,e.barMeasure),e.selectionChanged&&Dd(g),g.state.focused&&e.updateInput&&g.display.input.reset(e.typing),d&&Ne(e.cm);for(b=0;b<a.length;b++){var m=void 0;e=a[b];g=e.cm;d=g.display;r=g.doc;e.updatedDisplay&&We(g,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null!=e.scrollTop&&Re(g,e.scrollTop,e.forceScroll);null!=e.scrollLeft&&nb(g,e.scrollLeft,!0,!0);if(e.scrollToPos){var f=M(r,e.scrollToPos.from);
var h=M(r,e.scrollToPos.to);var k=e.scrollToPos.margin;null==k&&(k=0);g.options.lineWrapping||f!=h||(f=f.ch?C(f.line,"before"==f.sticky?f.ch-1:f.ch,"after"):f,h="before"==f.sticky?C(f.line,f.ch+1,"before"):f);for(var n=0;5>n;n++){var l=!1;m=Ka(g,f);var p=h&&h!=f?Ka(g,h):m;m={left:Math.min(m.left,p.left),top:Math.min(m.top,p.top)-k,right:Math.max(m.left,p.left),bottom:Math.max(m.bottom,p.bottom)+k};p=Fd(g,m);var q=g.doc.scrollTop,t=g.doc.scrollLeft;null!=p.scrollTop&&(Zb(g,p.scrollTop),1<Math.abs(g.doc.scrollTop-
q)&&(l=!0));null!=p.scrollLeft&&(nb(g,p.scrollLeft),1<Math.abs(g.doc.scrollLeft-t)&&(l=!0));if(!l)break}h=m;W(g,"scrollCursorIntoView")||(k=g.display,n=k.sizer.getBoundingClientRect(),f=null,0>h.top+n.top?f=!0:h.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(f=!1),null==f||xg||(h=z("div","\u200b",null,"position: absolute;\n                         top: "+(h.top-k.viewOffset-g.display.lineSpace.offsetTop)+"px;\n                         height: "+(h.bottom-h.top+Qa(g)+k.barHeight)+
"px;\n                         left: "+h.left+"px; width: "+Math.max(2,h.right-h.left)+"px;"),g.display.lineSpace.appendChild(h),h.scrollIntoView(f),g.display.lineSpace.removeChild(h)))}h=e.maybeHiddenMarkers;f=e.maybeUnhiddenMarkers;if(h)for(k=0;k<h.length;++k)h[k].lines.length||V(h[k],"hide");if(f)for(h=0;h<f.length;++h)f[h].lines.length&&V(f[h],"unhide");d.wrapper.offsetHeight&&(r.scrollTop=g.display.scroller.scrollTop);e.changeObjs&&V(g,"changes",g,e.changeObjs);e.update&&e.update.finish()}})}
function Ba(a,b){if(a.curOp)return b();ob(a);try{return b()}finally{pb(a)}}function pa(a,b){return function(){if(a.curOp)return b.apply(a,arguments);ob(a);try{return b.apply(a,arguments)}finally{pb(a)}}}function xa(a){return function(){if(this.curOp)return a.apply(this,arguments);ob(this);try{return a.apply(this,arguments)}finally{pb(this)}}}function qa(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);ob(b);try{return a.apply(this,arguments)}finally{pb(b)}}}function $b(a,
b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,q(yg,a))}function yg(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,e=Pb(a,b.highlightFrontier),g=[];b.iter(e.line,Math.min(b.first+b.size,a.display.viewTo+500),function(d){if(e.line>=a.display.viewFrom){var u=d.styles,m=d.text.length>a.options.maxHighlightLength?x(b.mode,e.state):null,f=ce(a,d,e,!0);m&&(e.state=m);d.styles=f.styles;m=d.styleClasses;(f=f.classes)?d.styleClasses=f:m&&
(d.styleClasses=null);f=!u||u.length!=d.styles.length||m!=f&&(!m||!f||m.bgClass!=f.bgClass||m.textClass!=f.textClass);for(m=0;!f&&m<u.length;++m)f=u[m]!=d.styles[m];f&&g.push(e.line);d.stateAfter=e.save()}else d.text.length<=a.options.maxHighlightLength&&id(a,d.text,e),d.stateAfter=0==e.line%5?e.save():null;e.nextLine();if(+new Date>c)return $b(a,a.options.workDelay),!0});b.highlightFrontier=e.line;b.modeFrontier=Math.max(b.modeFrontier,e.line);g.length&&Ba(a,function(){for(var b=0;b<g.length;b++)ab(a,
g[b],"text")})}}function Hd(a,b){var c=a.display,e=a.doc;if(b.editorIsHidden)return $a(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Ke(a))return!1;Xe(a)&&($a(a),b.dims=ud(a));var g=e.first+e.size,d=Math.max(b.visible.from-a.options.viewportMargin,e.first),r=Math.min(g,b.visible.to+a.options.viewportMargin);c.viewFrom<d&&20>d-c.viewFrom&&(d=Math.max(e.first,c.viewFrom));c.viewTo>r&&20>c.viewTo-
r&&(r=Math.min(g,c.viewTo));Ua&&(d=md(a.doc,d),r=ne(a.doc,r));e=d!=c.viewFrom||r!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;g=a.display;0==g.view.length||d>=g.viewTo||r<=g.viewFrom?(g.view=Fc(a,d,r),g.viewFrom=d):(g.viewFrom>d?g.view=Fc(a,d,g.viewFrom).concat(g.view):g.viewFrom<d&&(g.view=g.view.slice(ib(a,d))),g.viewFrom=d,g.viewTo<r?g.view=g.view.concat(Fc(a,g.viewTo,r)):g.viewTo>r&&(g.view=g.view.slice(0,ib(a,r))));g.viewTo=r;c.viewOffset=Pa(A(a.doc,c.viewFrom));
a.display.mover.style.top=c.viewOffset+"px";r=Ke(a);if(!e&&0==r&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;a.hasFocus()?d=null:(d=K())&&P(a.display.lineDiv,d)?(d={activeElt:d},window.getSelection&&(g=window.getSelection(),g.anchorNode&&g.extend&&P(a.display.lineDiv,g.anchorNode)&&(d.anchorNode=g.anchorNode,d.anchorOffset=g.anchorOffset,d.focusNode=g.focusNode,d.focusOffset=g.focusOffset))):d=null;4<r&&(c.lineDiv.style.display="none");zg(a,
c.updateLineNumbers,b.dims);4<r&&(c.lineDiv.style.display="");c.renderedView=c.view;(r=d)&&r.activeElt&&r.activeElt!=K()&&(r.activeElt.focus(),r.anchorNode&&P(document.body,r.anchorNode)&&P(document.body,r.focusNode)&&(d=window.getSelection(),g=document.createRange(),g.setEnd(r.anchorNode,r.anchorOffset),g.collapse(!1),d.removeAllRanges(),d.addRange(g),d.extend(r.focusNode,r.focusOffset)));J(c.cursorDiv);J(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;e&&(c.lastWrapHeight=b.wrapperHeight,
c.lastWrapWidth=b.wrapperWidth,$b(a,400));c.updateLineNumbers=null;return!0}function We(a,b){for(var c=b.viewport,e=!0;;e=!1){if(e&&a.options.lineWrapping&&b.oldDisplayWidth!=hb(a))e&&(b.visible=Mc(a.display,a.doc,c));else if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+rd(a.display)-sd(a),c.top)}),b.visible=Mc(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!Hd(a,b))break;Lc(a);e=ac(a);Wb(a);Bb(a,e);Id(a,e);b.force=!1}b.signal(a,"update",a);if(a.display.viewFrom!=
a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function Gd(a,b){b=new Pc(a,b);if(Hd(a,b)){Lc(a);We(a,b);var c=ac(a);Wb(a);Bb(a,c);Id(a,c);b.finish()}}function zg(a,b,c){function e(b){var e=b.nextSibling;wa&&Ha&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return e}var g=a.display,u=a.options.lineNumbers,
r=g.lineDiv,m=r.firstChild,f=g.view;g=g.viewFrom;for(var h=0;h<f.length;h++){var k=f[h];if(!k.hidden)if(k.node&&k.node.parentNode==r){for(;m!=k.node;)m=e(m);m=u&&null!=b&&b<=g&&k.lineNumber;k.changes&&(-1<d(k.changes,"gutter")&&(m=!1),se(a,k,g,c));m&&(J(k.lineNumber),k.lineNumber.appendChild(document.createTextNode(dd(a.options,g))));m=k.node.nextSibling}else{var n=rg(a,k,g,c);r.insertBefore(n,m)}g+=k.size}for(;m;)m=e(m)}function Jd(a){a.sizer.style.marginLeft=a.gutters.offsetWidth+"px"}function Id(a,
b){a.display.sizer.style.minHeight=b.docHeight+"px";a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=b.docHeight+a.display.barHeight+Qa(a)+"px"}function Se(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var e=Bd(b)-b.scroller.scrollLeft+a.doc.scrollLeft,g=b.gutters.offsetWidth,d=e+"px",r=0;r<c.length;r++)if(!c[r].hidden){a.options.fixedGutter&&(c[r].gutter&&(c[r].gutter.style.left=d),c[r].gutterBackground&&(c[r].gutterBackground.style.left=
d));var m=c[r].alignable;if(m)for(var f=0;f<m.length;f++)m[f].style.left=d}a.options.fixedGutter&&(b.gutters.style.left=e+g+"px")}}function Xe(a){if(!a.options.lineNumbers)return!1;var b=a.doc;b=dd(a.options,b.first+b.size-1);var c=a.display;if(b.length!=c.lineNumChars){var e=c.measure.appendChild(z("div",[z("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),g=e.firstChild.offsetWidth;e=e.offsetWidth-g;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(g,c.lineGutter.offsetWidth-e)+1;
c.lineNumWidth=c.lineNumInnerWidth+e;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";Jd(a.display);return!0}return!1}function Kd(a,b){for(var c=[],e=!1,g=0;g<a.length;g++){var d=a[g],r=null;"string"!=typeof d&&(r=d.style,d=d.className);if("CodeMirror-linenumbers"==d)if(b)e=!0;else continue;c.push({className:d,style:r})}b&&!e&&c.push({className:"CodeMirror-linenumbers",style:null});return c}function Ye(a){var b=a.gutters,c=a.gutterSpecs;J(b);a.lineGutter=
null;for(var e=0;e<c.length;++e){var g=c[e],d=g.className;g=g.style;var r=b.appendChild(z("div",null,"CodeMirror-gutter "+d));g&&(r.style.cssText=g);"CodeMirror-linenumbers"==d&&(a.lineGutter=r,r.style.width=(a.lineNumWidth||1)+"px")}b.style.display=c.length?"":"none";Jd(a)}function bc(a){Ye(a.display);za(a);Se(a)}function Ag(a,b,c,e){this.input=c;this.scrollbarFiller=z("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=z("div",null,
"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=D("div",null,"CodeMirror-code");this.selectionDiv=z("div",null,null,"position: relative; z-index: 1");this.cursorDiv=z("div",null,"CodeMirror-cursors");this.measure=z("div",null,"CodeMirror-measure");this.lineMeasure=z("div",null,"CodeMirror-measure");this.lineSpace=D("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var g=D("div",
[this.lineSpace],"CodeMirror-lines");this.mover=z("div",[g],null,"position: relative");this.sizer=z("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=z("div",null,null,"position: absolute; height: 30px; width: 1px;");this.gutters=z("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=z("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=z("div",[this.scrollbarFiller,this.gutterFiller,
this.scroller],"CodeMirror");ba&&8>fa&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);wa||Wa&&cc||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=
!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;this.gutterSpecs=Kd(e.gutters,e.lineNumbers);Ye(this);c.init(this)}function Ze(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&
(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}}function Bg(a){a=Ze(a);a.x*=Fa;a.y*=Fa;return a}function $e(a,b){var c=Ze(b),e=c.x;c=c.y;var g=a.display,d=g.scroller,r=d.scrollWidth>d.clientWidth,m=d.scrollHeight>d.clientHeight;if(e&&r||c&&m){if(c&&Ha&&wa){r=b.target;var f=g.view;a:for(;r!=d;r=r.parentNode)for(var h=0;h<f.length;h++)if(f[h].node==r){a.display.currentWheelTarget=r;break a}}!e||Wa||La||null==Fa?(c&&null!=Fa&&(b=c*Fa,m=a.doc.scrollTop,
r=m+g.wrapper.clientHeight,0>b?m=Math.max(0,m+b-50):r=Math.min(a.doc.height,r+b+50),Gd(a,{top:m,bottom:r})),20>Qc&&(null==g.wheelStartX?(g.wheelStartX=d.scrollLeft,g.wheelStartY=d.scrollTop,g.wheelDX=e,g.wheelDY=c,setTimeout(function(){if(null!=g.wheelStartX){var a=d.scrollLeft-g.wheelStartX,b=d.scrollTop-g.wheelStartY;a=b&&g.wheelDY&&b/g.wheelDY||a&&g.wheelDX&&a/g.wheelDX;g.wheelStartX=g.wheelStartY=null;a&&(Fa=(Fa*Qc+a)/(Qc+1),++Qc)}},200)):(g.wheelDX+=e,g.wheelDY+=c))):(c&&m&&Zb(a,Math.max(0,d.scrollTop+
c*Fa)),nb(a,Math.max(0,d.scrollLeft+e*Fa)),(!c||c&&m)&&U(b),g.wheelStartX=null)}}function Ma(a,b,c){a=a&&a.options.selectionsMayTouch;c=b[c];b.sort(function(a,b){return L(a.from(),b.from())});c=d(b,c);for(var e=1;e<b.length;e++){var g=b[e],u=b[e-1],r=L(u.to(),g.from());if(a&&!g.empty()?0<r:0<=r){r=Bc(u.from(),g.from());var m=yc(u.to(),g.to());g=u.empty()?g.from()==g.head:u.from()==u.head;e<=c&&--c;b.splice(--e,2,new ca(g?m:r,g?r:m))}}return new Ga(b,c)}function Xa(a,b){return new Ga([new ca(a,b||
a)],0)}function bb(a){return a.text?C(a.from.line+a.text.length-1,t(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function af(a,b){if(0>L(a,b.from))return a;if(0>=L(a,b.to))return bb(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;a.line==b.to.line&&(e+=bb(b).ch-b.to.ch);return C(c,e)}function Ld(a,b){for(var c=[],e=0;e<a.sel.ranges.length;e++){var g=a.sel.ranges[e];c.push(new ca(af(g.anchor,b),af(g.head,b)))}return Ma(a.cm,c,a.sel.primIndex)}function bf(a,b,c){return a.line==
b.line?C(c.line,a.ch-b.ch+c.ch):C(c.line+(a.line-b.line),a.ch)}function Md(a){a.doc.mode=sb(a.options,a.doc.modeOption);dc(a)}function dc(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first;$b(a,100);a.state.modeGen++;a.curOp&&za(a)}function cf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==t(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Nd(a,b,c,e){function g(a,c,g){a.text=c;a.stateAfter&&(a.stateAfter=
null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);ke(a);le(a,g);c=e?e(a):1;c!=a.height&&na(a,c);sa(a,"change",a,b)}function d(a,b){for(var g=[];a<b;++a)g.push(new Cb(f[a],c?c[a]:null,e));return g}var r=b.from,m=b.to,f=b.text,h=A(a,r.line),k=A(a,m.line),n=t(f),l=c?c[f.length-1]:null,p=m.line-r.line;b.full?(a.insert(0,d(0,f.length)),a.remove(f.length,a.size-f.length)):cf(a,b)?(m=d(0,f.length-1),g(k,k.text,l),p&&a.remove(r.line,p),m.length&&a.insert(r.line,m)):h==k?1==f.length?g(h,h.text.slice(0,
r.ch)+n+h.text.slice(m.ch),l):(p=d(1,f.length-1),p.push(new Cb(n+h.text.slice(m.ch),l,e)),g(h,h.text.slice(0,r.ch)+f[0],c?c[0]:null),a.insert(r.line+1,p)):1==f.length?(g(h,h.text.slice(0,r.ch)+f[0]+k.text.slice(m.ch),c?c[0]:null),a.remove(r.line+1,p)):(g(h,h.text.slice(0,r.ch)+f[0],c?c[0]:null),g(k,n+k.text.slice(m.ch),l),l=d(1,f.length-1),1<p&&a.remove(r.line+1,p-1),a.insert(r.line+1,l));sa(a,"change",a,b)}function cb(a,b,c){function e(a,d,r){if(a.linked)for(var g=0;g<a.linked.length;++g){var u=
a.linked[g];if(u.doc!=d){var f=r&&u.sharedHist;if(!c||f)b(u.doc,f),e(u.doc,a,f)}}}e(a,null,!0)}function df(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;Cd(a);Md(a);ef(a);a.options.lineWrapping||od(a);a.options.mode=b.modeOption;za(a)}function ef(a){("rtl"==a.doc.direction?v:mb)(a.display.lineDiv,"CodeMirror-rtl")}function Cg(a){Ba(a,function(){ef(a);za(a)})}function Rc(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=
this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Od(a,b){var c={from:fd(b.from),to:bb(b),text:Sa(a,b.from,b.to)};ff(a,c,b.from.line,b.to.line+1);cb(a,function(a){return ff(a,c,b.from.line,b.to.line+1)},!0);return c}function gf(a){for(;a.length;)if(t(a).ranges)a.pop();else break}function hf(a,b,c,e){var g=a.history;g.undone.length=0;var d=+new Date,r;if(r=g.lastOp==e||g.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&g.lastModTime>d-(a.cm?
a.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0))){if(g.lastOp==e){gf(g.done);var m=t(g.done)}else g.done.length&&!t(g.done).ranges?m=t(g.done):1<g.done.length&&!g.done[g.done.length-2].ranges?(g.done.pop(),m=t(g.done)):m=void 0;r=m}if(r){var f=t(m.changes);0==L(b.from,b.to)&&0==L(b.from,f.to)?f.to=bb(b):m.changes.push(Od(a,b))}else for((m=t(g.done))&&m.ranges||Sc(a.sel,g.done),m={changes:[Od(a,b)],generation:g.generation},g.done.push(m);g.done.length>g.undoDepth;)g.done.shift(),g.done[0].ranges||
g.done.shift();g.done.push(c);g.generation=++g.maxGeneration;g.lastModTime=g.lastSelTime=d;g.lastOp=g.lastSelOp=e;g.lastOrigin=g.lastSelOrigin=b.origin;f||V(a,"historyAdded")}function Sc(a,b){var c=t(b);c&&c.ranges&&c.equals(a)||b.push(a)}function ff(a,b,c,e){var g=b["spans_"+a.id],d=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,e),function(e){e.markedSpans&&((g||(g=b["spans_"+a.id]={}))[d]=e.markedSpans);++d})}function Dg(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?
b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function jf(a,b){var c;if(c=b["spans_"+a.id]){for(var e=[],g=0;g<b.text.length;++g)e.push(Dg(c[g]));c=e}else c=null;a=kd(a,b);if(!c)return a;if(!a)return c;for(b=0;b<c.length;++b)if(e=c[b],g=a[b],e&&g){var d=0;a:for(;d<g.length;++d){for(var r=g[d],m=0;m<e.length;++m)if(e[m].marker==r.marker)continue a;e.push(r)}}else g&&(c[b]=g);return c}function Db(a,b,c){for(var e=[],g=0;g<a.length;++g){var u=a[g];if(u.ranges)e.push(c?Ga.prototype.deepCopy.call(u):
u);else{u=u.changes;var r=[];e.push({changes:r});for(var m=0;m<u.length;++m){var f=u[m],h;r.push({from:f.from,to:f.to,text:f.text});if(b)for(var k in f)(h=k.match(/^spans_(\d+)$/))&&-1<d(b,Number(h[1]))&&(t(r)[k]=f[k],delete f[k])}}}return e}function Pd(a,b,c,e){return e?(a=a.anchor,c&&(e=0>L(b,a),e!=0>L(c,a)?(a=b,b=c):e!=0>L(b,c)&&(b=c)),new ca(a,b)):new ca(c||b,b)}function Tc(a,b,c,e,g){null==g&&(g=a.cm&&(a.cm.display.shift||a.extend));ta(a,new Ga([Pd(a.sel.primary(),b,c,g)],0),e)}function kf(a,
b,c){for(var e=[],g=a.cm&&(a.cm.display.shift||a.extend),d=0;d<a.sel.ranges.length;d++)e[d]=Pd(a.sel.ranges[d],b[d],null,g);b=Ma(a.cm,e,a.sel.primIndex);ta(a,b,c)}function Qd(a,b,c,e){var g=a.sel.ranges.slice(0);g[b]=c;ta(a,Ma(a.cm,g,a.sel.primIndex),e)}function Eg(a,b,c){c={ranges:b.ranges,update:function(b){this.ranges=[];for(var e=0;e<b.length;e++)this.ranges[e]=new ca(M(a,b[e].anchor),M(a,b[e].head))},origin:c&&c.origin};V(a,"beforeSelectionChange",a,c);a.cm&&V(a.cm,"beforeSelectionChange",a.cm,
c);return c.ranges!=b.ranges?Ma(a.cm,c.ranges,c.ranges.length-1):b}function lf(a,b,c){var e=a.history.done,g=t(e);g&&g.ranges?(e[e.length-1]=b,Uc(a,b,c)):ta(a,b,c)}function ta(a,b,c){Uc(a,b,c);b=a.sel;var e=a.cm?a.cm.curOp.id:NaN,g=a.history,d=c&&c.origin,r;if(!(r=e==g.lastSelOp)&&(r=d&&g.lastSelOrigin==d)&&!(r=g.lastModTime==g.lastSelTime&&g.lastOrigin==d)){r=t(g.done);var m=d.charAt(0);r="*"==m||"+"==m&&r.ranges.length==b.ranges.length&&r.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=
(a.cm?a.cm.options.historyEventDelay:500)}r?g.done[g.done.length-1]=b:Sc(b,g.done);g.lastSelTime=+new Date;g.lastSelOrigin=d;g.lastSelOp=e;c&&!1!==c.clearRedo&&gf(g.undone)}function Uc(a,b,c){if(S(a,"beforeSelectionChange")||a.cm&&S(a.cm,"beforeSelectionChange"))b=Eg(a,b,c);var e=c&&c.bias||(0>L(b.primary().head,a.sel.primary().head)?-1:1);mf(a,nf(a,b,e,!0));c&&!1===c.scroll||!a.cm||Ab(a.cm)}function mf(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,
O(a.cm)),sa(a,"cursorActivity",a))}function of(a){mf(a,nf(a,a.sel,null,!1))}function nf(a,b,c,e){for(var g,d=0;d<b.ranges.length;d++){var r=b.ranges[d],m=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[d],f=Vc(a,r.anchor,m&&m.anchor,c,e);m=Vc(a,r.head,m&&m.head,c,e);if(g||f!=r.anchor||m!=r.head)g||(g=b.ranges.slice(0,d)),g[d]=new ca(f,m)}return g?Ma(a.cm,g,b.primIndex):b}function Eb(a,b,c,e,g){var d=A(a,b.line);if(d.markedSpans)for(var r=0;r<d.markedSpans.length;++r){var m=d.markedSpans[r],f=m.marker,
h="selectLeft"in f?!f.selectLeft:f.inclusiveLeft,k="selectRight"in f?!f.selectRight:f.inclusiveRight;if((null==m.from||(h?m.from<=b.ch:m.from<b.ch))&&(null==m.to||(k?m.to>=b.ch:m.to>b.ch))){if(g&&(V(f,"beforeCursorEnter"),f.explicitlyCleared))if(d.markedSpans){--r;continue}else break;if(f.atomic){if(c){r=f.find(0>e?1:-1);m=void 0;if(0>e?k:h)r=pf(a,r,-e,r&&r.line==b.line?d:null);if(r&&r.line==b.line&&(m=L(r,c))&&(0>e?0>m:0<m))return Eb(a,r,b,e,g)}c=f.find(0>e?-1:1);if(0>e?h:k)c=pf(a,c,e,c.line==b.line?
d:null);return c?Eb(a,c,b,e,g):null}}}return b}function Vc(a,b,c,e,g){e=e||1;b=Eb(a,b,c,e,g)||!g&&Eb(a,b,c,e,!0)||Eb(a,b,c,-e,g)||!g&&Eb(a,b,c,-e,!0);return b?b:(a.cantEdit=!0,C(a.first,0))}function pf(a,b,c,e){return 0>c&&0==b.ch?b.line>a.first?M(a,C(b.line-1)):null:0<c&&b.ch==(e||A(a,b.line)).text.length?b.line<a.first+a.size-1?C(b.line+1,0):null:new C(b.line,b.ch+c)}function qf(a){a.setSelection(C(a.firstLine(),0),C(a.lastLine()),Ra)}function rf(a,b,c){var e={canceled:!1,from:b.from,to:b.to,text:b.text,
origin:b.origin,cancel:function(){return e.canceled=!0}};c&&(e.update=function(b,c,d,m){b&&(e.from=M(a,b));c&&(e.to=M(a,c));d&&(e.text=d);void 0!==m&&(e.origin=m)});V(a,"beforeChange",a,e);a.cm&&V(a.cm,"beforeChange",a.cm,e);return e.canceled?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:e.from,to:e.to,text:e.text,origin:e.origin}}function Fb(a,b,c){if(a.cm){if(!a.cm.curOp)return pa(a.cm,Fb)(a,b,c);if(a.cm.state.suppressEdits)return}if(S(a,"beforeChange")||a.cm&&S(a.cm,"beforeChange"))if(b=rf(a,b,
!0),!b)return;if(c=sf&&!c&&jg(a,b.from,b.to))for(var e=c.length-1;0<=e;--e)tf(a,{from:c[e].from,to:c[e].to,text:e?[""]:b.text,origin:b.origin});else tf(a,b)}function tf(a,b){if(1!=b.text.length||""!=b.text[0]||0!=L(b.from,b.to)){var c=Ld(a,b);hf(a,b,c,a.cm?a.cm.curOp.id:NaN);ec(a,b,c,kd(a,b));var e=[];cb(a,function(a,c){c||-1!=d(e,a.history)||(uf(a.history,b),e.push(a.history));ec(a,b,null,kd(a,b))})}}function Wc(a,b,c){var e=a.cm&&a.cm.state.suppressEdits;if(!e||c){for(var g=a.history,u,f=a.sel,
m="undo"==b?g.done:g.undone,h="undo"==b?g.undone:g.done,k=0;k<m.length&&(u=m[k],c?!u.ranges||u.equals(a.sel):u.ranges);k++);if(k!=m.length){for(g.lastOrigin=g.lastSelOrigin=null;;)if(u=m.pop(),u.ranges){Sc(u,h);if(c&&!u.equals(a.sel)){ta(a,u,{clearRedo:!1});return}f=u}else{if(e){m.push(u);return}break}var n=[];Sc(f,h);h.push({changes:n,generation:g.generation});g.generation=u.generation||++g.maxGeneration;var l=S(a,"beforeChange")||a.cm&&S(a.cm,"beforeChange");c=function(e){var c=u.changes[e];c.origin=
b;if(l&&!rf(a,c,!1))return m.length=0,{};n.push(Od(a,c));var g=e?Ld(a,c):t(m);ec(a,c,g,jf(a,c));!e&&a.cm&&a.cm.scrollIntoView({from:c.from,to:bb(c)});var f=[];cb(a,function(a,b){b||-1!=d(f,a.history)||(uf(a.history,c),f.push(a.history));ec(a,c,null,jf(a,c))})};for(e=u.changes.length-1;0<=e;--e)if(g=c(e))return g.v}}}function vf(a,b){if(0!=b&&(a.first+=b,a.sel=new Ga(N(a.sel.ranges,function(a){return new ca(C(a.anchor.line+b,a.anchor.ch),C(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){za(a.cm,
a.first,a.first-b,b);for(var c=a.cm.display,e=c.viewFrom;e<c.viewTo;e++)ab(a.cm,e,"gutter")}}function ec(a,b,c,e){if(a.cm&&!a.cm.curOp)return pa(a.cm,ec)(a,b,c,e);if(b.to.line<a.first)vf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var g=b.text.length-1-(a.first-b.from.line);vf(a,g);b={from:C(a.first,0),to:C(b.to.line+g,b.to.ch),text:[t(b.text)],origin:b.origin}}g=a.lastLine();b.to.line>g&&(b={from:b.from,to:C(g,A(a,g).text.length),text:[b.text[0]],
origin:b.origin});b.removed=Sa(a,b.from,b.to);c||(c=Ld(a,b));a.cm?Fg(a.cm,b,e):Nd(a,b,e);Uc(a,c,Ra);a.cantEdit&&Vc(a,C(a.firstLine(),0))&&(a.cantEdit=!1)}}function Fg(a,b,c){var e=a.doc,g=a.display,d=b.from,f=b.to,m=!1,h=d.line;a.options.lineWrapping||(h=X(Oa(A(e,d.line))),e.iter(h,f.line+1,function(a){if(a==g.maxLine)return m=!0}));-1<e.sel.contains(b.from,b.to)&&O(a);Nd(e,b,c,Je(a));a.options.lineWrapping||(e.iter(h,d.line+b.text.length,function(a){var b=Ec(a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=
b,g.maxLineChanged=!0,m=!1)}),m&&(a.curOp.updateMaxLine=!0));ig(e,d.line);$b(a,400);c=b.text.length-(f.line-d.line)-1;b.full?za(a):d.line!=f.line||1!=b.text.length||cf(a.doc,b)?za(a,d.line,f.line+1,c):ab(a,d.line,"text");c=S(a,"changes");if((e=S(a,"change"))||c)b={from:d,to:f,text:b.text,removed:b.removed,origin:b.origin},e&&sa(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Gb(a,b,c,e,g){e||(e=c);0>L(e,c)&&(e=[e,c],c=e[0],e=e[1]);
"string"==typeof b&&(b=a.splitLines(b));Fb(a,{from:c,to:e,text:b,origin:g})}function wf(a,b,c,e){c<a.line?a.line+=e:b<a.line&&(a.line=b,a.ch=0)}function xf(a,b,c,e){for(var g=0;g<a.length;++g){var d=a[g],f=!0;if(d.ranges)for(d.copied||(d=a[g]=d.deepCopy(),d.copied=!0),f=0;f<d.ranges.length;f++)wf(d.ranges[f].anchor,b,c,e),wf(d.ranges[f].head,b,c,e);else{for(var m=0;m<d.changes.length;++m){var h=d.changes[m];if(c<h.from.line)h.from=C(h.from.line+e,h.from.ch),h.to=C(h.to.line+e,h.to.ch);else if(b<=
h.to.line){f=!1;break}}f||(a.splice(0,g+1),g=0)}}}function uf(a,b){var c=b.from.line,e=b.to.line;b=b.text.length-(e-c)-1;xf(a.done,c,e,b);xf(a.undone,c,e,b)}function fc(a,b,c,e){var g=b,d=b;"number"==typeof b?d=A(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):g=X(b);if(null==g)return null;e(d,g)&&a.cm&&ab(a.cm,g,c);return d}function gc(a){this.lines=a;this.parent=null;for(var b=0,c=0;c<a.length;++c)a[c].parent=this,b+=a[c].height;this.height=b}function hc(a){this.children=a;for(var b=0,c=0,e=0;e<
a.length;++e){var g=a[e];b+=g.chunkSize();c+=g.height;g.parent=this}this.size=b;this.height=c;this.parent=null}function Gg(a,b,c,e){var g=new ic(a,c,e),d=a.cm;d&&g.noHScroll&&(d.display.alignWidgets=!0);fc(a,b,"widget",function(b){var e=b.widgets||(b.widgets=[]);null==g.insertAt?e.push(g):e.splice(Math.min(e.length-1,Math.max(0,g.insertAt)),0,g);g.line=b;d&&!Za(a,b)&&(e=Pa(b)<a.scrollTop,na(b,b.height+Ub(g)),e&&Nc(d,g.height),d.curOp.forceUpdate=!0);return!0});d&&sa(d,"lineWidgetAdded",d,g,"number"==
typeof b?b:X(b));return g}function Hb(a,b,c,e,g){if(e&&e.shared)return Hg(a,b,c,e,g);if(a.cm&&!a.cm.curOp)return pa(a.cm,Hb)(a,b,c,e,g);var d=new db(a,g);g=L(b,c);e&&Z(e,d,!1);if(0<g||0==g&&!1!==d.clearWhenEmpty)return d;d.replacedWith&&(d.collapsed=!0,d.widgetNode=D("span",[d.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(d.widgetNode.insertLeft=!0));if(d.collapsed){if(me(a,b.line,b,c,d)||b.line!=c.line&&me(a,c.line,b,c,
d))throw Error("Inserting collapsed marker partially overlapping an existing one");Ua=!0}d.addToHistory&&hf(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var f=b.line,m=a.cm,h;a.iter(f,c.line+1,function(a){m&&d.collapsed&&!m.options.lineWrapping&&Oa(a)==m.display.maxLine&&(h=!0);d.collapsed&&f!=b.line&&na(a,0);var e=new Dc(d,f==b.line?b.ch:null,f==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([e]):[e];e.marker.attachLine(a);++f});d.collapsed&&a.iter(b.line,c.line+1,function(b){Za(a,
b)&&na(b,0)});d.clearOnEnter&&I(d,"beforeCursorEnter",function(){return d.clear()});d.readOnly&&(sf=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());d.collapsed&&(d.id=++yf,d.atomic=!0);if(m){h&&(m.curOp.updateMaxLine=!0);if(d.collapsed)za(m,b.line,c.line+1);else if(d.className||d.startStyle||d.endStyle||d.css||d.attributes||d.title)for(e=b.line;e<=c.line;e++)ab(m,e,"text");d.atomic&&of(m.doc);sa(m,"markerAdded",m,d)}return d}function Hg(a,b,c,e,g){e=Z(e);e.shared=!1;var d=[Hb(a,
b,c,e,g)],f=d[0],m=e.widgetNode;cb(a,function(a){m&&(e.widgetNode=m.cloneNode(!0));d.push(Hb(a,M(a,b),M(a,c),e,g));for(var u=0;u<a.linked.length;++u)if(a.linked[u].isParent)return;f=t(d)});return new jc(d,f)}function zf(a){return a.findMarks(C(a.first,0),a.clipPos(C(a.lastLine())),function(a){return a.parent})}function Ig(a){for(var b=function(b){b=a[b];var e=[b.primary.doc];cb(b.primary.doc,function(a){return e.push(a)});for(var c=0;c<b.markers.length;c++){var f=b.markers[c];-1==d(e,f.doc)&&(f.parent=
null,b.markers.splice(c--,1))}},c=0;c<a.length;c++)b(c)}function Jg(a){var b=this;Af(b);if(!W(b,a)&&!Va(b.display,a)){U(a);ba&&(Bf=+new Date);var c=lb(b,a,!0),e=a.dataTransfer.files;if(c&&!b.isReadOnly())if(e&&e.length&&window.FileReader&&window.File)for(var g=e.length,f=Array(g),r=0,m=function(){++r==g&&pa(b,function(){c=M(b.doc,c);var a={from:c,to:c,text:b.doc.splitLines(f.filter(function(a){return null!=a}).join(b.doc.lineSeparator())),origin:"paste"};Fb(b.doc,a);lf(b.doc,Xa(M(b.doc,c),M(b.doc,
bb(a))))})()},h=function(a,e){if(b.options.allowDropFileTypes&&-1==d(b.options.allowDropFileTypes,a.type))m();else{var c=new FileReader;c.onerror=function(){return m()};c.onload=function(){var a=c.result;/[\x00-\x08\x0e-\x1f]{2}/.test(a)||(f[e]=a);m()};c.readAsText(a)}},k=0;k<e.length;k++)h(e[k],k);else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){return b.display.input.focus()},20);else try{if(h=a.dataTransfer.getData("Text")){b.state.draggingText&&
!b.state.draggingText.copy&&(k=b.listSelections());Uc(b.doc,Xa(c,c));if(k)for(e=0;e<k.length;++e)Gb(b.doc,"",k[e].anchor,k[e].head,"drag");b.replaceSelection(h,"around","paste");b.display.input.focus()}}catch(mh){}}}function Af(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function Cf(a){if(document.getElementsByClassName){for(var b=document.getElementsByClassName("CodeMirror"),c=[],e=0;e<b.length;e++){var g=b[e].CodeMirror;g&&c.push(g)}c.length&&
c[0].operation(function(){for(var b=0;b<c.length;b++)a(c[b])})}}function Kg(){var a;I(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;Cf(Lg)},100))});I(window,"blur",function(){return Cf(Xb)})}function Lg(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;b.scrollbarsClipped=!1;a.setSize()}function Mg(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,e,g,d,f=0;f<b.length-1;f++){var m=b[f];if(/^(cmd|meta|m)$/i.test(m))d=!0;else if(/^a(lt)?$/i.test(m))c=
!0;else if(/^(c|ctrl|control)$/i.test(m))e=!0;else if(/^s(hift)?$/i.test(m))g=!0;else throw Error("Unrecognized modifier name: "+m);}c&&(a="Alt-"+a);e&&(a="Ctrl-"+a);d&&(a="Cmd-"+a);g&&(a="Shift-"+a);return a}function Ng(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var e=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=e)for(var g=N(c.split(" "),Mg),d=0;d<g.length;d++){if(d==g.length-1){var f=g.join(" ");var m=e}else f=g.slice(0,d+1).join(" "),m="...";var h=b[f];if(!h)b[f]=m;else if(h!=
m)throw Error("Inconsistent bindings for "+f);}delete a[c]}}for(var k in b)a[k]=b[k];return a}function Ib(a,b,c,e){b=Xc(b);var g=b.call?b.call(a,e):b[a];if(!1===g)return"nothing";if("..."===g)return"multi";if(null!=g&&c(g))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return Ib(a,b.fallthrough,c,e);for(g=0;g<b.fallthrough.length;g++){var d=Ib(a,b.fallthrough[g],c,e);if(d)return d}}}function Df(a){a="string"==typeof a?a:eb[a.keyCode];return"Ctrl"==
a||"Alt"==a||"Shift"==a||"Mod"==a}function Ef(a,b,c){var e=a;b.altKey&&"Alt"!=e&&(a="Alt-"+a);(Ff?b.metaKey:b.ctrlKey)&&"Ctrl"!=e&&(a="Ctrl-"+a);(Ff?b.ctrlKey:b.metaKey)&&"Cmd"!=e&&(a="Cmd-"+a);!c&&b.shiftKey&&"Shift"!=e&&(a="Shift-"+a);return a}function Gf(a,b){if(La&&34==a.keyCode&&a["char"])return!1;var c=eb[a.keyCode];if(null==c||a.altGraphKey)return!1;3==a.keyCode&&a.code&&(c=a.code);return Ef(c,a,b)}function Xc(a){return"string"==typeof a?kc[a]:a}function Jb(a,b){for(var c=a.doc.sel.ranges,
e=[],g=0;g<c.length;g++){for(var d=b(c[g]);e.length&&0>=L(d.from,t(e).to);){var f=e.pop();if(0>L(f.from,d.from)){d.from=f.from;break}}e.push(d)}Ba(a,function(){for(var b=e.length-1;0<=b;b--)Gb(a.doc,"",e[b].from,e[b].to,"+delete");Ab(a)})}function Rd(a,b,c){b=Q(a.text,b+c,c);return 0>b||b>a.text.length?null:b}function Sd(a,b,c){a=Rd(a,b.ch,c);return null==a?null:new C(b.line,a,0>c?"after":"before")}function Td(a,b,c,e,g){if(a&&("rtl"==b.doc.direction&&(g=-g),a=ha(c,b.doc.direction))){a=0>g?t(a):a[0];
var d=0>g==(1==a.level)?"after":"before";if(0<a.level||"rtl"==b.doc.direction){var f=jb(b,c);var m=0>g?c.text.length-1:0;var h=Ja(b,f,m).top;m=aa(function(a){return Ja(b,f,a).top==h},0>g==(1==a.level)?a.from:a.to-1,m);"before"==d&&(m=Rd(c,m,1))}else m=0>g?a.to:a.from;return new C(e,m,d)}return new C(e,0>g?c.text.length:0,0>g?"before":"after")}function Og(a,b,c,e){var g=ha(b,a.doc.direction);if(!g)return Sd(b,c,e);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):0>=c.ch&&(c.ch=0,c.sticky=
"after");var d=n(g,c.ch,c.sticky),f=g[d];if("ltr"==a.doc.direction&&0==f.level%2&&(0<e?f.to>c.ch:f.from<c.ch))return Sd(b,c,e);var m=function(a,e){return Rd(b,a instanceof C?a.ch:a,e)},h,k=function(e){if(!a.options.lineWrapping)return{begin:0,end:b.text.length};h=h||jb(a,b);return Ie(a,b,h,e)},l=k("before"==c.sticky?m(c,-1):c.ch);if("rtl"==a.doc.direction||1==f.level){var p=1==f.level==0>e,q=m(c,p?1:-1);if(null!=q&&(p?q<=f.to&&q<=l.end:q>=f.from&&q>=l.begin))return new C(c.line,q,p?"before":"after")}f=
function(a,b,e){for(var d=function(a,b){return b?new C(c.line,m(a,1),"before"):new C(c.line,a,"after")};0<=a&&a<g.length;a+=b){var f=g[a],u=0<b==(1!=f.level),h=u?e.begin:m(e.end,-1);if(f.from<=h&&h<f.to)return d(h,u);h=u?f.from:m(f.to,-1);if(e.begin<=h&&h<e.end)return d(h,u)}};if(d=f(d+e,e,l))return d;l=0<e?l.end:m(l.begin,-1);return null==l||0<e&&l==b.text.length||!(d=f(0<e?0:g.length-1,e,k(l)))?null:d}function Hf(a,b){var c=A(a.doc,b),e=Oa(c);e!=c&&(b=X(e));return Td(!0,a,e,b,1)}function If(a,b){var c=
Hf(a,b.line),e=A(a.doc,c.line);a=ha(e,a.doc.direction);return a&&0!=a[0].level?c:(e=Math.max(c.ch,e.text.search(/\S/)),C(c.line,b.line==c.line&&b.ch<=e&&b.ch?0:e,c.sticky))}function Yc(a,b,c){if("string"==typeof b&&(b=lc[b],!b))return!1;a.display.input.ensurePolled();var e=a.display.shift,g=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),g=b(a)!=Zc}finally{a.display.shift=e,a.state.suppressEdits=!1}return g}function mc(a,b,c,e){var g=a.state.keySeq;if(g){if(Df(b))return"handled";
/'$/.test(b)?a.state.keySeq=null:Pg.set(50,function(){a.state.keySeq==g&&(a.state.keySeq=null,a.display.input.reset())});if(Jf(a,g+" "+b,c,e))return!0}return Jf(a,b,c,e)}function Jf(a,b,c,e){a:{for(var g=0;g<a.state.keyMaps.length;g++){var d=Ib(b,a.state.keyMaps[g],e,a);if(d){e=d;break a}}e=a.options.extraKeys&&Ib(b,a.options.extraKeys,e,a)||Ib(b,a.options.keyMap,e,a)}"multi"==e&&(a.state.keySeq=b);"handled"==e&&sa(a,"keyHandled",a,b,c);if("handled"==e||"multi"==e)U(c),Dd(a);return!!e}function Kf(a,
b){var c=Gf(b,!0);return c?b.shiftKey&&!a.state.keySeq?mc(a,"Shift-"+c,b,function(b){return Yc(a,b,!0)})||mc(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Yc(a,b)}):mc(a,c,b,function(b){return Yc(a,b)}):!1}function Qg(a,b,c){return mc(a,"'"+c+"'",b,function(b){return Yc(a,b,!0)})}function Lf(a){this.curOp.focus=K();if(!W(this,a)){ba&&11>fa&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Kf(this,a);La&&(Ud=c?b:null,!c&&88==
b&&!Rg&&(Ha?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));Wa&&!Ha&&!c&&46==b&&a.shiftKey&&!a.ctrlKey&&document.execCommand&&document.execCommand("cut");18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Sg(this)}}function Sg(a){function b(a){18!=a.keyCode&&a.altKey||(mb(c,"CodeMirror-crosshair"),k(document,"keyup",b),k(document,"mouseover",b))}var c=a.display.lineDiv;v(c,"CodeMirror-crosshair");I(document,"keyup",b);I(document,"mouseover",b)}function Mf(a){16==a.keyCode&&
(this.doc.sel.shift=!1);W(this,a)}function Nf(a){if(!(Va(this.display,a)||W(this,a)||a.ctrlKey&&!a.altKey||Ha&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(La&&b==Ud)Ud=null,U(a);else if(!La||a.which&&!(10>a.which)||!Kf(this,a))if(b=String.fromCharCode(null==c?b:c),"\b"!=b&&!Qg(this,a,b))this.display.input.onKeyPress(a)}}function Tg(a,b){var c=+new Date;if(nc&&nc.compare(c,a,b))return oc=nc=null,"triple";if(oc&&oc.compare(c,a,b))return nc=new Vd(c,a,b),oc=null,"double";oc=new Vd(c,a,b);nc=null;return"single"}
function Of(a){var b=this.display;if(!(W(this,a)||b.activeTouch&&b.input.supportsTouch()))if(b.input.ensurePolled(),b.shift=a.shiftKey,Va(b,a))wa||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100));else if(!$c(this,a,"gutterClick",!0)){var c=lb(this,a),e=ra(a),g=c?Tg(c,e):"single";window.focus();1==e&&this.state.selectingText&&this.state.selectingText(a);if(!c||!Ug(this,e,c,g,a))if(1==e)c?Vg(this,c,g,a):(a.target||a.srcElement)==b.scroller&&U(a);else if(2==e)c&&Tc(this.doc,
c),setTimeout(function(){return b.input.focus()},20);else if(3==e)if(Wd)this.display.input.onContextMenu(a);else Oe(this)}}function Ug(a,b,c,e,g){var d="Click";"double"==e?d="Double"+d:"triple"==e&&(d="Triple"+d);return mc(a,Ef((1==b?"Left":2==b?"Middle":"Right")+d,g),g,function(b){"string"==typeof b&&(b=lc[b]);if(!b)return!1;var e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),e=b(a,c)!=Zc}finally{a.state.suppressEdits=!1}return e})}function Vg(a,b,c,e){ba?setTimeout(q(Ne,a),0):a.curOp.focus=
K();var g=a.getOption("configureMouse");g=g?g(a,c,e):{};null==g.unit&&(g.unit=(Wg?e.shiftKey&&e.metaKey:e.altKey)?"rectangle":"single"==c?"char":"double"==c?"word":"line");if(null==g.extend||a.doc.extend)g.extend=a.doc.extend||e.shiftKey;null==g.addNew&&(g.addNew=Ha?e.metaKey:e.ctrlKey);null==g.moveOnDrag&&(g.moveOnDrag=!(Ha?e.altKey:e.ctrlKey));var d=a.doc.sel,f;a.options.dragDrop&&Xg&&!a.isReadOnly()&&"single"==c&&-1<(f=d.contains(b))&&(0>L((f=d.ranges[f]).from(),b)||0<b.xRel)&&(0<L(f.to(),b)||
0>b.xRel)?Yg(a,e,b,g):Zg(a,e,b,g)}function Yg(a,b,c,e){var g=a.display,d=!1,f=pa(a,function(b){wa&&(g.scroller.draggable=!1);a.state.draggingText=!1;k(g.wrapper.ownerDocument,"mouseup",f);k(g.wrapper.ownerDocument,"mousemove",m);k(g.scroller,"dragstart",h);k(g.scroller,"drop",f);d||(U(b),e.addNew||Tc(a.doc,c,null,null,e.extend),wa||ba&&9==fa?setTimeout(function(){g.wrapper.ownerDocument.body.focus();g.input.focus()},20):g.input.focus())}),m=function(a){d=d||10<=Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-
a.clientY)},h=function(){return d=!0};wa&&(g.scroller.draggable=!0);a.state.draggingText=f;f.copy=!e.moveOnDrag;g.scroller.dragDrop&&g.scroller.dragDrop();I(g.wrapper.ownerDocument,"mouseup",f);I(g.wrapper.ownerDocument,"mousemove",m);I(g.scroller,"dragstart",h);I(g.scroller,"drop",f);Oe(a);setTimeout(function(){return g.input.focus()},20)}function Pf(a,b,c){if("char"==c)return new ca(b,b);if("word"==c)return a.findWordAt(b);if("line"==c)return new ca(C(b.line,0),M(a.doc,C(b.line+1,0)));a=c(a,b);
return new ca(a.from,a.to)}function Zg(a,b,c,e){function g(b){if(0!=L(y,b))if(y=b,"rectangle"==e.unit){var g=[],d=a.options.tabSize,f=w(A(l,c.line).text,c.ch,d),m=w(A(l,b.line).text,b.ch,d),u=Math.min(f,m);f=Math.max(f,m);m=Math.min(c.line,b.line);for(var r=Math.min(a.lastLine(),Math.max(c.line,b.line));m<=r;m++){var k=A(l,m).text,p=h(k,u,d);u==f?g.push(new ca(C(m,p),C(m,p))):k.length>p&&g.push(new ca(C(m,p),C(m,h(k,f,d))))}g.length||g.push(new ca(c,c));ta(l,Ma(a,n.ranges.slice(0,q).concat(g),q),
{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else g=t,u=Pf(a,b,e.unit),b=g.anchor,0<L(u.anchor,b)?(d=u.head,b=Bc(g.from(),u.anchor)):(d=u.anchor,b=yc(g.to(),u.head)),g=n.ranges.slice(0),g[q]=$g(a,new ca(M(l,b),d)),ta(l,Ma(a,g,q),Xd)}function d(b){var c=++F,f=lb(a,b,!0,"rectangle"==e.unit);if(f)if(0!=L(f,y)){a.curOp.focus=K();g(f);var h=Mc(m,l);(f.line>=h.to||f.line<h.from)&&setTimeout(pa(a,function(){F==c&&d(b)}),150)}else{var u=b.clientY<x.top?-20:b.clientY>x.bottom?20:0;u&&setTimeout(pa(a,function(){F==
c&&(m.scroller.scrollTop+=u,d(b))}),50)}}function f(b){a.state.selectingText=!1;F=Infinity;b&&(U(b),m.input.focus());k(m.wrapper.ownerDocument,"mousemove",v);k(m.wrapper.ownerDocument,"mouseup",H);l.history.lastSelOrigin=null}var m=a.display,l=a.doc;U(b);var n=l.sel,p=n.ranges;if(e.addNew&&!e.extend){var q=l.sel.contains(c);var t=-1<q?p[q]:new ca(c,c)}else t=l.sel.primary(),q=l.sel.primIndex;"rectangle"==e.unit?(e.addNew||(t=new ca(c,c)),c=lb(a,b,!0,!0),q=-1):(b=Pf(a,c,e.unit),t=e.extend?Pd(t,b.anchor,
b.head,e.extend):b);e.addNew?-1==q?(q=p.length,ta(l,Ma(a,p.concat([t]),q),{scroll:!1,origin:"*mouse"})):1<p.length&&p[q].empty()&&"char"==e.unit&&!e.extend?(ta(l,Ma(a,p.slice(0,q).concat(p.slice(q+1)),0),{scroll:!1,origin:"*mouse"}),n=l.sel):Qd(l,q,t,Xd):(q=0,ta(l,new Ga([t],0),Xd),n=l.sel);var y=c,x=m.wrapper.getBoundingClientRect(),F=0,v=pa(a,function(a){0!==a.buttons&&ra(a)?d(a):f(a)}),H=pa(a,f);a.state.selectingText=H;I(m.wrapper.ownerDocument,"mousemove",v);I(m.wrapper.ownerDocument,"mouseup",
H)}function $g(a,b){var c=b.anchor,e=b.head,g=A(a.doc,c.line);if(0==L(c,e)&&c.sticky==e.sticky)return b;g=ha(g);if(!g)return b;var d=n(g,c.ch,c.sticky),f=g[d];if(f.from!=c.ch&&f.to!=c.ch)return b;var m=d+(f.from==c.ch==(1!=f.level)?0:1);if(0==m||m==g.length)return b;e.line!=c.line?a=0<(e.line-c.line)*("ltr"==a.doc.direction?1:-1):(a=n(g,e.ch,e.sticky),d=a-d||(e.ch-c.ch)*(1==f.level?-1:1),a=a==m-1||a==m?0>d:0<d);g=g[m+(a?-1:0)];g=(m=a==(1==g.level))?g.from:g.to;m=m?"after":"before";return c.ch==g&&
c.sticky==m?b:new ca(new C(c.line,g,m),e)}function $c(a,b,c,e){if(b.touches){var g=b.touches[0].clientX;var d=b.touches[0].clientY}else try{g=b.clientX,d=b.clientY}catch(B){return!1}if(g>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;e&&U(b);e=a.display;var f=e.lineDiv.getBoundingClientRect();if(d>f.bottom||!S(a,c))return T(b);d-=f.top-e.viewOffset;for(f=0;f<a.display.gutterSpecs.length;++f){var m=e.gutters.childNodes[f];if(m&&m.getBoundingClientRect().right>=g)return g=ka(a.doc,
d),V(a,c,a,g,a.display.gutterSpecs[f].className,b),T(b)}}function Qf(a,b){var c;(c=Va(a.display,b))||(c=S(a,"gutterContextMenu")?$c(a,b,"gutterContextMenu",!1):!1);if(!c&&!W(a,b,"contextmenu")&&!Wd)a.display.input.onContextMenu(b)}function Rf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");Vb(a)}function ah(a,b,c){!b!=!(c&&c!=Kb)&&(c=a.display.dragFunctions,b=b?I:k,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,
"dragenter",c.enter),b(a.display.scroller,"dragover",c.over),b(a.display.scroller,"dragleave",c.leave),b(a.display.scroller,"drop",c.drop))}function bh(a){a.options.lineWrapping?(v(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(mb(a.display.wrapper,"CodeMirror-wrap"),od(a));Cd(a);za(a);Vb(a);setTimeout(function(){return Bb(a)},100)}function ia(a,b){var c=this;if(!(this instanceof ia))return new ia(a,b);this.options=b=b?Z(b):{};Z(Sf,b,!1);var e=b.value;
"string"==typeof e?e=new Aa(e,b.mode,null,b.lineSeparator,b.direction):b.mode&&(e.modeOption=b.mode);this.doc=e;var g=new ia.inputStyles[b.inputStyle](this);a=this.display=new Ag(a,e,g,b);a.wrapper.CodeMirror=this;Rf(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");Ue(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new fb,keySeq:null,
specialChars:null};b.autofocus&&!cc&&a.input.focus();ba&&11>fa&&setTimeout(function(){return c.display.input.reset(!0)},20);ch(this);Tf||(Kg(),Tf=!0);ob(this);this.curOp.forceUpdate=!0;df(this,e);b.autofocus&&!cc||this.hasFocus()?setTimeout(q(Ed,this),20):Xb(this);for(var d in ad)if(ad.hasOwnProperty(d))ad[d](c,b[d],Kb);Xe(this);b.finishInit&&b.finishInit(this);for(e=0;e<Yd.length;++e)Yd[e](c);pb(this);wa&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering=
"auto")}function ch(a){function b(){e.activeTouch&&(g=setTimeout(function(){return e.activeTouch=null},1E3),d=e.activeTouch,d.end=+new Date)}function c(a,b){if(null==b.left)return!0;var e=b.left-a.left;a=b.top-a.top;return 400<e*e+a*a}var e=a.display;I(e.scroller,"mousedown",pa(a,Of));ba&&11>fa?I(e.scroller,"dblclick",pa(a,function(b){if(!W(a,b)){var e=lb(a,b);!e||$c(a,b,"gutterClick",!0)||Va(a.display,b)||(U(b),b=a.findWordAt(e),Tc(a.doc,b.anchor,b.head))}})):I(e.scroller,"dblclick",function(b){return W(a,
b)||U(b)});I(e.scroller,"contextmenu",function(b){return Qf(a,b)});I(e.input.getField(),"contextmenu",function(b){e.scroller.contains(b.target)||Qf(a,b)});var g,d={end:0};I(e.scroller,"touchstart",function(b){var c;if(c=!W(a,b))1!=b.touches.length?c=!1:(c=b.touches[0],c=1>=c.radiusX&&1>=c.radiusY),c=!c;c&&!$c(a,b,"gutterClick",!0)&&(e.input.ensurePolled(),clearTimeout(g),c=+new Date,e.activeTouch={start:c,moved:!1,prev:300>=c-d.end?d:null},1==b.touches.length&&(e.activeTouch.left=b.touches[0].pageX,
e.activeTouch.top=b.touches[0].pageY))});I(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)});I(e.scroller,"touchend",function(g){var d=e.activeTouch;if(d&&!Va(e,g)&&null!=d.left&&!d.moved&&300>new Date-d.start){var f=a.coordsChar(e.activeTouch,"page");d=!d.prev||c(d,d.prev)?new ca(f,f):!d.prev.prev||c(d,d.prev.prev)?a.findWordAt(f):new ca(C(f.line,0),M(a.doc,C(f.line+1,0)));a.setSelection(d.anchor,d.head);a.focus();U(g)}b()});I(e.scroller,"touchcancel",b);I(e.scroller,"scroll",
function(){e.scroller.clientHeight&&(Zb(a,e.scroller.scrollTop),nb(a,e.scroller.scrollLeft,!0),V(a,"scroll",a))});I(e.scroller,"mousewheel",function(b){return $e(a,b)});I(e.scroller,"DOMMouseScroll",function(b){return $e(a,b)});I(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0});e.dragFunctions={enter:function(b){W(a,b)||H(b)},over:function(b){if(!W(a,b)){var e=lb(a,b);if(e){var c=document.createDocumentFragment();Me(a,e,c);a.display.dragCursor||(a.display.dragCursor=
z("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv));E(a.display.dragCursor,c)}H(b)}},start:function(b){if(ba&&(!a.state.draggingText||100>+new Date-Bf))H(b);else if(!W(a,b)&&!Va(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!Uf)){var e=z("img",null,null,"position: fixed; left: 0; top: 0;");e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
La&&(e.width=e.height=1,a.display.wrapper.appendChild(e),e._top=e.offsetTop);b.dataTransfer.setDragImage(e,0,0);La&&e.parentNode.removeChild(e)}},drop:pa(a,Jg),leave:function(b){W(a,b)||Af(a)}};var f=e.input.getField();I(f,"keyup",function(b){return Mf.call(a,b)});I(f,"keydown",pa(a,Lf));I(f,"keypress",pa(a,Nf));I(f,"focus",function(b){return Ed(a,b)});I(f,"blur",function(b){return Xb(a,b)})}function pc(a,b,c,e){var g=a.doc,d;null==c&&(c="add");"smart"==c&&(g.mode.indent?d=Pb(a,b).state:c="prev");
var f=a.options.tabSize,m=A(g,b),h=w(m.text,null,f);m.stateAfter&&(m.stateAfter=null);var k=m.text.match(/^\s*/)[0];if(!e&&!/\S/.test(m.text)){var l=0;c="not"}else if("smart"==c&&(l=g.mode.indent(d,m.text.slice(k.length),m.text),l==Zc||150<l)){if(!e)return;c="prev"}"prev"==c?l=b>g.first?w(A(g,b-1).text,null,f):0:"add"==c?l=h+a.options.indentUnit:"subtract"==c?l=h-a.options.indentUnit:"number"==typeof c&&(l=h+c);l=Math.max(0,l);c="";e=0;if(a.options.indentWithTabs)for(a=Math.floor(l/f);a;--a)e+=f,
c+="\t";e<l&&(c+=F(l-e));if(c!=k)return Gb(g,c,C(b,0),C(b,k.length),"+input"),m.stateAfter=null,!0;for(f=0;f<g.sel.ranges.length;f++)if(m=g.sel.ranges[f],m.head.line==b&&m.head.ch<k.length){b=C(b,k.length);Qd(g,f,new ca(b,b));break}}function Zd(a,b,c,e,g){var d=a.doc;a.display.shift=!1;e||(e=d.sel);var f=+new Date-200,h="paste"==g||a.state.pasteIncoming>f,k=$d(b),l=null;if(h&&1<e.ranges.length)if(Ca&&Ca.text.join("\n")==b){if(0==e.ranges.length%Ca.text.length){l=[];for(var n=0;n<Ca.text.length;n++)l.push(d.splitLines(Ca.text[n]))}}else k.length==
e.ranges.length&&a.options.pasteLinesPerSelection&&(l=N(k,function(a){return[a]}));n=a.curOp.updateInput;for(var p=e.ranges.length-1;0<=p;p--){var q=e.ranges[p],w=q.from(),y=q.to();q.empty()&&(c&&0<c?w=C(w.line,w.ch-c):a.state.overwrite&&!h?y=C(y.line,Math.min(A(d,y.line).text.length,y.ch+t(k).length)):h&&Ca&&Ca.lineWise&&Ca.text.join("\n")==b&&(w=y=C(w.line,0)));q={from:w,to:y,text:l?l[p%l.length]:k,origin:g||(h?"paste":a.state.cutIncoming>f?"cut":"+input")};Fb(a.doc,q);sa(a,"inputRead",a,q)}b&&
!h&&Vf(a,b);Ab(a);2>a.curOp.updateInput&&(a.curOp.updateInput=n);a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=-1}function Wf(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||Ba(b,function(){return Zd(b,c,0,null,"paste")}),!0}function Vf(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,e=c.ranges.length-1;0<=e;e--){var g=c.ranges[e];if(!(100<g.head.ch||e&&c.ranges[e-1].head.line==
g.head.line)){var d=a.getModeAt(g.head),f=!1;if(d.electricChars)for(var h=0;h<d.electricChars.length;h++){if(-1<b.indexOf(d.electricChars.charAt(h))){f=pc(a,g.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(A(a.doc,g.head.line).text.slice(0,g.head.ch))&&(f=pc(a,g.head.line,"smart"));f&&sa(a,"electricInput",a,g.head.line)}}}function Xf(a){for(var b=[],c=[],e=0;e<a.doc.sel.ranges.length;e++){var g=a.doc.sel.ranges[e].head.line;g={anchor:C(g,0),head:C(g+1,0)};c.push(g);b.push(a.getRange(g.anchor,
g.head))}return{text:b,ranges:c}}function Yf(a,b,c,e){a.setAttribute("autocorrect",c?"":"off");a.setAttribute("autocapitalize",e?"":"off");a.setAttribute("spellcheck",!!b)}function Zf(){var a=z("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=z("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");wa?a.style.width="1000px":a.setAttribute("wrap","off");qc&&(a.style.border="1px solid black");Yf(a);return b}function ae(a,
b,c,e,g){function d(e){var d=g?Og(a.cm,k,b,c):Sd(k,b,c);if(null==d){if(e=!e)e=b.line+l,e<a.first||e>=a.first+a.size?e=!1:(b=new C(e,b.ch,b.sticky),e=k=A(a,e));if(e)b=Td(g,a.cm,k,b.line,l);else return!1}else b=d;return!0}var f=b,h=c,k=A(a,b.line),l=g&&"rtl"==a.direction?-c:c;if("char"==e)d();else if("column"==e)d(!0);else if("word"==e||"group"==e){var n=null;e="group"==e;for(var p=a.cm&&a.cm.getHelper(b,"wordChars"),q=!0;!(0>c)||d(!q);q=!1){var t=k.text.charAt(b.ch)||"\n";t=oa(t,p)?"w":e&&"\n"==t?
"n":!e||/\s/.test(t)?null:"p";!e||q||t||(t="s");if(n&&n!=t){0>c&&(c=1,d(),b.sticky="after");break}t&&(n=t);if(0<c&&!d(!q))break}}h=Vc(a,b,f,h,!0);ed(f,h)&&(h.hitSide=!0);return h}function $f(a,b,c,e){var g=a.doc,d=b.left;if("page"==e){var f=Math.max(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-.5*zb(a.display),3);f=(0<c?b.bottom:b.top)+c*f}else"line"==e&&(f=0<c?b.bottom+3:b.top-3);for(;;){b=zd(a,d,f);if(!b.outside)break;if(0>c?0>=f:f>=g.height){b.hitSide=
!0;break}f+=5*c}return b}function ag(a,b){var c=td(a,b.line);if(!c||c.hidden)return null;var e=A(a.doc,b.line);c=ye(c,e,b.line);a=ha(e,a.doc.direction);e="left";a&&(e=n(a,b.ch)%2?"right":"left");b=ze(c.map,b.ch,e);b.offset="right"==b.collapse?b.end:b.start;return b}function dh(a){for(;a;a=a.parentNode)if(/CodeMirror-gutter-wrapper/.test(a.className))return!0;return!1}function Lb(a,b){b&&(a.bad=!0);return a}function eh(a,b,c,e,g){function d(a){return function(b){return b.id==a}}function f(){n&&(l+=
p,q&&(l+=p),n=q=!1)}function h(a){a&&(f(),l+=a)}function k(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(c)h(c);else{c=b.getAttribute("cm-marker");var m;if(c)b=a.findMarks(C(e,0),C(g+1,0),d(+c)),b.length&&(m=b[0].find(0))&&h(Sa(a.doc,m.from,m.to).join(p));else if("false"!=b.getAttribute("contenteditable")&&(m=/^(pre|div|p|li|table|br)$/i.test(b.nodeName),/^br$/i.test(b.nodeName)||0!=b.textContent.length)){m&&f();for(c=0;c<b.childNodes.length;c++)k(b.childNodes[c]);/^(pre|p)$/i.test(b.nodeName)&&
(q=!0);m&&(n=!0)}}}else 3==b.nodeType&&h(b.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var l="",n=!1,p=a.doc.lineSeparator(),q=!1;;){k(b);if(b==c)break;b=b.nextSibling;q=!1}return l}function bd(a,b,c){if(b==a.display.lineDiv){var e=a.display.lineDiv.childNodes[c];if(!e)return Lb(a.clipPos(C(a.display.viewTo-1)),!0);b=null;c=0}else for(e=b;;e=e.parentNode){if(!e||e==a.display.lineDiv)return null;if(e.parentNode&&e.parentNode==a.display.lineDiv)break}for(var g=0;g<a.display.view.length;g++){var d=
a.display.view[g];if(d.node==e)return fh(d,b,c)}}function fh(a,b,c){function e(b,e,c){for(var g=-1;g<(l?l.length:0);g++)for(var d=0>g?k.map:l[g],f=0;f<d.length;f+=3){var h=d[f+2];if(h==b||h==e){e=X(0>g?a.line:a.rest[g]);g=d[f]+c;if(0>c||h!=b)g=d[f+(c?1:0)];return C(e,g)}}}var g=a.text.firstChild,d=!1;if(!b||!P(g,b))return Lb(C(X(a.line),0),!0);if(b==g&&(d=!0,b=g.childNodes[c],c=0,!b))return c=a.rest?t(a.rest):a.line,Lb(C(X(c),c.text.length),d);var f=3==b.nodeType?b:null,h=b;f||1!=b.childNodes.length||
3!=b.firstChild.nodeType||(f=b.firstChild,c&&(c=f.nodeValue.length));for(;h.parentNode!=g;)h=h.parentNode;var k=a.measure,l=k.maps;if(b=e(f,h,c))return Lb(b,d);g=h.nextSibling;for(f=f?f.nodeValue.length-c:0;g;g=g.nextSibling){if(b=e(g,g.firstChild,0))return Lb(C(b.line,b.ch-f),d);f+=g.textContent.length}for(h=h.previousSibling;h;h=h.previousSibling){if(b=e(h,h.firstChild,-1))return Lb(C(b.line,b.ch+c),d);c+=h.textContent.length}}var ya=navigator.userAgent,bg=navigator.platform,Wa=/gecko\/\d/i.test(ya),
cg=/MSIE \d/.test(ya),dg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ya),rc=/Edge\/(\d+)/.exec(ya),ba=cg||dg||rc,fa=ba&&(cg?document.documentMode||6:+(rc||dg)[1]),wa=!rc&&/WebKit\//.test(ya),gh=wa&&/Qt\/\d+\.\d+/.test(ya),Gc=!rc&&/Chrome\//.test(ya),La=/Opera\//.test(ya),Uf=/Apple Computer/.test(navigator.vendor),hh=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ya),xg=/PhantomJS/.test(ya),qc=!rc&&/AppleWebKit/.test(ya)&&/Mobile\/\w+/.test(ya),Hc=/Android/.test(ya),cc=qc||Hc||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ya),
Ha=qc||/Mac/.test(bg),Wg=/\bCrOS\b/.test(ya),ih=/win/i.test(bg),qb=La&&ya.match(/Version\/(\d*\.\d*)/);qb&&(qb=Number(qb[1]));qb&&15<=qb&&(La=!1,wa=!0);var Ff=Ha&&(gh||La&&(null==qb||12.11>qb)),Wd=Wa||ba&&9<=fa,mb=function(a,b){var c=a.className;if(b=f(b).exec(c)){var e=c.slice(b.index+b[0].length);a.className=c.slice(0,b.index)+(e?b[1]+e:"")}};var Rb=document.createRange?function(a,b,c,e){var g=document.createRange();g.setEnd(e||a,c);g.setStart(a,b);return g}:function(a,b,c){var e=document.body.createTextRange();
try{e.moveToElementText(a.parentNode)}catch(g){return e}e.collapse(!0);e.moveEnd("character",c);e.moveStart("character",b);return e};var sc=function(a){a.select()};qc?sc=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:ba&&(sc=function(a){try{a.select()}catch(b){}});var fb=function(){this.f=this.id=null;this.time=0;this.handler=q(this.onTimeout,this)};fb.prototype.onTimeout=function(a){a.id=0;a.time<=+new Date?a.f():setTimeout(a.handler,a.time-+new Date)};fb.prototype.set=function(a,
b){this.f=b;b=+new Date+a;if(!this.id||b<this.time)clearTimeout(this.id),this.id=setTimeout(this.handler,a),this.time=b};var Zc={toString:function(){return"CodeMirror.Pass"}},Ra={scroll:!1},Xd={origin:"*mouse"},tc={origin:"+move"},zc=[""],eg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,fg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Ob=null,gg=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):1424<=a&&1524>=a?"R":1536<=a&&1785>=a?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(a-
1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,e){this.level=a;this.from=b;this.to=e}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,g=/[LRr]/,d=/[Lb1n]/,f=/[1n]/;return function(h,u){var m="ltr"==u?"L":"R";if(0==h.length||"ltr"==u&&!c.test(h))return!1;for(var k=h.length,r=[],l=0;l<k;++l)r.push(a(h.charCodeAt(l)));l=0;for(var n=m;l<k;++l){var p=r[l];"m"==p?r[l]=n:n=p}l=0;for(n=m;l<k;++l)p=r[l],"1"==p&&"r"==n?r[l]="n":g.test(p)&&(n=p,"r"==p&&(r[l]="R"));
l=1;for(n=r[0];l<k-1;++l)p=r[l],"+"==p&&"1"==n&&"1"==r[l+1]?r[l]="1":","!=p||n!=r[l+1]||"1"!=n&&"n"!=n||(r[l]=n),n=p;for(l=0;l<k;++l)if(n=r[l],","==n)r[l]="N";else if("%"==n){for(n=l+1;n<k&&"%"==r[n];++n);for(p=l&&"!"==r[l-1]||n<k&&"1"==r[n]?"1":"N";l<n;++l)r[l]=p;l=n-1}l=0;for(n=m;l<k;++l)p=r[l],"L"==n&&"1"==p?r[l]="L":g.test(p)&&(n=p);for(n=0;n<k;++n)if(e.test(r[n])){for(l=n+1;l<k&&e.test(r[l]);++l);p="L"==(n?r[n-1]:m);for(p=p==("L"==(l<k?r[l]:m))?p?"L":"R":m;n<l;++n)r[n]=p;n=l-1}m=[];var q;for(l=
0;l<k;)if(d.test(r[l])){n=l;for(++l;l<k&&d.test(r[l]);++l);m.push(new b(0,n,l))}else{var w=l;n=m.length;p="rtl"==u?1:0;for(++l;l<k&&"L"!=r[l];++l);for(var B=w;B<l;)if(f.test(r[B])){w<B&&(m.splice(n,0,new b(1,w,B)),n+=p);w=B;for(++B;B<l&&f.test(r[B]);++B);m.splice(n,0,new b(2,w,B));n+=p;w=B}else++B;w<l&&m.splice(n,0,new b(1,w,l))}"ltr"==u&&(1==m[0].level&&(q=h.match(/^\s+/))&&(m[0].from=q[0].length,m.unshift(new b(0,0,q[0].length))),1==t(m).level&&(q=h.match(/\s+$/))&&(t(m).to-=q[0].length,m.push(new b(0,
k-q[0].length,k))));return"rtl"==u?m.reverse():m}}(),Ac=[],I=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),a[b]=(a[b]||Ac).concat(c))},Xg=function(){if(ba&&9>fa)return!1;var a=z("div");return"draggable"in a||"dragDrop"in a}(),gd,pd,$d=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],e=a.length;b<=e;){var g=a.indexOf("\n",b);-1==g&&(g=a.length);var d=a.slice(b,"\r"==a.charAt(g-1)?g-1:g),f=d.indexOf("\r");
-1!=f?(c.push(d.slice(0,f)),b+=f+1):(c.push(d),b=g+1)}return c}:function(a){return a.split(/\r\n?|\n/)},jh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Rg=function(){var a=z("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),vd=null,hd={},ub={},vb={},la=
function(a,b,c){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=c};la.prototype.eol=function(){return this.pos>=this.string.length};la.prototype.sol=function(){return this.pos==this.lineStart};la.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};la.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};la.prototype.eat=function(a){var b=this.string.charAt(this.pos);
if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b};la.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b};la.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a};la.prototype.skipToEnd=function(){this.pos=this.string.length};la.prototype.skipTo=function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0};la.prototype.backUp=function(a){this.pos-=a};la.prototype.column=
function(){this.lastColumnPos<this.start&&(this.lastColumnValue=w(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?w(this.string,this.lineStart,this.tabSize):0)};la.prototype.indentation=function(){return w(this.string,null,this.tabSize)-(this.lineStart?w(this.string,this.lineStart,this.tabSize):0)};la.prototype.match=function(a,b,c){if("string"==typeof a){var e=function(a){return c?a.toLowerCase():
a},g=this.string.substr(this.pos,a.length);if(e(g)==e(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}};la.prototype.current=function(){return this.string.slice(this.start,this.pos)};la.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}};la.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)};la.prototype.baseToken=
function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var Cc=function(a,b){this.state=a;this.lookAhead=b},Na=function(a,b,c,e){this.state=b;this.doc=a;this.line=c;this.maxLookAhead=e||0;this.baseTokens=null;this.baseTokenPos=1};Na.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a);return b};Na.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=
2;var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}};Na.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};Na.fromSaved=function(a,b,c){return b instanceof Cc?new Na(a,x(a.mode,b.state),c,b.lookAhead):new Na(a,x(a.mode,b),c)};Na.prototype.save=function(a){a=!1!==a?x(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Cc(a,this.maxLookAhead):a};var he=function(a,b,c){this.start=
a.start;this.end=a.pos;this.string=a.current();this.type=b||null;this.state=c},sf=!1,Ua=!1,Cb=function(a,b,c){this.text=a;le(this,b);this.height=c?c(this):1};Cb.prototype.lineNo=function(){return X(this)};ea(Cb);var lg={},kg={},xb=null,Sb=null,Ae={left:0,right:0,top:0,bottom:0},kb,rb=function(a,b,c){this.cm=c;var e=this.vert=z("div",[z("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),g=this.horiz=z("div",[z("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e.tabIndex=
g.tabIndex=-1;a(e);a(g);I(e,"scroll",function(){e.clientHeight&&b(e.scrollTop,"vertical")});I(g,"scroll",function(){g.clientWidth&&b(g.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;ba&&8>fa&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};rb.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,e=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?e+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-
a.clientHeight+(a.viewHeight-(b?e:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?e+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?e:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<a.clientHeight&&(0==e&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return{right:c?
e:0,bottom:b?e:0}};rb.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};rb.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};rb.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Ha&&!hh?"12px":"18px";this.horiz.style.pointerEvents=this.vert.style.pointerEvents=
"none";this.disableHoriz=new fb;this.disableVert=new fb};rb.prototype.enableZeroWidthBar=function(a,b,c){function e(){var g=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(g.right-1,(g.top+g.bottom)/2):document.elementFromPoint((g.right+g.left)/2,g.bottom-1))!=a?a.style.pointerEvents="none":b.set(1E3,e)}a.style.pointerEvents="auto";b.set(1E3,e)};rb.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)};var uc=function(){};uc.prototype.update=
function(){return{bottom:0,right:0}};uc.prototype.setScrollLeft=function(){};uc.prototype.setScrollTop=function(){};uc.prototype.clear=function(){};var Ve={"native":rb,"null":uc},wg=0,Pc=function(a,b,c){var e=a.display;this.viewport=b;this.visible=Mc(e,a.doc,b);this.editorIsHidden=!e.wrapper.offsetWidth;this.wrapperHeight=e.wrapper.clientHeight;this.wrapperWidth=e.wrapper.clientWidth;this.oldDisplayWidth=hb(a);this.force=c;this.dims=ud(a);this.events=[]};Pc.prototype.signal=function(a,b){S(a,b)&&
this.events.push(arguments)};Pc.prototype.finish=function(){for(var a=0;a<this.events.length;a++)V.apply(null,this.events[a])};var Qc=0,Fa=null;ba?Fa=-.53:Wa?Fa=15:Gc?Fa=-.7:Uf&&(Fa=-1/3);var Ga=function(a,b){this.ranges=a;this.primIndex=b};Ga.prototype.primary=function(){return this.ranges[this.primIndex]};Ga.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],e=a.ranges[b];
if(!ed(c.anchor,e.anchor)||!ed(c.head,e.head))return!1}return!0};Ga.prototype.deepCopy=function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new ca(fd(this.ranges[b].anchor),fd(this.ranges[b].head));return new Ga(a,this.primIndex)};Ga.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1};Ga.prototype.contains=function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var e=this.ranges[c];if(0<=L(b,e.from())&&0>=L(a,e.to()))return c}return-1};
var ca=function(a,b){this.anchor=a;this.head=b};ca.prototype.from=function(){return Bc(this.anchor,this.head)};ca.prototype.to=function(){return yc(this.anchor,this.head)};ca.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};gc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,e=a+b;c<e;++c){var g=this.lines[c];this.height-=g.height;var d=g;d.parent=null;ke(d);sa(g,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,
this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};hc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var e=this.children[c],g=e.chunkSize();if(a<g){var d=Math.min(b,g-a),f=e.height;e.removeInner(a,d);this.height-=f-e.height;g==d&&(this.children.splice(c--,
1),e.parent=null);if(0==(b-=d))break;a=0}else a-=g}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof gc))&&(a=[],this.collapse(a),this.children=[new gc(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var e=0;e<this.children.length;++e){var g=this.children[e],d=g.chunkSize();if(a<=d){g.insertInner(a,b,c);if(g.lines&&50<g.lines.length){for(b=
a=g.lines.length%25+25;b<g.lines.length;)c=new gc(g.lines.slice(b,b+=25)),g.height-=c.height,this.children.splice(++e,0,c),c.parent=this;g.lines=g.lines.slice(0,a);this.maybeSpill()}break}a-=d}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5);b=new hc(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=d(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new hc(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<
a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var e=0;e<this.children.length;++e){var g=this.children[e],d=g.chunkSize();if(a<d){d=Math.min(b,d-a);if(g.iterN(a,d,c))return!0;if(0==(b-=d))break;a=0}else a-=d}}};var ic=function(a,b,c){if(c)for(var e in c)c.hasOwnProperty(e)&&(this[e]=c[e]);this.doc=a;this.node=b};ic.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,e=X(c);if(null!=e&&b){for(var g=0;g<b.length;++g)b[g]==this&&b.splice(g--,1);b.length||
(c.widgets=null);var d=Ub(this);na(c,Math.max(0,c.height-d));a&&(Ba(a,function(){var b=-d;Pa(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Nc(a,b);ab(a,e,"widget")}),sa(a,"lineWidgetCleared",a,this,e))}};ic.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,e=this.line;this.height=null;var g=Ub(this)-b;g&&(Za(this.doc,e)||na(e,e.height+g),c&&Ba(c,function(){c.curOp.forceUpdate=!0;Pa(e)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&Nc(c,g);sa(c,"lineWidgetChanged",c,a,X(e))}))};
ea(ic);var yf=0,db=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++yf};db.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&ob(a);if(S(this,"clear")){var c=this.find();c&&sa(this,"clear",c.from,c.to)}for(var e=c=null,g=0;g<this.lines.length;++g){var d=this.lines[g],f=Qb(d.markedSpans,this);a&&!this.collapsed?ab(a,X(d),"text"):a&&(null!=f.to&&(e=X(d)),null!=f.from&&(c=X(d)));for(var h=d,k=void 0,l=d.markedSpans,n=f,p=0;p<l.length;++p)l[p]!=n&&(k||
(k=[])).push(l[p]);h.markedSpans=k;null==f.from&&this.collapsed&&!Za(this.doc,d)&&a&&na(d,zb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(g=0;g<this.lines.length;++g)d=Oa(this.lines[g]),f=Ec(d),f>a.display.maxLineLength&&(a.display.maxLine=d,a.display.maxLineLength=f,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&za(a,c,e+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&of(a.doc));a&&sa(a,"markerCleared",a,this,c,
e);b&&pb(a);this.parent&&this.parent.clear()}};db.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,e,g=0;g<this.lines.length;++g){var d=this.lines[g],f=Qb(d.markedSpans,this);if(null!=f.from&&(c=C(b?d:X(d),f.from),-1==a))return c;if(null!=f.to&&(e=C(b?d:X(d),f.to),1==a))return e}return c&&{from:c,to:e}};db.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,e=this.doc.cm;b&&e&&Ba(e,function(){var g=b.line,d=X(b.line);if(d=td(e,d))Be(d),e.curOp.selectionChanged=
e.curOp.forceUpdate=!0;e.curOp.updateMaxLine=!0;Za(c.doc,g)||null==c.height||(d=c.height,c.height=null,(d=Ub(c)-d)&&na(g,g.height+d));sa(e,"markerChanged",e,a)})};db.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=d(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};db.prototype.detachLine=function(a){this.lines.splice(d(this.lines,a),1);!this.lines.length&&this.doc.cm&&
(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};ea(db);var jc=function(a,b){this.markers=a;this.primary=b;for(b=0;b<a.length;++b)a[b].parent=this};jc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();sa(this,"clear")}};jc.prototype.find=function(a,b){return this.primary.find(a,b)};ea(jc);var kh=0,Aa=function(a,b,c,e,d){if(!(this instanceof Aa))return new Aa(a,b,c,e,d);null==
c&&(c=0);hc.call(this,[new gc([new Cb("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=c;c=C(c,0);this.sel=Xa(c);this.history=new Rc(null);this.id=++kh;this.modeOption=b;this.lineSep=e;this.direction="rtl"==d?"rtl":"ltr";this.extend=!1;"string"==typeof a&&(a=this.splitLines(a));Nd(this,{from:c,to:c,text:a});ta(this,Xa(c),Ra)};Aa.prototype=ja(hc.prototype,{constructor:Aa,iter:function(a,b,c){c?this.iterN(a-this.first,
b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,e=0;e<b.length;++e)c+=b[e].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=ua(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:qa(function(a){var b=C(this.first,0),c=this.first+this.size-1;Fb(this,{from:b,to:C(c,A(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);this.cm&&
Yb(this.cm,0,0);ta(this,Xa(b),Ra)}),replaceRange:function(a,b,c,e){b=M(this,b);c=c?M(this,c):b;Gb(this,a,b,c,e)},getRange:function(a,b,c){a=Sa(this,M(this,a),M(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Nb(this,a))return A(this,a)},getLineNumber:function(a){return X(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=A(this,a));return Oa(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},
lastLine:function(){return this.first+this.size-1},clipPos:function(a){return M(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qa(function(a,b,c){a=M(this,"number"==typeof a?C(a,b||0):a);ta(this,Xa(a,null),c)}),setSelection:qa(function(a,b,c){var e=M(this,a);a=M(this,b||
a);ta(this,Xa(e,a),c)}),extendSelection:qa(function(a,b,c){Tc(this,M(this,a),b&&M(this,b),c)}),extendSelections:qa(function(a,b){kf(this,be(this,a),b)}),extendSelectionsBy:qa(function(a,b){a=N(this.sel.ranges,a);kf(this,be(this,a),b)}),setSelections:qa(function(a,b,c){if(a.length){for(var e=[],d=0;d<a.length;d++)e[d]=new ca(M(this,a[d].anchor),M(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));ta(this,Ma(this.cm,e,b),c)}}),addSelection:qa(function(a,b,c){var e=this.sel.ranges.slice(0);
e.push(new ca(M(this,a),M(this,b||a)));ta(this,Ma(this.cm,e,e.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,e=0;e<b.length;e++){var d=Sa(this,b[e].from(),b[e].to());c=c?c.concat(d):d}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,e=0;e<c.length;e++){var d=Sa(this,c[e].from(),c[e].to());!1!==a&&(d=d.join(a||this.lineSeparator()));b[e]=d}return b},replaceSelection:function(a,b,c){for(var e=[],d=0;d<this.sel.ranges.length;d++)e[d]=
a;this.replaceSelections(e,b,c||"+input")},replaceSelections:qa(function(a,b,c){for(var e=[],d=this.sel,f=0;f<d.ranges.length;f++){var h=d.ranges[f];e[f]={from:h.from(),to:h.to(),text:this.splitLines(a[f]),origin:c}}if(a=b&&"end"!=b){a=[];d=c=C(this.first,0);for(f=0;f<e.length;f++){var m=e[f];h=bf(m.from,c,d);var k=bf(bb(m),c,d);c=m.to;d=k;"around"==b?(m=this.sel.ranges[f],m=0>L(m.head,m.anchor),a[f]=new ca(m?k:h,m?h:k)):a[f]=new ca(h,h)}a=new Ga(a,this.sel.primIndex)}b=a;for(a=e.length-1;0<=a;a--)Fb(this,
e[a]);b?lf(this,b):this.cm&&Ab(this.cm)}),undo:qa(function(){Wc(this,"undo")}),redo:qa(function(){Wc(this,"redo")}),undoSelection:qa(function(){Wc(this,"undo",!0)}),redoSelection:qa(function(){Wc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,e=0;e<a.done.length;e++)a.done[e].ranges||++b;for(e=0;e<a.undone.length;e++)a.undone[e].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){var a=
this;this.history=new Rc(this.history.maxGeneration);cb(this,function(b){return b.history=a.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Db(this.history.done),undone:Db(this.history.undone)}},setHistory:function(a){var b=
this.history=new Rc(this.history.maxGeneration);b.done=Db(a.done.slice(0),null,!0);b.undone=Db(a.undone.slice(0),null,!0)},setGutterMarker:qa(function(a,b,c){return fc(this,a,"gutter",function(a){var e=a.gutterMarkers||(a.gutterMarkers={});e[b]=c;!c&&R(e)&&(a.gutterMarkers=null);return!0})}),clearGutter:qa(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&fc(b,c,"gutter",function(){c.gutterMarkers[a]=null;R(c.gutterMarkers)&&(c.gutterMarkers=null);return!0})})}),lineInfo:function(a){if("number"==
typeof a){if(!Nb(this,a))return null;var b=a;a=A(this,a);if(!a)return null}else if(b=X(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:qa(function(a,b,c){return fc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[e]){if(f(c).test(a[e]))return!1;a[e]+=" "+c}else a[e]=c;return!0})}),
removeLineClass:qa(function(a,b,c){return fc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",d=a[e];if(d)if(null==c)a[e]=null;else{var h=d.match(f(c));if(!h)return!1;var m=h.index+h[0].length;a[e]=d.slice(0,h.index)+(h.index&&m!=d.length?" ":"")+d.slice(m)||null}else return!1;return!0})}),addLineWidget:qa(function(a,b,c){return Gg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,
c){return Hb(this,M(this,a),M(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){b={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=M(this,a);return Hb(this,a,a,b,"bookmark")},findMarksAt:function(a){a=M(this,a);var b=[],c=A(this,a.line).markedSpans;if(c)for(var e=0;e<c.length;++e){var d=c[e];(null==d.from||d.from<=a.ch)&&(null==d.to||d.to>=a.ch)&&b.push(d.marker.parent||d.marker)}return b},
findMarks:function(a,b,c){a=M(this,a);b=M(this,b);var e=[],d=a.line;this.iter(a.line,b.line+1,function(g){if(g=g.markedSpans)for(var f=0;f<g.length;f++){var h=g[f];null!=h.to&&d==a.line&&a.ch>=h.to||null==h.from&&d!=a.line||null!=h.from&&d==b.line&&h.from>=b.ch||c&&!c(h.marker)||e.push(h.marker.parent||h.marker)}++d});return e},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,
c=this.first,e=this.lineSeparator().length;this.iter(function(d){d=d.text.length+e;if(d>a)return b=a,!0;a-=d;++c});return M(this,C(c,b))},indexFromPos:function(a){a=M(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;var c=this.lineSeparator().length;this.iter(this.first,a.line,function(a){b+=a.text.length+c});return b},copy:function(a){var b=new Aa(ua(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;
b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Aa(ua(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=zf(this);
for(c=0;c<a.length;c++){var e=a[c],d=e.find(),f=b.clipPos(d.from);d=b.clipPos(d.to);L(f,d)&&(f=Hb(b,f,d,e.primary,e.primary.type),e.markers.push(f),f.parent=e)}return b},unlinkDoc:function(a){a instanceof ia&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Ig(zf(this));break}if(a.history==this.history){var c=[a.id];cb(a,function(a){return c.push(a.id)},!0);a.history=new Rc(null);a.history.done=Db(this.history.done,c);
a.history.undone=Db(this.history.undone,c)}},iterLinkedDocs:function(a){cb(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):$d(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:qa(function(a){"rtl"!=a&&(a="ltr");a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&Cg(this.cm))})});Aa.prototype.eachLine=Aa.prototype.iter;for(var Bf=0,Tf=!1,eb={3:"Pause",
8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",
63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},vc=0;10>vc;vc++)eb[vc+48]=eb[vc+96]=String(vc);for(var cd=65;90>=cd;cd++)eb[cd]=String.fromCharCode(cd);for(var wc=1;12>=wc;wc++)eb[wc+111]=eb[wc+63235]="F"+wc;var kc={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",
Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev",
"Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore",
"Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext",
"Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};kc["default"]=Ha?kc.macDefault:kc.pcDefault;var lc={selectAll:qf,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Ra)},killLine:function(a){return Jb(a,
function(b){if(b.empty()){var c=A(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:C(b.head.line+1,0)}:{from:b.head,to:C(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return Jb(a,function(b){return{from:C(b.from().line,0),to:M(a.doc,C(b.to().line+1,0))}})},delLineLeft:function(a){return Jb(a,function(a){return{from:C(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return Jb(a,function(b){var c=a.charCoords(b.head,
"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return Jb(a,function(b){var c=a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(C(a.firstLine(),
0))},goDocEnd:function(a){return a.extendSelection(C(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return Hf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return If(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){b=b.head.line;var c=A(a.doc,b);var e=c;for(var d;d=wb(e,!1);)e=d.find(1,!0).line;e!=c&&(b=X(e));return Td(!0,a,c,b,-1)},{origin:"+move",bias:-1})},
goLineRight:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},tc)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},tc)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?
If(a,b.head):c},tc)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,
"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},
indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),e=a.options.tabSize,d=0;d<c.length;d++){var f=c[d].from();f=w(a.getLine(f.line),f.ch,e);b.push(F(e-f%e))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return Ba(a,function(){for(var b=a.listSelections(),c=[],e=0;e<b.length;e++)if(b[e].empty()){var d=
b[e].head,f=A(a.doc,d.line).text;if(f)if(d.ch==f.length&&(d=new C(d.line,d.ch-1)),0<d.ch)d=new C(d.line,d.ch+1),a.replaceRange(f.charAt(d.ch-1)+f.charAt(d.ch-2),C(d.line,d.ch-2),d,"+transpose");else if(d.line>a.doc.first){var h=A(a.doc,d.line-1).text;h&&(d=new C(d.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+h.charAt(h.length-1),C(d.line-1,h.length-1),d,"+transpose"))}c.push(new ca(d,d))}a.setSelections(c)})},newlineAndIndent:function(a){return Ba(a,function(){for(var b=a.listSelections(),
c=b.length-1;0<=c;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(c=0;c<b.length;c++)a.indentLine(b[c].from().line,null,!0);Ab(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Pg=new fb,Ud=null,Vd=function(a,b,c){this.time=a;this.pos=b;this.button=c};Vd.prototype.compare=function(a,b,c){return this.time+400>a&&0==L(b,this.pos)&&c==this.button};var oc,nc,Kb={toString:function(){return"CodeMirror.Init"}},
Sf={},ad={};ia.defaults=Sf;ia.optionHandlers=ad;var Yd=[];ia.defineInitHook=function(a){return Yd.push(a)};var Ca=null,da=function(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new fb;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};da.prototype.init=function(a){function b(a){if(!W(d,a)){if(d.somethingSelected())Ca={lineWise:!1,text:d.getSelections()},"cut"==a.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var b=
Xf(d);Ca={lineWise:!0,text:b.text};"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,Ra);d.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var c=Ca.text.join("\n");a.clipboardData.setData("Text",c);if(a.clipboardData.getData("Text")==c){a.preventDefault();return}}var g=Zf();a=g.firstChild;d.display.lineSpace.insertBefore(g,d.display.lineSpace.firstChild);a.value=Ca.text.join("\n");var h=document.activeElement;sc(a);setTimeout(function(){d.display.lineSpace.removeChild(g);
h.focus();h==f&&e.showPrimarySelection()},50)}}var c=this,e=this,d=e.cm,f=e.div=a.lineDiv;Yf(f,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize);I(f,"paste",function(a){W(d,a)||Wf(a,d)||11>=fa&&setTimeout(pa(d,function(){return c.updateFromDOM()}),20)});I(f,"compositionstart",function(a){c.composing={data:a.data,done:!1}});I(f,"compositionupdate",function(a){c.composing||(c.composing={data:a.data,done:!1})});I(f,"compositionend",function(a){c.composing&&(a.data!=c.composing.data&&
c.readFromDOMSoon(),c.composing.done=!0)});I(f,"touchstart",function(){return e.forceCompositionEnd()});I(f,"input",function(){c.composing||c.readFromDOMSoon()});I(f,"copy",b);I(f,"cut",b)};da.prototype.prepareSelection=function(){var a=Le(this.cm,!1);a.focus=document.activeElement==this.div;return a};da.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))};da.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};
da.prototype.showPrimarySelection=function(){var a=this.getSelection(),b=this.cm,c=b.doc.sel.primary(),e=c.from();c=c.to();if(b.display.viewTo==b.display.viewFrom||e.line>=b.display.viewTo||c.line<b.display.viewFrom)a.removeAllRanges();else{var d=bd(b,a.anchorNode,a.anchorOffset),f=bd(b,a.focusNode,a.focusOffset);if(!d||d.bad||!f||f.bad||0!=L(Bc(d,f),e)||0!=L(yc(d,f),c))if(d=b.display.view,e=e.line>=b.display.viewFrom&&ag(b,e)||{node:d[0].measure.map[2],offset:0},c=c.line<b.display.viewTo&&ag(b,c),
c||(c=d[d.length-1].measure,c=c.maps?c.maps[c.maps.length-1]:c.map,c={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}),e&&c){d=a.rangeCount&&a.getRangeAt(0);try{var h=Rb(e.node,e.offset,c.offset,c.node)}catch(m){}h&&(!Wa&&b.state.focused?(a.collapse(e.node,e.offset),h.collapsed||(a.removeAllRanges(),a.addRange(h))):(a.removeAllRanges(),a.addRange(h)),d&&null==a.anchorNode?a.addRange(d):Wa&&this.startGracePeriod());this.rememberSelection()}else a.removeAllRanges()}};da.prototype.startGracePeriod=
function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)};da.prototype.showMultipleSelections=function(a){E(this.cm.display.cursorDiv,a.cursors);E(this.cm.display.selectionDiv,a.selection)};da.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;
this.lastFocusOffset=a.focusOffset};da.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return P(this.div,a)};da.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())};da.prototype.blur=function(){this.div.blur()};da.prototype.getField=function(){return this.div};da.prototype.supportsTouch=
function(){return!0};da.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():Ba(this.cm,function(){return b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)};da.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||
a.focusOffset!=this.lastFocusOffset};da.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=this.getSelection(),b=this.cm;if(Hc&&Gc&&this.cm.display.gutterSpecs.length&&dh(a.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var c=bd(b,a.anchorNode,a.anchorOffset),e=bd(b,a.focusNode,a.focusOffset);c&&e&&Ba(b,function(){ta(b.doc,
Xa(c,e),Ra);if(c.bad||e.bad)b.curOp.selectionChanged=!0})}}};da.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,b=a.display,c=a.doc.sel.primary(),e=c.from(),d=c.to();0==e.ch&&e.line>a.firstLine()&&(e=C(e.line-1,A(a.doc,e.line-1).length));d.ch==A(a.doc,d.line).text.length&&d.line<a.lastLine()&&(d=C(d.line+1,0));if(e.line<b.viewFrom||d.line>b.viewTo-1)return!1;var f;e.line==b.viewFrom||0==(f=ib(a,e.line))?(c=X(b.view[0].line),
f=b.view[0].node):(c=X(b.view[f].line),f=b.view[f-1].node.nextSibling);var h=ib(a,d.line);h==b.view.length-1?(d=b.viewTo-1,b=b.lineDiv.lastChild):(d=X(b.view[h+1].line)-1,b=b.view[h+1].node.previousSibling);if(!f)return!1;b=a.doc.splitLines(eh(a,f,b,c,d));for(f=Sa(a.doc,C(c,0),C(d,A(a.doc,d).text.length));1<b.length&&1<f.length;)if(t(b)==t(f))b.pop(),f.pop(),d--;else if(b[0]==f[0])b.shift(),f.shift(),c++;else break;var m=0;h=0;for(var k=b[0],l=f[0],n=Math.min(k.length,l.length);m<n&&k.charCodeAt(m)==
l.charCodeAt(m);)++m;k=t(b);l=t(f);for(n=Math.min(k.length-(1==b.length?m:0),l.length-(1==f.length?m:0));h<n&&k.charCodeAt(k.length-h-1)==l.charCodeAt(l.length-h-1);)++h;if(1==b.length&&1==f.length&&c==e.line)for(;m&&m>e.ch&&k.charCodeAt(k.length-h-1)==l.charCodeAt(l.length-h-1);)m--,h++;b[b.length-1]=k.slice(0,k.length-h).replace(/^\u200b+/,"");b[0]=b[0].slice(m).replace(/\u200b+$/,"");e=C(c,m);c=C(d,f.length?t(f).length-h:0);if(1<b.length||b[0]||L(e,c))return Gb(a.doc,b,e,c,"+input"),!0};da.prototype.ensurePolled=
function(){this.forceCompositionEnd()};da.prototype.reset=function(){this.forceCompositionEnd()};da.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};da.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){a.readDOMTimeout=null;if(a.composing)if(a.composing.done)a.composing=null;else return;a.updateFromDOM()},80))};da.prototype.updateFromDOM=
function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||Ba(this.cm,function(){return za(a.cm)})};da.prototype.setUneditable=function(a){a.contentEditable="false"};da.prototype.onKeyPress=function(a){0==a.charCode||this.composing||(a.preventDefault(),this.cm.isReadOnly()||pa(this.cm,Zd)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))};da.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)};da.prototype.onContextMenu=function(){};da.prototype.resetPosition=
function(){};da.prototype.needsContentAttribute=!0;var ma=function(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new fb;this.hasSelection=!1;this.composing=null};ma.prototype.init=function(a){function b(a){if(!W(d,a)){if(d.somethingSelected())Ca={lineWise:!1,text:d.getSelections()};else if(d.options.lineWiseCopyCut){var b=Xf(d);Ca={lineWise:!0,text:b.text};"cut"==a.type?d.setSelections(b.ranges,null,Ra):(e.prevInput="",f.value=b.text.join("\n"),sc(f))}else return;"cut"==a.type&&
(d.state.cutIncoming=+new Date)}}var c=this,e=this,d=this.cm;this.createField(a);var f=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild);qc&&(f.style.width="0px");I(f,"input",function(){ba&&9<=fa&&c.hasSelection&&(c.hasSelection=null);e.poll()});I(f,"paste",function(a){W(d,a)||Wf(a,d)||(d.state.pasteIncoming=+new Date,e.fastPoll())});I(f,"cut",b);I(f,"copy",b);I(a.scroller,"paste",function(b){if(!Va(a,b)&&!W(d,b))if(f.dispatchEvent){var c=new Event("paste");c.clipboardData=b.clipboardData;
f.dispatchEvent(c)}else d.state.pasteIncoming=+new Date,e.focus()});I(a.lineSpace,"selectstart",function(b){Va(a,b)||U(b)});I(f,"compositionstart",function(){var a=d.getCursor("from");e.composing&&e.composing.range.clear();e.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}});I(f,"compositionend",function(){e.composing&&(e.poll(),e.composing.range.clear(),e.composing=null)})};ma.prototype.createField=function(a){this.wrapper=Zf();this.textarea=this.wrapper.firstChild};
ma.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,e=Le(a);if(a.options.moveInputWithCursor){a=Ka(a,c.sel.primary().head,"div");c=b.wrapper.getBoundingClientRect();var d=b.lineDiv.getBoundingClientRect();e.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+d.top-c.top));e.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+d.left-c.left))}return e};ma.prototype.showSelection=function(a){var b=this.cm.display;E(b.cursorDiv,a.cursors);E(b.selectionDiv,a.selection);
null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")};ma.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;b.somethingSelected()?(this.prevInput="",a=b.getSelection(),this.textarea.value=a,b.state.focused&&sc(this.textarea),ba&&9<=fa&&(this.hasSelection=a)):a||(this.prevInput=this.textarea.value="",ba&&9<=fa&&(this.hasSelection=null))}};ma.prototype.getField=function(){return this.textarea};ma.prototype.supportsTouch=function(){return!1};
ma.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!cc||K()!=this.textarea))try{this.textarea.focus()}catch(a){}};ma.prototype.blur=function(){this.textarea.blur()};ma.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};ma.prototype.receivedFocus=function(){this.slowPoll()};ma.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})};ma.prototype.fastPoll=
function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)};ma.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,e=this.prevInput;if(this.contextMenuPending||!b.state.focused||jh(c)&&!e&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var d=c.value;if(d==e&&!b.somethingSelected())return!1;if(ba&&9<=fa&&this.hasSelection===d||Ha&&/[\uf700-\uf7ff]/.test(d))return b.display.input.reset(),
!1;if(b.doc.sel==b.display.selForContextMenu){var f=d.charCodeAt(0);8203!=f||e||(e="\u200b");if(8666==f)return this.reset(),this.cm.execCommand("undo")}var h=0;for(f=Math.min(e.length,d.length);h<f&&e.charCodeAt(h)==d.charCodeAt(h);)++h;Ba(b,function(){Zd(b,d.slice(h),e.length-h,null,a.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?c.value=a.prevInput="":a.prevInput=d;a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))});
return!0};ma.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};ma.prototype.onKeyPress=function(){ba&&9<=fa&&(this.hasSelection=null);this.fastPoll()};ma.prototype.onContextMenu=function(a){function b(){if(null!=h.selectionStart){var a=d.somethingSelected(),b="\u200b"+(a?h.value:"");h.value="\u21da";h.value=b;e.prevInput=a?"":"\u200b";h.selectionStart=1;h.selectionEnd=b.length;f.selForContextMenu=d.doc.sel}}function c(){if(e.contextMenuPending==c&&(e.contextMenuPending=
!1,e.wrapper.style.cssText=p,h.style.cssText=n,ba&&9>fa&&f.scrollbars.setScrollTop(f.scroller.scrollTop=l),null!=h.selectionStart)){(!ba||ba&&9>fa)&&b();var a=0,g=function(){f.selForContextMenu==d.doc.sel&&0==h.selectionStart&&0<h.selectionEnd&&"\u200b"==e.prevInput?pa(d,qf)(d):10>a++?f.detectingSelectAll=setTimeout(g,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(g,200)}}var e=this,d=e.cm,f=d.display,h=e.textarea;e.contextMenuPending&&e.contextMenuPending();var m=
lb(d,a),l=f.scroller.scrollTop;if(m&&!La){d.options.resetSelectionOnContextMenu&&-1==d.doc.sel.contains(m)&&pa(d,ta)(d.doc,Xa(m),Ra);var n=h.style.cssText,p=e.wrapper.style.cssText;m=e.wrapper.offsetParent.getBoundingClientRect();e.wrapper.style.cssText="position: static";h.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-m.top-5)+"px; left: "+(a.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(ba?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
if(wa)var q=window.scrollY;f.input.focus();wa&&window.scrollTo(null,q);f.input.reset();d.somethingSelected()||(h.value=e.prevInput=" ");e.contextMenuPending=c;f.selForContextMenu=d.doc.sel;clearTimeout(f.detectingSelectAll);ba&&9<=fa&&b();if(Wd){H(a);var t=function(){k(window,"mouseup",t);setTimeout(c,20)};I(window,"mouseup",t)}else setTimeout(c,50)}};ma.prototype.readOnlyChanged=function(a){a||this.reset();this.textarea.disabled="nocursor"==a};ma.prototype.setUneditable=function(){};ma.prototype.needsContentAttribute=
!1;(function(a){function b(b,d,f,h){a.defaults[b]=d;f&&(c[b]=h?function(a,b,e){e!=Kb&&f(a,b,e)}:f)}var c=a.optionHandlers;a.defineOption=b;a.Init=Kb;b("value","",function(a,b){return a.setValue(b)},!0);b("mode",null,function(a,b){a.doc.modeOption=b;Md(a)},!0);b("indentUnit",2,Md,!0);b("indentWithTabs",!1);b("smartIndent",!0);b("tabSize",4,function(a){dc(a);Vb(a);za(a)},!0);b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var e=[],c=a.doc.first;a.doc.iter(function(a){for(var d=0;;){var g=a.text.indexOf(b,
d);if(-1==g)break;d=g+b.length;e.push(C(c,g))}c++});for(var d=e.length-1;0<=d;d--)Gb(a.doc,b,e[d],C(e[d].line,e[d].ch+b.length))}});b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=Kb&&a.refresh()});b("specialCharPlaceholder",og,function(a){return a.refresh()},!0);b("electricChars",!0);b("inputStyle",cc?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");
},!0);b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0);b("autocorrect",!1,function(a,b){return a.getInputField().autocorrect=b},!0);b("autocapitalize",!1,function(a,b){return a.getInputField().autocapitalize=b},!0);b("rtlMoveVisually",!ih);b("wholeLineUpdateBefore",!0);b("theme","default",function(a){Rf(a);bc(a)},!0);b("keyMap","default",function(a,b,c){b=Xc(b);(c=c!=Kb&&Xc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});b("extraKeys",null);b("configureMouse",
null);b("lineWrapping",!1,bh,!0);b("gutters",[],function(a,b){a.display.gutterSpecs=Kd(b,a.options.lineNumbers);bc(a)},!0);b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?Bd(a.display)+"px":"0";a.refresh()},!0);b("coverGutterNextToScrollbar",!1,function(a){return Bb(a)},!0);b("scrollbarStyle","native",function(a){Ue(a);Bb(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);b("lineNumbers",!1,function(a,b){a.display.gutterSpecs=
Kd(a.options.gutters,b);bc(a)},!0);b("firstLineNumber",1,bc,!0);b("lineNumberFormatter",function(a){return a},bc,!0);b("showCursorWhenSelecting",!1,Wb,!0);b("resetSelectionOnContextMenu",!0);b("lineWiseCopyCut",!0);b("pasteLinesPerSelection",!0);b("selectionsMayTouch",!1);b("readOnly",!1,function(a,b){"nocursor"==b&&(Xb(a),a.display.input.blur());a.display.input.readOnlyChanged(b)});b("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);b("dragDrop",!0,ah);b("allowDropFileTypes",null);
b("cursorBlinkRate",530);b("cursorScrollMargin",0);b("cursorHeight",1,Wb,!0);b("singleCursorHeightPerLine",!0,Wb,!0);b("workTime",100);b("workDelay",100);b("flattenSpans",!0,dc,!0);b("addModeClass",!1,dc,!0);b("pollInterval",100);b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b});b("historyEventDelay",1250);b("viewportMargin",10,function(a){return a.refresh()},!0);b("maxHighlightLength",1E4,dc,!0);b("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});b("tabindex",
null,function(a,b){return a.display.input.getField().tabIndex=b||""});b("autofocus",null);b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0);b("phrases",null)})(ia);(function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,c){var e=this.options,d=e[a];if(e[a]!=c||"mode"==a)e[a]=c,b.hasOwnProperty(a)&&pa(this,b[a])(this,c,d),V(this,"optionChange",this,a)},getOption:function(a){return this.options[a]},
getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Xc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:xa(function(b,c){var e=b.token?b:a.getMode(this.options,b);if(e.startState)throw Error("Overlays may not be stateful.");Da(this.state.overlays,{mode:e,modeSpec:b,opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority});this.state.modeGen++;
za(this)}),removeOverlay:xa(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var e=b[c].modeSpec;if(e==a||"string"==typeof a&&e.name==a){b.splice(c,1);this.state.modeGen++;za(this);break}}}),indentLine:xa(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Nb(this.doc,a)&&pc(this,a,b,c)}),indentSelection:xa(function(a){for(var b=this.doc.sel.ranges,c=-1,e=0;e<b.length;e++){var d=b[e];if(d.empty())d.head.line>c&&
(pc(this,d.head.line,a,!0),c=d.head.line,e==this.doc.sel.primIndex&&Ab(this));else{var f=d.from();d=d.to();var h=Math.max(c,f.line);c=Math.min(this.lastLine(),d.line-(d.ch?0:1))+1;for(d=h;d<c;++d)pc(this,d,a);d=this.doc.sel.ranges;0==f.ch&&b.length==d.length&&0<d[e].from().ch&&Qd(this.doc,e,new ca(f,d[e].to()),Ra)}}}),getTokenAt:function(a,b){return ge(this,a,b)},getLineTokens:function(a,b){return ge(this,C(a),b,!0)},getTokenTypeAt:function(a){a=M(this.doc,a);var b=ee(this,A(this.doc,a.line)),c=0,
e=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var d=c+e>>1;if((d?b[2*d-1]:0)>=a)e=d;else if(b[2*d+1]<a)c=d+1;else{b=b[2*d+2];break}}c=b?b.indexOf("overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var e=[];if(!c.hasOwnProperty(b))return e;var g=c[b];a=this.getModeAt(a);if("string"==typeof a[b])g[a[b]]&&
e.push(g[a[b]]);else if(a[b])for(var f=0;f<a[b].length;f++){var h=g[a[b][f]];h&&e.push(h)}else a.helperType&&g[a.helperType]?e.push(g[a.helperType]):g[a.name]&&e.push(g[a.name]);for(b=0;b<g._global.length;b++)f=g._global[b],f.pred(a,this)&&-1==d(e,f.val)&&e.push(f.val);return e},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Pb(this,a+1,b).state},cursorCoords:function(a,b){var c=this.doc.sel.primary();a=null==a?c.head:"object"==
typeof a?M(this.doc,a):a?c.from():c.to();return Ka(this,a,b||"page")},charCoords:function(a,b){return xd(this,M(this.doc,a),b||"page")},coordsChar:function(a,b){a=Fe(this,a,b||"page");return zd(this,a.left,a.top)},lineAtHeight:function(a,b){a=Fe(this,{top:a,left:0},b||"page").top;return ka(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d=!1;if("number"==typeof a){var e=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>e&&(a=e,d=!0);a=A(this.doc,a)}return Ic(this,
a,{top:0,left:0},b||"page",c||d).top+(d?this.doc.height-Pa(a):0)},defaultTextHeight:function(){return zb(this.display)},defaultCharWidth:function(){return yb(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,f){var e=this.display;a=Ka(this,M(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);e.sizer.appendChild(b);if("over"==d)g=a.top;
else if("above"==d||"near"==d){var k=Math.max(e.wrapper.clientHeight,this.doc.height),m=Math.max(e.sizer.clientWidth,e.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>m&&(h=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==f?(h=e.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==f?h=0:"middle"==f&&(h=(e.sizer.clientWidth-b.offsetWidth)/2),b.style.left=
h+"px");c&&(a=Fd(this,{left:h,top:g,right:h+b.offsetWidth,bottom:g+b.offsetHeight}),null!=a.scrollTop&&Zb(this,a.scrollTop),null!=a.scrollLeft&&nb(this,a.scrollLeft))},triggerOnKeyDown:xa(Lf),triggerOnKeyPress:xa(Nf),triggerOnKeyUp:Mf,triggerOnMouseDown:xa(Of),execCommand:function(a){if(lc.hasOwnProperty(a))return lc[a].call(null,this)},triggerElectric:xa(function(a){Vf(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);a=M(this.doc,a);for(var g=0;g<b&&(a=ae(this.doc,a,e,c,d),!a.hitSide);++g);
return a},moveH:xa(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?ae(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},tc)}),deleteH:xa(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):Jb(this,function(d){var e=ae(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var g=M(this.doc,a);for(a=0;a<b&&(g=Ka(this,
g,"div"),null==d?d=g.left:g.left=d,g=$f(this,g,e,c),!g.hitSide);++a);return g},moveV:xa(function(a,b){var c=this,d=this.doc,e=[],g=!this.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(f){if(g)return 0>a?f.from():f.to();var h=Ka(c,f.head,"div");null!=f.goalColumn&&(h.left=f.goalColumn);e.push(h.left);var k=$f(c,h,a,b);"page"==b&&f==d.sel.primary()&&Nc(c,xd(c,k,"div").top-h.top);return k},tc);if(e.length)for(var f=0;f<d.sel.ranges.length;f++)d.sel.ranges[f].goalColumn=
e[f]}),findWordAt:function(a){var b=A(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");"before"!=a.sticky&&d!=b.length||!c?++d:--c;var f=b.charAt(c);for(f=oa(f,e)?function(a){return oa(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!oa(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new ca(C(a.line,c),C(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?
v(this.display.cursorDiv,"CodeMirror-overwrite"):mb(this.display.cursorDiv,"CodeMirror-overwrite"),V(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==K()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:xa(function(a,b){Yb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Qa(this)-this.display.barHeight,width:a.scrollWidth-Qa(this)-
this.display.barWidth,clientHeight:sd(this),clientWidth:hb(this)}},scrollIntoView:xa(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:C(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;null!=a.from.line?(Oc(this),this.curOp.scrollToPos=a):Qe(this,a.from,a.to,a.margin)}),setSize:xa(function(a,b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":
a};null!=a&&(this.display.wrapper.style.width=d(a));null!=b&&(this.display.wrapper.style.height=d(b));this.options.lineWrapping&&Ce(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){ab(c,e,"widget");break}++e});this.curOp.forceUpdate=!0;V(this,"refresh",this)}),operation:function(a){return Ba(this,a)},startOperation:function(){return ob(this)},endOperation:function(){return pb(this)},refresh:xa(function(){var a=
this.display.cachedTextHeight;za(this);this.curOp.forceUpdate=!0;Vb(this);Yb(this,this.doc.scrollLeft,this.doc.scrollTop);Jd(this.display);(null==a||.5<Math.abs(a-zb(this.display)))&&Cd(this);V(this,"refresh",this)}),swapDoc:xa(function(a){var b=this.doc;b.cm=null;this.state.selectingText&&this.state.selectingText();df(this,a);Vb(this);this.display.input.reset();Yb(this,a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;sa(this,"swapDoc",this,b);return b}),phrase:function(a){var b=this.options.phrases;
return b&&Object.prototype.hasOwnProperty.call(b,a)?b[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};ea(a);a.registerHelper=function(b,d,f){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]});c[b][d]=f};a.registerGlobalHelper=function(b,d,f,h){a.registerHelper(b,d,h);c[b]._global.push({pred:f,val:h})}})(ia);
var lh="iter insert remove copy getEditor constructor".split(" "),xc;for(xc in Aa.prototype)Aa.prototype.hasOwnProperty(xc)&&0>d(lh,xc)&&(ia.prototype[xc]=function(a){return function(){return a.apply(this.doc,arguments)}}(Aa.prototype[xc]));ea(Aa);ia.inputStyles={textarea:ma,contenteditable:da};ia.defineMode=function(a){ia.defaults.mode||"null"==a||(ia.defaults.mode=a);l.apply(this,arguments)};ia.defineMIME=function(a,b){ub[a]=b};ia.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}});
ia.defineMIME("text/plain","null");ia.defineExtension=function(a,b){ia.prototype[a]=b};ia.defineDocExtension=function(a,b){Aa.prototype[a]=b};ia.fromTextArea=function(a,b){function c(){a.value=l.getValue()}b=b?Z(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=K();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(I(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var g=
a.form;var f=g.submit;try{var h=g.submit=function(){c();g.submit=f;g.submit();g.submit=h}}catch(B){}}b.finishInit=function(d){d.save=c;d.getTextArea=function(){return a};d.toTextArea=function(){d.toTextArea=isNaN;c();a.parentNode.removeChild(d.getWrapperElement());a.style.display="";a.form&&(k(a.form,"submit",c),b.leaveSubmitMethodAlone||"function"!=typeof a.form.submit||(a.form.submit=f))}};a.style.display="none";var l=ia(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return l};
(function(a){a.off=k;a.on=I;a.wheelEventPixels=Bg;a.Doc=Aa;a.splitLines=$d;a.countColumn=w;a.findColumn=h;a.isWordChar=Ta;a.Pass=Zc;a.signal=V;a.Line=Cb;a.changeEnd=bb;a.scrollbarModel=Ve;a.Pos=C;a.cmpPos=L;a.modes=hd;a.mimeModes=ub;a.resolveMode=gb;a.getMode=sb;a.modeExtensions=vb;a.extendMode=Mb;a.copyState=x;a.startState=Ia;a.innerMode=tb;a.commands=lc;a.keyMap=kc;a.keyName=Gf;a.isModifierKey=Df;a.lookupKey=Ib;a.normalizeKeyMap=Ng;a.StringStream=la;a.SharedTextMarker=jc;a.TextMarker=db;a.LineWidget=
ic;a.e_preventDefault=U;a.e_stopPropagation=va;a.e_stop=H;a.addClass=v;a.contains=P;a.rmClass=mb;a.keyNames=eb})(ia);ia.version="5.52.2";return ia});(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){function J(f,q,z){var w=f.getLineHandle(q.line),d=q.ch-1,h=z&&z.afterCursor;null==h&&(h=/(^| )cm-fat-cursor($| )/.test(f.getWrapperElement().className));var y=z&&z.bracketRegex||/[(){}[\]]/;w=!h&&0<=d&&y.test(w.text.charAt(d))&&v[w.text.charAt(d)]||y.test(w.text.charAt(d+1))&&v[w.text.charAt(++d)];if(!w)return null;
h=">"==w.charAt(1)?1:-1;if(z&&z.strict&&0<h!=(d==q.ch))return null;y=f.getTokenTypeAt(K(q.line,d+1));f=E(f,K(q.line,d+(0<h?1:0)),h,y||null,z);return null==f?null:{from:K(q.line,d),to:f&&f.pos,match:f&&f.ch==w.charAt(0),forward:0<h}}function E(f,q,z,w,d){var h=d&&d.maxScanLineLength||1E4,y=d&&d.maxScanLines||1E3,t=[];d=d&&d.bracketRegex||/[(){}[\]]/;y=0<z?Math.min(q.line+y,f.lastLine()+1):Math.max(f.firstLine()-1,q.line-y);for(var N=q.line;N!=y;N+=z){var D=f.getLine(N);if(D){var P=0<z?0:D.length-1,
Z=0<z?D.length:-1;if(!(D.length>h))for(N==q.line&&(P=q.ch-(0>z?1:0));P!=Z;P+=z){var E=D.charAt(P);if(d.test(E)&&(void 0===w||f.getTokenTypeAt(K(N,P+1))==w)){var J=v[E];if(J&&">"==J.charAt(1)==0<z)t.push(E);else if(t.length)t.pop();else return{pos:K(N,P),ch:E}}}}}return N-z==(0<z?f.lastLine():f.firstLine())?!1:null}function z(f,q,v){for(var w=f.state.matchBrackets.maxHighlightLineLength||1E3,d=[],h=f.listSelections(),y=0;y<h.length;y++){var t=h[y].empty()&&J(f,h[y].head,v);if(t&&f.getLine(t.from.line).length<=
w){var z=t.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";d.push(f.markText(t.from,K(t.from.line,t.from.ch+1),{className:z}));t.to&&f.getLine(t.to.line).length<=w&&d.push(f.markText(t.to,K(t.to.line,t.to.ch+1),{className:z}))}}if(d.length)if(P&&f.state.focused&&f.focus(),v=function(){f.operation(function(){for(var f=0;f<d.length;f++)d[f].clear()})},q)setTimeout(v,800);else return v}function D(f){f.operation(function(){f.state.matchBrackets.currentlyHighlighted&&(f.state.matchBrackets.currentlyHighlighted(),
f.state.matchBrackets.currentlyHighlighted=null);f.state.matchBrackets.currentlyHighlighted=z(f,!1,f.state.matchBrackets)})}var P=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),K=f.Pos,v={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};f.defineOption("matchBrackets",!1,function(y,q,v){v&&v!=f.Init&&(y.off("cursorActivity",D),y.state.matchBrackets&&y.state.matchBrackets.currentlyHighlighted&&(y.state.matchBrackets.currentlyHighlighted(),
y.state.matchBrackets.currentlyHighlighted=null));q&&(y.state.matchBrackets="object"==typeof q?q:{},y.on("cursorActivity",D))});f.defineExtension("matchBrackets",function(){z(this,!0)});f.defineExtension("findMatchingBracket",function(f,q,v){if(v||"boolean"==typeof q)v?(v.strict=q,q=v):q=q?{strict:!0}:null;return J(this,f,q)});f.defineExtension("scanForBracket",function(f,q,v,w){return E(this,f,q,v,w)})});(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){function J(f,d){return"pairs"==d&&"string"==typeof f?f:"object"==typeof f&&null!=f[d]?f[d]:y[d]}function E(f){for(var d=0;d<f.length;d++){var h=f.charAt(d),q="'"+h+"'";Z[q]||(Z[q]=z(h))}}function z(f){return function(d){return P(d,f)}}function D(f){var d=f.state.closeBrackets;return!d||d.override?d:f.getModeAt(f.getCursor()).closeBrackets||
d}function P(w,d){var h=D(w);if(!h||w.getOption("disableInput"))return f.Pass;var y=J(h,"pairs"),t=y.indexOf(d);if(-1==t)return f.Pass;var z=J(h,"closeBefore");h=J(h,"triples");for(var P=y.charAt(t+1)==d,E=w.listSelections(),K=0==t%2,Z,oa=0;oa<E.length;oa++){var R=E[oa],Y=R.head;var Q=w.getRange(Y,q(Y.line,Y.ch+1));if(K&&!R.empty())Q="surround";else if(!P&&K||Q!=d)if(P&&1<Y.ch&&0<=h.indexOf(d)&&w.getRange(q(Y.line,Y.ch-2),Y)==d+d){if(2<Y.ch&&/\bstring/.test(w.getTokenTypeAt(q(Y.line,Y.ch-2))))return f.Pass;
Q="addFour"}else if(P){R=0==Y.ch?" ":w.getRange(q(Y.line,Y.ch-1),Y);if(f.isWordChar(Q)||R==d||f.isWordChar(R))return f.Pass;Q="both"}else if(K&&(0===Q.length||/\s/.test(Q)||-1<z.indexOf(Q)))Q="both";else return f.Pass;else Q=P&&v(w,Y)?"both":0<=h.indexOf(d)&&w.getRange(Y,q(Y.line,Y.ch+3))==d+d+d?"skipThree":"skip";if(!Z)Z=Q;else if(Z!=Q)return f.Pass}var aa=t%2?y.charAt(t-1):d,p=t%2?d:y.charAt(t+1);w.operation(function(){if("skip"==Z)w.execCommand("goCharRight");else if("skipThree"==Z)for(var d=0;3>
d;d++)w.execCommand("goCharRight");else if("surround"==Z){var h=w.getSelections();for(d=0;d<h.length;d++)h[d]=aa+h[d]+p;w.replaceSelections(h,"around");h=w.listSelections().slice();for(d=0;d<h.length;d++){var k=h,t=d;var y=h[d];var v=0<f.cmpPos(y.anchor,y.head);y={anchor:new q(y.anchor.line,y.anchor.ch+(v?-1:1)),head:new q(y.head.line,y.head.ch+(v?1:-1))};k[t]=y}w.setSelections(h)}else"both"==Z?(w.replaceSelection(aa+p,null),w.triggerElectric(aa+p),w.execCommand("goCharLeft")):"addFour"==Z&&(w.replaceSelection(aa+
aa+aa+aa,"before"),w.execCommand("goCharRight"))})}function K(f,d){f=f.getRange(q(d.line,d.ch-1),q(d.line,d.ch+1));return 2==f.length?f:null}function v(f,d){var h=f.getTokenAt(q(d.line,d.ch+1));return/\bstring/.test(h.type)&&h.start==d.ch&&(0==d.ch||!/\bstring/.test(f.getTokenTypeAt(d)))}var y={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},q=f.Pos;f.defineOption("autoCloseBrackets",!1,function(q,d,h){h&&h!=f.Init&&(q.removeKeyMap(Z),q.state.closeBrackets=null);d&&(E(J(d,
"pairs")),q.state.closeBrackets=d,q.addKeyMap(Z))});var Z={Backspace:function(w){var d=D(w);if(!d||w.getOption("disableInput"))return f.Pass;var h=J(d,"pairs");d=w.listSelections();for(var y=0;y<d.length;y++){if(!d[y].empty())return f.Pass;var t=K(w,d[y].head);if(!t||0!=h.indexOf(t)%2)return f.Pass}for(y=d.length-1;0<=y;y--)h=d[y].head,w.replaceRange("",q(h.line,h.ch-1),q(h.line,h.ch+1),"+delete")},Enter:function(q){var d=D(q);d=d&&J(d,"explode");if(!d||q.getOption("disableInput"))return f.Pass;for(var h=
q.listSelections(),y=0;y<h.length;y++){if(!h[y].empty())return f.Pass;var t=K(q,h[y].head);if(!t||0!=d.indexOf(t)%2)return f.Pass}q.operation(function(){var d=q.lineSeparator()||"\n";q.replaceSelection(d+d,null);q.execCommand("goCharLeft");h=q.listSelections();for(d=0;d<h.length;d++){var f=h[d].head.line;q.indentLine(f,null,!0);q.indentLine(f+1,null,!0)}})}};E(y.pairs+"`")});(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){function J(f){for(var z=0;z<f.state.activeLines.length;z++)f.removeLineClass(f.state.activeLines[z],"wrap","CodeMirror-activeline"),f.removeLineClass(f.state.activeLines[z],"background","CodeMirror-activeline-background"),f.removeLineClass(f.state.activeLines[z],"gutter","CodeMirror-activeline-gutter")}
function E(f,z){if(f.length!=z.length)return!1;for(var v=0;v<f.length;v++)if(f[v]!=z[v])return!1;return!0}function z(f,z){for(var v=[],y=0;y<z.length;y++){var q=z[y],D=f.getOption("styleActiveLine");if("object"==typeof D&&D.nonEmpty?q.anchor.line==q.head.line:q.empty())q=f.getLineHandleVisualStart(q.head.line),v[v.length-1]!=q&&v.push(q)}E(f.state.activeLines,v)||f.operation(function(){J(f);for(var q=0;q<v.length;q++)f.addLineClass(v[q],"wrap","CodeMirror-activeline"),f.addLineClass(v[q],"background",
"CodeMirror-activeline-background"),f.addLineClass(v[q],"gutter","CodeMirror-activeline-gutter");f.state.activeLines=v})}function D(f,D){z(f,D.ranges)}f.defineOption("styleActiveLine",!1,function(E,K,v){v=v==f.Init?!1:v;K!=v&&(v&&(E.off("beforeSelectionChange",D),J(E),delete E.state.activeLines),K&&(E.state.activeLines=[],z(E,E.listSelections()),E.on("beforeSelectionChange",D)))})});(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){function J(f,q,v,w,d,h){this.indented=f;this.column=q;this.type=v;this.info=w;this.align=d;this.prev=h;this.defs={}}function E(f,q,v,w){var d=f.indented;")"==v&&(f.saveDefs=null);f.context&&"statement"==f.context.type&&"statement"!=v&&(d=f.context.indented);f.context=new J(d,q,v,w,null,f.context);"}"==
v&&f.saveDefs&&(f.context.defs=f.saveDefs,f.saveDefs=null);return f.context}function z(f){var q=f.context.type;if(")"==q||"]"==q||"}"==q)f.indented=f.context.indented;")"==q&&(f.saveDefs=f.context.defs);return f.context=f.context.prev}function D(f,q,v){if("variable"==q.prevToken||"type"==q.prevToken||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(f.string.slice(0,v))||q.typeAtEndOfLine&&f.column()==f.indentation())return!0}function P(f){for(;;){if(!f||"top"==f.type)return!0;if(")"==f.type||"}"==f.type)return!1;
f=f.prev}}function K(f){var q={};f=f.split(" ");for(var v=0;v<f.length;++v)q[f[v]]=!0;return q}function v(f,q){return"function"===typeof f?f(q):f.propertyIsEnumerable(q)}f.defineMode("clike",function(y,q){function K(f,h){var n=f.next();if(aa[n]){var p=aa[n](f,h);if(!1!==p)return p}if('"'==n||"'"==n)return h.tokenize=w(n),h.tokenize(f,h);if(k.test(n))return U=n,null;if(V.test(n)){f.backUp(1);if(f.match(W))return"number";f.next()}if("/"==n){if(f.eat("*"))return h.tokenize=d,d(f,h);if(f.eat("/"))return f.skipToEnd(),
"comment"}if(O.test(n)){for(;!f.match(/^\/[\/*]/,!1)&&f.eat(O););return"operator"}f.eatWhile(S);if(ha)for(;f.match(ha);)f.eatWhile(S);f=f.current();if(v(Ya,f))return"error";if(v(Da,f))return v(R,f)&&(va=!0),v(oa,f)?(U="newstatement","blockkeyword"):"keyword";if(v(ja,f))return"type";if(v(Q,f))return"defbuiltin";if(v(Ta,f)||ea&&ea(f))return v(oa,f)&&(U="newstatement"),"builtin";if(v(Y,f))return"atom";if(h.topDefs[f])return"def";if(h.topVars[f])return"variable-2";a:for(h=h.context;;){if(!h||"top"==h.type){h=
!1;break a}if(h.defs[f]){h=!0;break a}h=h.prev}return h?"variable-3":"variable"}function w(d){return function(f,h){for(var k=!1,l,n=!1;null!=(l=f.next());){if(l==d&&!k){n=!0;break}k=!k&&"\\"==l}if(n||!k&&!p)h.tokenize=null;return"string"}}function d(d,f){for(var h=!1,k;k=d.next();){if("/"==k&&h){f.tokenize=null;break}h="*"==k}return"comment"}function h(d,f){q.typeFirstDefinitions&&d.eol()&&P(f.context)&&(f.typeAtEndOfLine=D(d,f,d.pos))}var F=y.indentUnit,t=q.statementIndentUnit||F,N=q.dontAlignCalls,
Da=q.keywords||{},Ya=q.errors||{},ja=q.types||{},Ta=q.builtin||{},oa=q.blockKeywords||{},R=q.defKeywords||{},Y=q.atoms||{},Q=q.defBuiltin||{},aa=q.hooks||{},p=q.multiLineStrings,n=!1!==q.indentStatements,ha=q.namespaceSeparator,k=q.isPunctuationChar||/[\[\]{}\(\),;:\.]/,V=q.numberStart||/[\d\.]/,W=q.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,O=q.isOperatorChar||/[+\-*&%=<>!?|\/]/,S=q.isIdentifierChar||/[\w\$_\xa1-\uffff]/,ea=q.isReservedIdentifier||!1,U,va;return{startState:function(d){return{tokenize:null,
context:new J((d||0)-F,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null,topDefs:{},topVars:{}}},token:function(d,f){var k=f.context;d.sol()&&(null==k.align&&(k.align=!1),f.indented=d.indentation(),f.startOfLine=!0);if(d.eatSpace())return h(d,f),null;U=va=null;var p=(f.tokenize||K)(d,f);if("comment"==p||"meta"==p)return p;null==k.align&&(k.align=!0);if(";"==U||":"==U||","==U&&d.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==f.context.type;)z(f);else if("{"==U)E(f,d.column(),"}");else if("["==
U)E(f,d.column(),"]");else if("("==U)E(f,d.column(),")");else if("}"==U){for(;"statement"==k.type;)k=z(f);for("}"==k.type&&(k=z(f));"statement"==k.type;)k=z(f)}else U==k.type?z(f):n&&(("}"==k.type||"top"==k.type)&&";"!=U||"statement"==k.type&&"newstatement"==U)&&E(f,d.column(),"statement",d.current());if("variable"==p&&("def"==f.prevToken||","==f.prevToken||q.typeFirstDefinitions&&D(d,f,d.start)))if(d.match(/^\s*\(/,!1))P(f.context)&&(p="def",f.topDefs[d.current()]=!0);else if(P(f.context))p="variable-2",
f.topVars[d.current()]=!0;else a:{p="variable-3",k=f.context;for(var l=d.current();;){if(!k||"top"==k.type)break a;if("}"==k.type||")"==k.type){if(k.defs[l])break a;k.defs[l]=!0;break a}k=k.prev}}aa.token&&(k=aa.token(d,f,p),void 0!==k&&(p=k));"def"==p&&!1===q.styleDefs&&(p="variable");f.startOfLine=!1;f.prevToken=va?"def":p||U;h(d,f);return p},indent:function(d,h){if(d.tokenize!=K&&null!=d.tokenize||d.typeAtEndOfLine)return f.Pass;var k=d.context,n=h&&h.charAt(0),l=n==k.type;"statement"==k.type&&
"}"==n&&(k=k.prev);if(q.dontIndentStatements)for(;"statement"==k.type&&q.dontIndentStatements.test(k.info);)k=k.prev;if(aa.indent&&(d=aa.indent(d,k,h,F),"number"==typeof d))return d;d=k.prev&&"switch"==k.prev.info;if(q.allmanIndentation&&/[{(]/.test(n)){for(;"top"!=k.type&&"}"!=k.type;)k=k.prev;return k.indented}return"statement"==k.type?k.indented+("{"==n?0:t):!k.align||N&&")"==k.type?")"!=k.type||l?k.indented+(l?0:F)+(l||!d||/^(?:case|default)\b/.test(h)?0:F):k.indented+t:k.column+(l?0:1)},electricInput:!1!==
q.indentSwitch?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace",copyState:function(d){var f={},h;for(h in d){var k=d[h];"topDefs"===h||"topVars"===h?k=Object.assign({},k):k instanceof Array&&(k=k.concat([]));f[h]=k}return f}}});K("int long char short double float unsigned signed void bool");K("SEL instancetype id Class Protocol BOOL");(function(v,q){function y(d){if(d)for(var f in d)d.hasOwnProperty(f)&&
w.push(f)}"string"==typeof v&&(v=[v]);var w=[];y(q.keywords);y(q.types);y(q.builtin);y(q.atoms);w.length&&(q.helperType=v[0],f.registerHelper("hintWords",v[0],w));for(var d=0;d<v.length;++d)f.defineMIME(v[d],q)})("text/x-processo",{name:"clike",keywords:K("break continue else false for if new null return true while"),errors:K("Infinity NaN abstract assert case catch class const debugger default delete do enum export extends final finally function goto implements import in instanceof interface let native package private protected public static strictfp super switch synchronized this throw throws transient try undefined volatile with yield"),
types:K("boolean char color double int void"),blockKeywords:K("else for if while"),builtin:K("abs acos arc asin atan atan2 background ceil cos ellipse fill floor frameRate hsv isDouble isInt line loadStrings log max min noFill noStroke pow print println quad random rect round sin size sort split sqrt stroke strokeWeight rgb saveStrings split tan text textSize toDouble toInt toString triangle"),typeFirstDefinitions:!0,atoms:K("CHORD OPEN PI PIE frameCount height isKeyPressed isMousePressed key mouseButton mouseX mouseY pmouseX pmouseY width"),
defBuiltin:K("draw keyPressed keyReleased keyTyped mousePressed mouseReleased"),number:/^(?:(?:0|[1-9]\d*(?:\.\d*)?|\.\d+)(?:e[-+]?[\d_]+)?)/i,hooks:{token:function(f,q,v){if("variable"==v&&"."==q.prevToken)return"variable-2"}},modeProps:{fold:["brace"]}})});(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){function J(d,h,q){function t(d){if(!v.parentNode)return f.off(document,"mousemove",t);v.style.top=Math.max(0,d.clientY-v.offsetHeight-5)+"px";v.style.left=d.clientX+5+"px"}var v=document.createElement("div");v.className="CodeMirror-lint-tooltip cm-s-"+d.options.theme;v.appendChild(q.cloneNode(!0));d.state.lint.options.selfContain?
d.getWrapperElement().appendChild(v):document.body.appendChild(v);f.on(document,"mousemove",t);t(h);null!=v.style.opacity&&(v.style.opacity=1);return v}function E(d){d.parentNode&&(null==d.style.opacity&&d.parentNode&&d.parentNode.removeChild(d),d.style.opacity=0,setTimeout(function(){d.parentNode&&d.parentNode.removeChild(d)},600))}function z(d,h,q,t){function v(){f.off(t,"mouseout",v);w&&(E(w),w=null)}var w=J(d,h,q),y=setInterval(function(){if(w)for(var d=t;;d=d.parentNode){d&&11==d.nodeType&&(d=
d.host);if(d==document.body)return;if(!d){v();break}}if(!w)return clearInterval(y)},400);f.on(t,"mouseout",v)}function D(d,f,q){this.marked=[];this.options=f;this.timeout=null;this.hasGutter=q;this.onMouseOver=function(f){var h=f.target||f.srcElement;if(/\bCodeMirror-lint-mark-/.test(h.className)){h=h.getBoundingClientRect();var q=d.findMarksAt(d.coordsChar({left:(h.left+h.right)/2,top:(h.top+h.bottom)/2},"client"));h=[];for(var t=0;t<q.length;++t){var w=q[t].__annotation;w&&h.push(w)}if(h.length){q=
f.target||f.srcElement;t=document.createDocumentFragment();for(w=0;w<h.length;w++)t.appendChild(v(h[w]));z(d,f,t,q)}}};this.waitingFor=0}function P(d){var f=d.state.lint;f.hasGutter&&d.clearGutter("CodeMirror-lint-markers");for(d=0;d<f.marked.length;++d)f.marked[d].clear();f.marked.length=0}function K(d,h,q,t,v){var w=document.createElement("div"),y=w;w.className="CodeMirror-lint-marker-"+q;t&&(y=w.appendChild(document.createElement("div")),y.className="CodeMirror-lint-marker-multiple");if(0!=v)f.on(y,
"mouseover",function(f){z(d,f,h,y)});return w}function v(d){var f=d.severity;f||(f="error");var q=document.createElement("div");q.className="CodeMirror-lint-message-"+f;"undefined"!=typeof d.messageHTML?q.innerHTML=d.messageHTML:q.appendChild(document.createTextNode(d.message));return q}function y(d,h,q){function t(){w=-1;d.off("change",t)}var v=d.state.lint,w=++v.waitingFor;d.on("change",t);h(d.getValue(),function(h,q){d.off("change",t);v.waitingFor==w&&(q&&h instanceof f&&(h=q),d.operation(function(){Z(d,
h)}))},q,d)}function q(d){var h=d.state.lint.options,q=h.options||h,t=h.getAnnotations||d.getHelper(f.Pos(0,0),"lint");if(t)if(h.async||t.async)y(d,t,q);else{var v=t(d.getValue(),q,d);v&&(v.then?v.then(function(f){d.operation(function(){Z(d,f)})}):d.operation(function(){Z(d,v)}))}}function Z(d,f){P(d);for(var h=d.state.lint,q=h.options,w=[],y=0;y<f.length;++y){var z=f[y],D=z.from.line;(w[D]||(w[D]=[])).push(z)}for(y=0;y<w.length;++y)if(z=w[y]){D=null;for(var E=h.hasGutter&&document.createDocumentFragment(),
J=0;J<z.length;++J){var R=z[J],Y=R.severity;Y||(Y="error");"error"!=D&&(D=Y);q.formatAnnotation&&(R=q.formatAnnotation(R));h.hasGutter&&E.appendChild(v(R));if(R.to)if((R.from.line==R.to.line&&R.from.ch+1==R.to.ch||R.from.line+1==R.to.line&&0==R.to.ch)&&-1<["\n",""].indexOf(d.doc.getRange(R.from,R.to))){var Q=document.createElement("span");Q.innerHTML=" ";Q.className="CodeMirror-lint-mark-"+Y;h.marked.push(d.markText(R.from,R.from,{replacedWith:Q,clearWhenEmpty:!1,handleMouseEvents:!0,atomic:!0,selectLeft:!0,
insertLeft:!0,selectRight:!1,__annotation:R}))}else h.marked.push(d.markText(R.from,R.to,{className:"CodeMirror-lint-mark-"+Y,__annotation:R}))}h.hasGutter&&d.setGutterMarker(y,"CodeMirror-lint-markers",K(d,E,D,1<z.length,h.options.tooltips))}if(q.onUpdateLinting)q.onUpdateLinting(f,w,d)}function w(d){var f=d.state.lint;f&&(clearTimeout(f.timeout),f.timeout=setTimeout(function(){q(d)},f.options.delay||500))}f.defineOption("lint",!1,function(d,h,v){v&&v!=f.Init&&(P(d),!1!==d.state.lint.options.lintOnChange&&
d.off("change",w),f.off(d.getWrapperElement(),"mouseover",d.state.lint.onMouseOver),clearTimeout(d.state.lint.timeout),delete d.state.lint);if(h){var t=d.getOption("gutters");v=!1;for(var y=0;y<t.length;++y)"CodeMirror-lint-markers"==t[y]&&(v=!0);t=d.state;h instanceof Function?h={getAnnotations:h}:h&&!0!==h||(h={});v=t.lint=new D(d,h,v);if(!1!==v.options.lintOnChange)d.on("change",w);if(0!=v.options.tooltips&&"gutter"!=v.options.tooltips)f.on(d.getWrapperElement(),"mouseover",v.onMouseOver);q(d)}});
f.defineExtension("performLint",function(){this.state.lint&&q(this)})});
</script>
</head>
<body>
<div class="surround">
<div class="row buttons">
<input id="runbutton" type="button" value="Wait..." disabled onclick='$$runprog();'>
<input id="stopbutton" type="button" value="Stop â " disabled onclick='$$stopprog();'>
<input id="pickbutton" type="button" value="Pick Color ð¨" onclick='$$pickcolor();'>
<input id="indentbutton" type="button" value="Format" onclick='$$indent();'>
<form id="saveform"><input id="savebutton" type="submit" value="Save ð¾"></form>
<form id="openform"><input id="openbutton" type="file" accept=".prcs"></form>
</div>
<div class="split row middle" id="mid">
        <div id="color-picker" class="cp-default">
            <div class="picker-wrapper">
                <div id="picker" class="picker"></div>
                <div id="picker-indicator" class="picker-indicator"></div>
            </div>
            <div class="slide-wrapper">
                <div id="slide" class="slide"></div>
                <div id="slide-indicator" class="slide-indicator"></div>
            </div>
			<br/>
			<input type="text" id="rgb" class="monofont" readonly="readonly" value="rgb(?,?,?)">
			<input type="button" id="rgbbutton" value="Copy" disabled onclick='document.querySelector("#rgb").select();document.execCommand("copy");'>
        </div>
<canvas id="canvas" contenteditable="true" autocapitalize="none" tabindex="0"></canvas>
</div>
<textarea readonly class="split row console monofont" id="textconsole" autocapitalize="none" spellcheck="false" autocomplete="off" wrap="soft"></textarea>
</div>
<script>
"use strict";
  if (window.navigator.userAgent.indexOf("Trident/") != -1) {
	document.getElementById("canvas").setAttribute("contenteditable", "false");
  }
  var editor_processo = CodeMirror(document.getElementById("mid"), {
    lineNumbers: true,
    indentUnit: 4,
    styleActiveLine: true,
    matchBrackets: true,
    autoCloseBrackets: true,
    mode: "text/x-processo",
    gutters: ["CodeMirror-lint-markers"],
    lint: {delay: 100},
	extraKeys: {
	  "Tab": function(cm) {cm.somethingSelected()?cm.indentSelection("add"):cm.execCommand("insertSoftTab");}
    }
  });
CodeMirror.commands.save = function(cm) {
	function d2(x) { return x < 10 ? ("0"+x) : (""+x); }
	var blob = new Blob([cm.getDoc().getValue()], {type : 'text/prs.prcs;charset='+document.characterSet});
	var today = new Date();
	saveAs(blob, (window.name?window.name:today.getFullYear())+"-"+d2(today.getMonth()+1)+"-"+d2(today.getDate())+"_"+d2(today.getHours())+d2(today.getMinutes())+".prcs");
};

CodeMirror.registerHelper("lint","text/x-processo",function(l){$$prog=null;if(l.length>0)localStorage.setItem($$key,l);var m=[],rb=document.getElementById("runbutton");if(!window.parseprocesso)return window.console&&window.console.error("Error: parseprocesso not defined, CodeMirror processo linting cannot run."),m;try{rb.disabled=false;$$prog=window.parseprocesso.parseProgram(l);document.getElementById("runbutton").value="Run â¶";$$errormsg=null;}catch(b){rb.value="Error ð";if(b.location){m.push({from:CodeMirror.Pos(b.location.start.line-1,b.location.start.column-
1),to:CodeMirror.Pos(b.location.end.line-1,b.location.end.column-1),message:b.message});$$errormsg="Line "+b.location.end.line+": "+b.message;}else {rb.disabled=true;$$println(b)}}return m});
document.getElementById("openbutton").value = null;
  if (localStorage.getItem($$key)) {
    editor_processo.getDoc().setValue(localStorage.getItem($$key));
  } else {
    editor_processo.performLint();
  }



	ColorPicker(document.getElementById('slide'), document.getElementById('picker'), 
                function(hex, hsv, rgb, mousePicker, mouseSlide) {
                    ColorPicker.positionIndicators(document.getElementById('slide-indicator'), document.getElementById('picker-indicator'), mouseSlide, mousePicker);
                    document.getElementById('rgb').value = 'rgb(' + rgb.r.toFixed() + ',' + rgb.g.toFixed() + ',' + rgb.b.toFixed() + ')';
					document.getElementById('rgbbutton').disabled=false;
					document.getElementById('color-picker').style.backgroundColor=hex;
                    //document.getElementById('hsv').innerHTML = 'hsv(' + hsv.h.toFixed() + ',' + hsv.s.toFixed(2) + ',' + hsv.v.toFixed(2) + ')';
					
            }).setHex("#FFFFFF");


  document.getElementById("saveform").addEventListener("submit",
	function(A) {
		A.preventDefault();
		function d2(x) { return x < 10 ? ("0"+x) : (""+x); }
		var blob = new Blob([editor_processo.getDoc().getValue()], {type : 'text/prs.prcs;charset='+document.characterSet});
		var today = new Date();
		saveAs(blob, (window.name?window.name:today.getFullYear())+"-"+d2(today.getMonth()+1)+"-"+d2(today.getDate())+"_"+d2(today.getHours())+d2(today.getMinutes())+".prcs");
	},false);
  document.getElementById("openform").addEventListener("change",
	function(A) {
		A.preventDefault();
		var ob = document.getElementById("openbutton");
		if (ob.files && ob.files.length == 1) {
			$$stopprog();
			var fr = new FileReader();
			fr.addEventListener("loadend", function(){
				editor_processo.getDoc().setValue(fr.result);
			});
			fr.readAsText(ob.files[0]);
		}
	},false);
	
  editor_processo.setOption("theme", "processing");
  Split([".row.middle",".row.console"], {direction: "vertical",  sizes:[90,10], minSize:24,  elementStyle: function(dimension, size, gutterSize) {
        return {
            'flex-basis': 'calc(' + size + '% - ' + gutterSize + 'px)',
        }
    },
    gutterStyle: function(dimension, gutterSize) {
        return {
            'flex-basis': gutterSize + 'px',
        }
    }});
</script>
</body>